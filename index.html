<!doctype html>
<html lang="ar" dir="rtl">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EventPlus - ุญููู ุงูุนุฑุถ ูุงูุชูุงุนู</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">


  <style>
        body {
            box-sizing: border-box;
        }
        
        
        * {
            font-family: 'Tajawal', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #41296D 0%, #EC2B84 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .section-padding {
            padding: 4rem 1.5rem;
        }
        
        @media (max-width: 768px) {
            .section-padding {
                padding: 2.5rem 1rem;
            }
        }
        
        .smooth-scroll {
            scroll-behavior: smooth;
        }
        
        .device-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
        }
        
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .price-tag {
            font-size: 2rem;
            font-weight: 900;
            color: #41296D;
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Slideshow Styles */
        .slideshow-container {
            position: relative;
        }
        
        .slide {
            display: none;
            position: absolute;
            width: 100%;
            top: 0;
            left: 0;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        
        .slide.active {
            display: flex;
            opacity: 1;
        }
        
        .slide-nav {
            z-index: 10;
        }
        
        .dot.active {
            background-color: rgba(255, 255, 255, 0.9) !important;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="smooth-scroll"><!-- Navigation -->
  <nav class="gradient-bg text-white sticky top-0 z-50 shadow-lg">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-20">
     <div class="flex items-center gap-3">
      <div class="text-3xl">
       ๐ฏ
      </div>
      <div>
       <h1 class="text-2xl font-bold" id="nav-title">EventPlus</h1>
       <p class="text-xs opacity-90">ุญููู ุงูุนุฑุถ ุงูุฐููุฉ</p>
      </div>
     </div><button onclick="scrollToSection('booking')" class="bg-white text-purple-900 px-6 py-2.5 rounded-full font-bold hover:bg-gray-50 transition-all"> ุงุญุฌุฒ ุงูุขู </button>
    </div>
   </div>
  </nav><!-- Hero Section -->
  <section class="gradient-bg text-white section-padding">
   <div class="max-w-6xl mx-auto"><!-- Slideshow -->
    <div class="relative mb-12 rounded-3xl overflow-hidden shadow-2xl">
     <div class="slideshow-container relative h-96 md:h-[500px]"><!-- Slide 1 -->
      <div class="slide active bg-gradient-to-br from-blue-600 to-purple-700 h-full flex items-center justify-center text-white relative">
       <div class="absolute inset-0 bg-black/20"></div>
       <div class="text-center z-10">
        <div class="text-8xl mb-4">
         ุดุงุดุงุช ุงูุนุฑุถ ุงูุฐููุฉ
        </div>
        <h3 class="text-3xl font-bold mb-2">ุดุงุดุงุช ุงูุนุฑุถ ุงูุฐููุฉ</h3>
        <p class="text-lg opacity-90">ุชูููุฉ ูุชุทูุฑุฉ ูุนุฑุถ ุงููุญุชูู ุงูุชูุงุนูู</p>
       </div>
      </div><!-- Slide 2 -->
      <div class="slide bg-gradient-to-br from-teal-600 to-blue-700 h-full flex items-center justify-center text-white relative">
       <div class="absolute inset-0 bg-black/20"></div>
       <div class="text-center z-10">
        <div class="text-8xl mb-4">
         ุงูุฃูุดุงู ุงูุชูุงุนููุฉ
        </div>
        <h3 class="text-3xl font-bold mb-2">ุงูุฃูุดุงู ุงูุชูุงุนููุฉ</h3>
        <p class="text-lg opacity-90">ุชุฌุฑุจุฉ ููุณ ูุชูุฏูุฉ ูุฌูุน ุงูุจูุงูุงุช</p>
       </div>
      </div><!-- Slide 3 -->
      <div class="slide bg-gradient-to-br from-pink-600 to-purple-700 h-full flex items-center justify-center text-white relative">
       <div class="absolute inset-0 bg-black/20"></div>
       <div class="text-center z-10">
        <div class="text-8xl mb-4">
         ููุตุฉ ุงูุชุตููุฑ 360ยฐ
        </div>
        <h3 class="text-3xl font-bold mb-2">ููุตุฉ ุงูุชุตููุฑ 360ยฐ</h3>
        <p class="text-lg opacity-90">ุชุฌุฑุจุฉ ุชุตููุฑ ุฏูุงุฑุฉ ูุฐููุฉ</p>
       </div>
      </div><!-- Slide 4 -->
      <div class="slide bg-gradient-to-br from-orange-600 to-red-700 h-full flex items-center justify-center text-white relative">
       <div class="absolute inset-0 bg-black/20"></div>
       <div class="text-center z-10">
        <div class="text-8xl mb-4">
         ุญููู ูุชูุงููุฉ
        </div>
        <h3 class="text-3xl font-bold mb-2">ุญููู ูุชูุงููุฉ</h3>
        <p class="text-lg opacity-90">ูู ุงูููุฑุฉ ุฅูู ุงูุชูููุฐ ุงูุงุญุชุฑุงูู</p>
       </div>
      </div><!-- Navigation arrows --> <button class="slide-nav prev absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-3 rounded-full transition-all" onclick="changeSlide(-1)"> โฎ </button> <button class="slide-nav next absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-3 rounded-full transition-all" onclick="changeSlide(1)"> โฏ </button> <!-- Dots indicator -->
      <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2"><button class="dot active w-3 h-3 rounded-full bg-white/50 hover:bg-white/80 transition-all" onclick="currentSlide(1)"></button> <button class="dot w-3 h-3 rounded-full bg-white/50 hover:bg-white/80 transition-all" onclick="currentSlide(2)"></button> <button class="dot w-3 h-3 rounded-full bg-white/50 hover:bg-white/80 transition-all" onclick="currentSlide(3)"></button> <button class="dot w-3 h-3 rounded-full bg-white/50 hover:bg-white/80 transition-all" onclick="currentSlide(4)"></button>
      </div>
     </div>
    </div>
    <div class="text-center">
     <h2 class="text-4xl md:text-6xl font-black mb-6 leading-tight" id="hero-title">EventPlus โ ุญููู ุงูุนุฑุถ ูุงูุชูุงุนู ููููููุฌุฑุงู ูุงูุดุงุดุงุช ุงูุฐููุฉ</h2>
     <p class="text-xl md:text-2xl mb-10 opacity-95 leading-relaxed" id="hero-subtitle">ูุญููู ุงูุชูููุฉ ุฅูู <span class="font-bold">ุชุฌุฑุจุฉ ุฅูุณุงููุฉ</span> ุชูููุน ุฌูููุฑูู ูุชููุชุฌ ุจูุงูุงุช ูุงุจูุฉ ูููุฑุงุฑ</p>
     <div class="flex flex-wrap justify-center gap-4"><button onclick="scrollToSection('booking')" class="bg-white text-purple-900 px-8 py-4 rounded-full text-lg font-bold hover:bg-gray-50 transition-all shadow-lg"> ุงุญุฌุฒ ุงูุขู ๐ </button> <button onclick="scrollToSection('catalog')" class="bg-pink-600 text-white px-8 py-4 rounded-full text-lg font-bold hover:bg-pink-700 transition-all"> ูุชุงููุฌ ุงูุดุงุดุงุช ๐ฑ </button> <a href="#" id="whatsapp-hero-btn" class="bg-teal-500 text-white px-8 py-4 rounded-full text-lg font-bold hover:bg-teal-600 transition-all inline-flex items-center gap-2"> ูุงุชุณุงุจ ๐ฌ </a>
     </div>
     <div class="mt-12 bg-white/10 backdrop-blur-sm rounded-2xl p-6 max-w-3xl mx-auto">
      <p class="text-sm font-semibold mb-2">โ ุฑุณูู ุงูุชูุตูู ูุญุณูุจุฉ ุชููุงุฆูุงู ุญุณุจ ุนุฏุฏ ุงูุดุงุดุงุช</p>
      <p class="text-xs opacity-90">๐ก ุฌููุน ุงูุฃุณุนุงุฑ ูุงุจูุฉ ููุชูุงูุถ โ ุฎุตููุงุช ุฐููุฉ ุชููุงุฆูุฉ</p>
     </div>
    </div>
   </div>
 </section><section class="section-padding" style="background-color: #F5F5F7;">
   <div class="max-w-6xl mx-auto">
    <div class="grid md:grid-cols-3 gap-8">
     
     <div class="bg-white p-8 rounded-2xl shadow-lg text-center transition-all duration-300 hover:shadow-2xl hover:-translate-y-2">
      <div class="w-20 h-20 p-4 mx-auto mb-5 rounded-full text-purple-600 bg-purple-100 flex items-center justify-center">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.39S6.54 9 9 9m9.75-3.612a4.5 4.5 0 0 0-7.798-3.047 4.5 4.5 0 0 0-7.798 3.047 4.5 4.5 0 0 0 7.798 3.047 4.5 4.5 0 0 0 7.798-3.047Zm-12.42 0v5.176c0 .354.09.695.248.99l3.104 3.973c.36.46.94.746 1.559.746h.04c.618 0 1.198-.287 1.559-.746l3.104-3.973A3.75 3.75 0 0 0 18 10.603V6.388Zm0 0h.003v.004h-.003V6.388Zm.75 0v5.176c0 .21.054.41.148.594l3.104 3.973c.216.276.56.438.92.438h.04c.359 0 .703-.162.92-.438l3.104-3.973a2.25 2.25 0 0 0 .148-.594V6.388h-9.75Z" />
       </svg>
      </div>
      <h3 class="text-2xl font-bold mb-3 text-purple-800">ูุงุฐุง ููุฏููุ</h3>
      <p class="text-gray-600 leading-relaxed">ููููุฌุฑุงู ุซูุงุซู ุงูุฃุจุนุงุฏุ ุดุงุดุงุช ุฐููุฉุ 360 Photo Boothุ ุญููุงุช ุชูุงุนููุฉ ูููุงุณ ุงูุฃุซุฑ</p>
     </div>

     <div class="bg-white p-8 rounded-2xl shadow-lg text-center transition-all duration-300 hover:shadow-2xl hover:-translate-y-2">
      <div class="w-20 h-20 p-4 mx-auto mb-5 rounded-full text-blue-600 bg-blue-100 flex items-center justify-center">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12">
        <path stroke-linecap="round" stroke-linejoin="round" d="m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z" />
       </svg>
      </div>
      <h3 class="text-2xl font-bold mb-3 text-purple-800">ููุงุฐุง ูุญูุ</h3>
      <p class="text-gray-600 leading-relaxed">ุชูููุฐ ููุฏุงูู ุณุฑูุน ุฏุงุฎู ูุณูุทุ ุจุงูุงุช ูุงุถุญุฉุ ุฏุนู ููู ุงุญุชุฑุงูู</p>
     </div>
     
     <div class="bg-white p-8 rounded-2xl shadow-lg text-center transition-all duration-300 hover:shadow-2xl hover:-translate-y-2">
      <div class="w-20 h-20 p-4 mx-auto mb-5 rounded-full text-teal-600 bg-teal-100 flex items-center justify-center">
       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z" />
       </svg>
      </div>
      <h3 class="text-2xl font-bold mb-3 text-purple-800">ูุชุงุฆุฌ ูุงุจูุฉ ููููุงุณ</h3>
      <p class="text-gray-600 leading-relaxed">ูุงุฌูุงุช ููุณ/QRุ ุชูุงุฑูุฑ ูุฎุชุตุฑุฉ ุจุนุฏ ุงููุนุงููุฉ</p>
     </div>
    </div>
   </div>
  </section><section id="catalog" class="section-padding bg-white">
   <div class="max-w-7xl mx-auto">
    <div class="text-center mb-16">
     <h2 class="text-4xl md:text-5xl font-extrabold mb-4">ูุชุงููุฌ ุงูุดุงุดุงุช ๐ฑ</h2>
     <p class="text-xl text-gray-600">ุงุฎุชุฑ ุงูุฌูุงุฒ ุงูููุงุณุจ ููุนุงููุชู</p>
    </div>
    <div class="grid md:grid-cols-2 lg:grid-cols-2 gap-8" id="devices-container"><div class="device-card card-hover">
      <img src="https://i.ibb.co/G4NmCTrQ/7.png" alt="ูููุฉ ุชู โ ุดุงุดุฉ ุงููููุฉ ุงูุฐููุฉ" class="h-56 w-full object-cover">
      
      <div class="bg-gradient-to-br from-blue-500 to-blue-600 p-6 text-white">
       <div class="flex justify-between items-start mb-4">
        <h3 class="text-2xl font-bold">ูููุฉ ุชู โ ุดุงุดุฉ ุงููููุฉ ุงูุฐููุฉ</h3><span class="badge bg-white text-blue-600">ุดุงุดุฉ ุฑูููุฉ</span>
       </div>
       <p class="text-blue-100">HuwiyaTek 32 LED NoNFC View (Digital Notice Board)</p>
      </div>
      <div class="p-6">
       <div class="grid grid-cols-2 gap-4 mb-6 text-sm">
        <div>
         <span class="font-semibold">ุงูููุงุณ:</span> 32โณ
        </div>
        <div>
         <span class="font-semibold">ุงูุดุงุดุฉ:</span> LED
        </div>
        <div>
         <span class="font-semibold">ุงูููุณ:</span> ูุนู
        </div>
        <div>
         <span class="font-semibold">NFC:</span> ูุง
        </div>
        <div>
         <span class="font-semibold">ุงููุธุงู:</span> Android 11
        </div>
        <div>
         <span class="font-semibold">ุงูุณุนุฉ:</span> 2+32G
        </div>
       </div>
       <p class="text-gray-600 mb-4 text-sm"><strong>ุงูุงุณุชุฎุฏุงู ุงููุซุงูู:</strong> ุดุงุดุฉ ุนุฑุถ ุซุงุจุชุฉ ูุนุฑุถ ุงููููุฉ ูุงูุนุฑูุถ ุงูุชุนุฑูููุฉ ูู ุงููุฏุงุฎู ูุงููุนุงุฑุถ ูุงูููุงุชุจ ุงูุฑุณููุฉ</p>
       <div class="flex justify-between items-center mb-4">
        <div>
         <div class="price-tag">
          45 OMR
         </div>
         <div class="text-sm text-gray-500">
          ููู ูุงุญุฏ
         </div>
        </div>
        <button onclick="addDeviceToSelection('ูููุฉ ุชู โ ุดุงุดุฉ ุงููููุฉ ุงูุฐููุฉ', 45, 350)" class="bg-pink-600 text-white px-6 py-3 rounded-full font-bold shadow-lg transform hover:-translate-y-0.5 hover:shadow-xl transition-all duration-300"> ุฃุถู ููุญุฌุฒ </button>
       </div>
       <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
        <div class="text-xs text-blue-800 font-semibold mb-1">
         ๐ก ุจุงูุฉ ุงููุชุฑุงุช ุงูุทูููุฉ
        </div>
        <div class="text-xs text-blue-700">
         โข ูู 4 ุฃูุงู: ุฎุตู 15%<br>
          โข ูู 8 ุฃูุงู: ุฎุตู 50%<br>
          โข ุงูุณูู ุงูุดูุฑู: 157.50 OMR
        </div>
       </div>
      </div>
     </div><div class="device-card card-hover">
      <img src="https://i.ibb.co/vCX4RDc2/5.png" alt="ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ" class="h-56 w-full object-cover">
      
      <div class="bg-gradient-to-br from-purple-500 to-purple-600 p-6 text-white">
       <div class="flex justify-between items-start mb-4">
        <h3 class="text-2xl font-bold">ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ</h3><span class="badge bg-white text-purple-600">ุจุทุงุฑูุฉ</span>
       </div>
       <p class="text-purple-100">HuwiyaTek 32 LED NFC Battery (Battery Operated Kiosk)</p>
      </div>
      <div class="p-6">
       <div class="grid grid-cols-2 gap-4 mb-6 text-sm">
        <div>
         <span class="font-semibold">ุงูููุงุณ:</span> 32โณ
        </div>
        <div>
         <span class="font-semibold">ุงูุดุงุดุฉ:</span> LED
        </div>
        <div>
         <span class="font-semibold">ุงูููุณ:</span> 10-ููุงุท
        </div>
        <div>
         <span class="font-semibold">NFC:</span> ูุนู
        </div>
        <div>
         <span class="font-semibold">ุงููุธุงู:</span> Android 13
        </div>
        <div>
         <span class="font-semibold">ุงูุจุทุงุฑูุฉ:</span> 8 ุณุงุนุงุช
        </div>
       </div>
       <p class="text-gray-600 mb-4 text-sm"><strong>ุงูุงุณุชุฎุฏุงู ุงููุซุงูู:</strong> ุดุงุดุฉ ุนุฑุถ ุฐููุฉ ุชุนูู ุจุงูุจุทุงุฑูุฉ ูุชุฏุนู NFCุ ูุซุงููุฉ ููุนุฑูุถ ุงูููุฏุงููุฉ ูุงูุชูุดูุทุงุช ุงูุฎุงุฑุฌูุฉ</p>
       <div class="flex justify-between items-center mb-4">
        <div>
         <div class="price-tag">
          45 OMR
         </div>
         <div class="text-sm text-gray-500">
          ููู ูุงุญุฏ
         </div>
        </div>
        <button onclick="addDeviceToSelection('ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ', 45, 400)" class="bg-pink-600 text-white px-6 py-3 rounded-full font-bold shadow-lg transform hover:-translate-y-0.5 hover:shadow-xl transition-all duration-300"> ุฃุถู ููุญุฌุฒ </button>
       </div>
       <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
        <div class="text-xs text-purple-800 font-semibold mb-1">
         ๐ก ุจุงูุฉ ุงููุชุฑุงุช ุงูุทูููุฉ
        </div>
        <div class="text-xs text-purple-700">
         โข ูู 4 ุฃูุงู: ุฎุตู 15%<br>
          โข ูู 8 ุฃูุงู: ุฎุตู 50%<br>
          โข ุงูุณูู ุงูุดูุฑู: 180.00 OMR
        </div>
       </div>
      </div>
     </div><div class="device-card card-hover">
      <img src="https://i.ibb.co/ynwBJvJB/6.png" alt="ููุณุฉ ุชู โ ุงููุดู ุงูุชูุงุนูู ุจุงูููุณ" class="h-56 w-full object-cover">
      
      <div class="bg-gradient-to-br from-teal-500 to-teal-600 p-6 text-white">
       <div class="flex justify-between items-start mb-4">
        <h3 class="text-2xl font-bold">ููุณุฉ ุชู โ ุงููุดู ุงูุชูุงุนูู ุจุงูููุณ</h3><span class="badge bg-white text-teal-600">ุชูุงุนูู</span>
       </div>
       <p class="text-teal-100">LamsaTek 21 LCD NFC Kiosk (K-Type Interactive Kiosk)</p>
      </div>
      <div class="p-6">
       <div class="grid grid-cols-2 gap-4 mb-6 text-sm">
        <div>
         <span class="font-semibold">ุงูููุงุณ:</span> 21.5โณ
        </div>
        <div>
         <span class="font-semibold">ุงูุดุงุดุฉ:</span> LCD
        </div>
        <div>
         <span class="font-semibold">ุงูููุณ:</span> ูุนู
        </div>
        <div>
         <span class="font-semibold">NFC:</span> ูุนู
        </div>
        <div>
         <span class="font-semibold">ุงููุธุงู:</span> Android 11
        </div>
        <div>
         <span class="font-semibold">ุงูุณุนุฉ:</span> 2+32G
        </div>
       </div>
       <p class="text-gray-600 mb-4 text-sm"><strong>ุงูุงุณุชุฎุฏุงู ุงููุซุงูู:</strong> ูุดู ุชูุงุนูู ุจุชุตููู K ุงูุนููุฏูุ ูุฒูุฏ ุจุดุงุดุฉ ููุณ ูNFC ูุฌูุน ุงูุจูุงูุงุช ูุชุณุฌูู ุงูุฒูุงุฑ ุจุทุฑููุฉ ุนุตุฑูุฉ</p>
       <div class="flex justify-between items-center mb-4">
        <div>
         <div class="price-tag">
          50 OMR
         </div>
         <div class="text-sm text-gray-500">
          ููู ูุงุญุฏ
         </div>
        </div>
        <button onclick="addDeviceToSelection('ููุณุฉ ุชู โ ุงููุดู ุงูุชูุงุนูู ุจุงูููุณ', 50, 400)" class="bg-teal-600 text-white px-6 py-3 rounded-full font-bold shadow-lg transform hover:-translate-y-0.5 hover:shadow-xl transition-all duration-300"> ุฃุถู ููุญุฌุฒ </button>
       </div>
       <div class="bg-teal-50 border border-teal-200 rounded-lg p-3">
        <div class="text-xs text-teal-800 font-semibold mb-1">
         ๐ก ุจุงูุฉ ุงููุชุฑุงุช ุงูุทูููุฉ
        </div>
        <div class="text-xs text-teal-700">
         โข ูู 4 ุฃูุงู: ุฎุตู 15%<br>
          โข ูู 8 ุฃูุงู: ุฎุตู 50%<br>
          โข ุงูุณูู ุงูุดูุฑู: 180.00 OMR
        </div>
       </div>
      </div>
     </div>
    </div>
   </div>
  </section><!-- Packages Section -->
  <section id="packages" class="section-padding" style="background-color: #F5F5F7;">
   <div class="max-w-6xl mx-auto">
    <div class="text-center mb-16">
     <h2 class="text-4xl md:text-5xl font-black mb-4">ุงูุจุงูุงุช ุงูุฑุณููุฉ ๐ฆ</h2>
     <p class="text-xl text-gray-600">ุจุงูุงุช ุฌุงูุฒุฉ ุจุฃุณุนุงุฑ ุซุงุจุชุฉ ูุฎุตููุงุช ุฐููุฉ</p>
    </div>
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8"><!-- Essential Plus Package -->
     <div class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover">
      <div class="text-white p-6 text-center" style="background: linear-gradient(135deg, #00B9A8 0%, #41296D 100%);">
       <div class="text-4xl mb-2">
        ๐บ
       </div>
       <h3 class="text-2xl font-bold">Essential Plus</h3>
       <p class="opacity-90">ุดุงุดุฉ ุงูุนุฑุถ + ุฅุถุงูุงุช ุฐููุฉ</p>
      </div>
      <div class="p-6">
       <div class="text-center mb-6">
        <div class="text-4xl font-black mb-2" style="color: #41296D;">
         75-120 OMR
        </div>
        <div class="text-sm text-gray-400 mt-1">
         ููู ูุงุญุฏ (ุญุณุจ ุงูุฅุถุงูุงุช)
        </div>
       </div>
       <ul class="space-y-3 mb-6">
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #00B9A8;">โ</span> <span>ุดุงุดุฉ ูุงุญุฏุฉ (ุญุณุจ ุงุฎุชูุงุฑู)</span></li>
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #00B9A8;">โ</span> <span>ุตูุญุฉ ุชูุงุนููุฉ HTML ูุฎุตุตุฉ</span></li>
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #00B9A8;">โ</span> <span>ููุฏูู ููุดู ุจุงูุดุนุงุฑ</span></li>
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #00B9A8;">โ</span> <span>ุจุฑุงูุฏูุบ ุงูุฌูุงุฒ</span></li>
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #00B9A8;">โ</span> <span>ุงูุชูุตูู ูุงูุชุฑููุจ ูุฌุงูุงู</span></li>
       </ul>
       <div class="bg-teal-50 border border-teal-200 rounded-lg p-3 mb-4">
        <div class="text-xs text-teal-800 font-semibold mb-1">
         ๐ก ุงูุฅุถุงูุงุช ุงููุดูููุฉ
        </div>
        <div class="text-xs text-teal-700">
         โข ุตูุญุฉ HTML: 30-80 OMR<br>
          โข ููุฏูู ููุดู: 30-60 OMR<br>
          โข ุจุฑุงูุฏูุบ: 15-25 OMR<br>
          โข ุฎุตู ุงูุจุงูุฉ: 10%
        </div>
       </div><button onclick="selectEssentialPlusPackage()" class="w-full text-white py-3 rounded-full font-bold transition-all" style="background-color: #00B9A8;" onmouseover="this.style.backgroundColor='#009688'" onmouseout="this.style.backgroundColor='#00B9A8'"> ุงุฎุชุฑ Essential Plus </button>
      </div>
     </div><!-- Interactive Pro Package -->
     <div class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover border-4" style="border-color: #EC2B84;">
      <div class="text-white p-6 text-center" style="background: linear-gradient(135deg, #EC2B84 0%, #41296D 100%);">
       <div class="text-4xl mb-2">
        ๐
       </div>
       <h3 class="text-2xl font-bold">Interactive Pro</h3>
       <p class="opacity-90">ูุดู ุชูุงุนูู + ุญููู ูุชูุฏูุฉ</p><span class="badge bg-yellow-400 text-yellow-900 mt-2">ุงูุฃูุซุฑ ุทูุจุงู</span>
      </div>
      <div class="p-6">
       <div class="text-center mb-6">
        <div class="text-4xl font-black mb-2" style="color: #41296D;">
         120-200 OMR
        </div>
        <div class="text-sm text-gray-400 mt-1">
         ููู ูุงุญุฏ (ุญุณุจ ุงูุฅุถุงูุงุช)
        </div>
       </div>
       <ul class="space-y-3 mb-6">
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #EC2B84;">โ</span> <span>ุดุงุดุฉ ูุงุญุฏุฉ (ุญุณุจ ุงุฎุชูุงุฑู)</span></li>
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #EC2B84;">โ</span> <span>ูุนุจุฉ ุชูุงุนููุฉ ุฌุงูุฒุฉ APK</span></li>
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #EC2B84;">โ</span> <span>ุตูุญุฉ ุฌูุน ุงูุจูุงูุงุช ุงููุชูุฏูุฉ</span></li>
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #EC2B84;">โ</span> <span>ุชูุฑูุฑ ุงูุจูุงูุงุช ุงูุชูุตููู</span></li>
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #EC2B84;">โ</span> <span>ุจุฑุงูุฏูุบ ูุงูู ูููุดู</span></li>
       </ul>
       <div class="bg-pink-50 border border-pink-200 rounded-lg p-3 mb-4">
        <div class="text-xs text-pink-800 font-semibold mb-1">
         ๐ก ุงูุฅุถุงูุงุช ุงููุดูููุฉ
        </div>
        <div class="text-xs text-pink-700">
         โข ูุนุจุฉ ุฌุงูุฒุฉ: 120-180 OMR<br>
          โข ุตูุญุฉ ูุชูุฏูุฉ: 50-90 OMR<br>
          โข ุจุฑุงูุฏูุบ ูุงูู: 25-35 OMR<br>
          โข ุฎุตู ุงูุจุงูุฉ: 15%
        </div>
       </div><button onclick="selectInteractiveProPackage()" class="w-full text-white py-3 rounded-full font-bold transition-all" style="background-color: #EC2B84;" onmouseover="this.style.backgroundColor='#D91A72'" onmouseout="this.style.backgroundColor='#EC2B84'"> ุงุฎุชุฑ Interactive Pro </button>
      </div>
     </div><!-- Premium Complete Package -->
     <div class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover">
      <div class="text-white p-6 text-center" style="background: linear-gradient(135deg, #41296D 0%, #EC2B84 100%);">
       <div class="text-4xl mb-2">
        ๐ฏ
       </div>
       <h3 class="text-2xl font-bold">Premium Complete</h3>
       <p class="opacity-90">ุงูุญู ุงูุดุงูู + ุชุตููุฑ ุงุญุชุฑุงูู</p>
      </div>
      <div class="p-6">
       <div class="text-center mb-6">
        <div class="text-4xl font-black mb-2" style="color: #41296D;">
         180-280 OMR
        </div>
        <div class="text-sm text-gray-400 mt-1">
         ููู ูุงุญุฏ (ุญุณุจ ุงูุฅุถุงูุงุช)
        </div>
        <div class="text-xs text-purple-600 font-semibold mt-1">
         ููุฑ ุญุชู 50 OMR ูุน ุฎุตู ุงูุจุงูุฉ ุงูุดุงููุฉ!
        </div>
       </div>
       <ul class="space-y-3 mb-6">
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #41296D;">โ</span> <span>ุดุงุดุชุงู (ุญุณุจ ุงุฎุชูุงุฑู)</span></li>
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #41296D;">โ</span> <span>ูุนุจุฉ ูุฎุตุตุฉ ุญุณุจ ุงูุทูุจ</span></li>
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #41296D;">โ</span> <span>ุชุตููุฑ ุงุญุชุฑุงูู + ููุฎุต ููุฏูู</span></li>
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #41296D;">โ</span> <span>ุตูุฑ ูุฎุตุตุฉ ููุดุงุดุงุช</span></li>
        <li class="flex items-start gap-2"><span class="mt-1" style="color: #41296D;">โ</span> <span>ุฏุนู ููู ูุฎุตุต ุจุงูุณุงุนุฉ</span></li>
       </ul>
       <div class="bg-purple-50 border border-purple-200 rounded-lg p-3 mb-4">
        <div class="text-xs text-purple-800 font-semibold mb-1">
         ๐ ุงูุฅุถุงูุงุช ุงููุดูููุฉ
        </div>
        <div class="text-xs text-purple-700">
         โข ูุนุจุฉ ูุฎุตุตุฉ: 350+ OMR<br>
          โข ุชุตููุฑ ุงุญุชุฑุงูู: 65-120 OMR<br>
          โข ุตูุฑ ูุฎุตุตุฉ: 25-80 OMR<br>
          โข ุฎุตู ุงูุจุงูุฉ ุงูุดุงููุฉ: 20%
        </div>
       </div><button onclick="selectPremiumCompletePackage()" class="w-full text-white py-3 rounded-full font-bold transition-all" style="background-color: #41296D;" onmouseover="this.style.backgroundColor='#2F1B4F'" onmouseout="this.style.backgroundColor='#41296D'"> ุงุฎุชุฑ Premium Complete </button>
      </div>
     </div>
    </div>
   </div>
  </section><!-- Add-ons Section -->
  <section id="addons" class="section-padding bg-white">
   <div class="max-w-6xl mx-auto">
    <div class="text-center mb-16">
     <h2 class="text-4xl md:text-5xl font-black mb-4">ุงูุฅุถุงูุงุช ๐</h2>
     <p class="text-xl text-gray-600">ุนุฒุฒ ุชุฌุฑุจุชู ุจุฎุฏูุงุช ุฅุถุงููุฉ</p>
    </div>
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
     <div class="bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-2xl">
      <div class="text-3xl mb-3">
       ๐ฌ
      </div>
      <h3 class="text-xl font-bold mb-2">ููุฏูู ููุดู ุฌุงูุฒ</h3>
      <p class="text-gray-600 text-sm mb-3">ุชุฎุตูุต ุดุนุงุฑ ููุต</p>
      <div class="text-2xl font-bold text-orange-600">
       30-100 OMR
      </div>
     </div>
     <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-2xl">
      <div class="text-3xl mb-3">
       ๐ป
      </div>
      <h3 class="text-xl font-bold mb-2">ุตูุญุฉ ุชูุงุนููุฉ HTML</h3>
      <p class="text-gray-600 text-sm mb-3">ุชุณุฌูู/ุงุณุชุจูุงู/ุนุฑุถ</p>
      <div class="text-2xl font-bold text-blue-600">
       30-120 OMR
      </div>
     </div>
     <div class="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-2xl">
      <div class="text-3xl mb-3">
       ๐ฎ
      </div>
      <h3 class="text-xl font-bold mb-2">ูุนุจุฉ ุฌุงูุฒุฉ APK</h3>
      <p class="text-gray-600 text-sm mb-3">ูุนุจุฉ ููุงุท/ุณูุงุฑุฉ</p>
      <div class="text-2xl font-bold text-green-600">
       120-250 OMR
      </div>
     </div>
     <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-2xl">
      <div class="text-3xl mb-3">
       ๐ฏ
      </div>
      <h3 class="text-xl font-bold mb-2">ูุนุจุฉ ูุฎุตุตุฉ</h3>
      <p class="text-gray-600 text-sm mb-3">ุจุฑูุฌุฉ ุญุณุจ ุงูููุฑุฉ</p>
      <div class="text-2xl font-bold text-purple-600">
       ูู 350 OMR
      </div>
     </div>
     <div class="bg-gradient-to-br from-pink-50 to-pink-100 p-6 rounded-2xl">
      <div class="text-3xl mb-3">
       ๐จ
      </div>
      <h3 class="text-xl font-bold mb-2">ุจุฑุงูุฏูุบ ุงูุฃุฌูุฒุฉ</h3>
      <p class="text-gray-600 text-sm mb-3">ูููุฉ ุนูู ุงููููู</p>
      <div class="text-2xl font-bold text-pink-600">
       15-35 OMR
      </div>
     </div>
     <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-2xl">
      <div class="text-3xl mb-3">
       ๐ธ
      </div>
      <h3 class="text-xl font-bold mb-2">ุชุตููุฑ ุงุญุชุฑุงูู</h3>
      <p class="text-gray-600 text-sm mb-3">ููุชู/ููุฏูู + ููุฎุต</p>
      <div class="text-2xl font-bold text-yellow-600">
       65-120 OMR
      </div>
     </div>
     <div class="bg-gradient-to-br from-indigo-50 to-indigo-100 p-6 rounded-2xl">
      <div class="text-3xl mb-3">
       ๐ผ๏ธ
      </div>
      <h3 class="text-xl font-bold mb-2">ุตูุฑ ูุฎุตุตุฉ ููุดุงุดุงุช</h3>
      <p class="text-gray-600 text-sm mb-3">ุชุตููู/ุชุญุฑูุฑ ุญุณุจ ุงูููุงุณ</p>
      <div class="text-2xl font-bold text-indigo-600">
       25-80 OMR
      </div>
     </div>
    </div>
   </div>
  </section><!-- Booking Form Section -->
  <section id="booking" class="section-padding bg-gradient-to-br from-purple-50 to-blue-50">
   <div class="max-w-7xl mx-auto">
    <div class="text-center mb-12">
     <h2 class="text-4xl md:text-5xl font-black mb-4">ุงุญุฌุฒ ุงูุขู ๐</h2>
     <p class="text-xl text-gray-600">ุงุฎุชุฑ ุฃุฌูุฒุชูุ ุญุฏูุฏ ุงูุชุงุฑูุฎ ูุงูููุช ูุงููููุนุ ูุณูุคูุฏ ูู ุงูุชููุฑ ุฎูุงู ุณุงุนุงุช ุงูุนูู</p><!-- ุฒุฑ ุนุฑุถ ุณุฌู ุงูุญุฌูุฒุงุช -->
     <div class="mt-6"><button onclick="toggleBookingHistory()" id="history-toggle-btn" class="bg-white text-purple-600 px-6 py-3 rounded-full font-bold hover:bg-gray-50 transition-all shadow-lg"> ุนุฑุถ ุณุฌู ุงูุญุฌูุฒุงุช ุงูุณุงุจูุฉ ๐ (<span id="bookings-count">0</span>) </button>
     </div><!-- ุณุฌู ุงูุญุฌูุฒุงุช -->
     <div id="booking-history" class="hidden mt-8 bg-white rounded-3xl shadow-2xl p-6">
      <div class="flex justify-between items-center mb-6">
       <h3 class="text-2xl font-bold text-purple-900">ุณุฌู ุงูุญุฌูุฒุงุช ุงูุณุงุจูุฉ ๐</h3><button onclick="toggleBookingHistory()" class="text-gray-500 hover:text-gray-700 text-2xl">โ</button>
      </div>
      <div id="bookings-list" class="space-y-4 max-h-96 overflow-y-auto"><!-- ุณูุชู ููุก ุงูุญุฌูุฒุงุช ููุง -->
      </div>
     </div>
    </div>
    <div class="grid lg:grid-cols-3 gap-8"><!-- Main Form -->
     <div class="lg:col-span-2">
      <div class="bg-white rounded-3xl shadow-2xl p-8">
       <form id="booking-form" class="space-y-8"><!-- ุฃ. ุชูุงุตูู ุงููุนุงููุฉ -->
        <div class="border-b pb-6">
         <h3 class="text-2xl font-bold mb-6 text-purple-900">ุฃ. ุชูุงุตูู ุงููุนุงููุฉ</h3>
         <div class="mb-6"><label class="block text-sm font-bold mb-2" for="event-type">ููุน ุงููุนุงููุฉ *</label> <select id="event-type" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-all"> <option value="">ุงุฎุชุฑ ููุน ุงููุนุงููุฉ</option> <option value="ูุนุฑุถ">ูุนุฑุถ</option> <option value="ูุคุชูุฑ">ูุคุชูุฑ</option> <option value="ุชุฏุดูู">ุชุฏุดูู</option> <option value="ูุชุฌุฑ">ูุชุฌุฑ</option> <option value="ุฎุงุต">ุฎุงุต</option> </select>
         </div>
         <div class="mb-6"><label class="block text-sm font-bold mb-2" for="event-location">ุงููุฏููุฉ/ุงููููุน *</label> <input type="text" id="event-location" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-all" placeholder="ูุณูุทุ ุนููุงู">
         </div>
         <div class="mb-6"><label class="block text-sm font-bold mb-2">ุฏุงุฎู ูุณูุทุ *</label>
          <div class="flex gap-4"><label class="flex items-center"> <input type="radio" name="inside-muscat" value="yes" id="inside-muscat-yes" class="ml-2" onchange="toggleDistanceField()"> <span>ูุนู</span> </label> <label class="flex items-center"> <input type="radio" name="inside-muscat" value="no" id="inside-muscat-no" class="ml-2" onchange="toggleDistanceField()"> <span>ูุง</span> </label>
          </div>
         </div>
         <div id="distance-field" class="mb-6 hidden"><label class="block text-sm font-bold mb-2" for="distance-km">ุงููุณุงูุฉ ุงูุชูุฏูุฑูุฉ ูู ูุณูุท (ูู)</label> <input type="number" id="distance-km" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-all" placeholder="ูุซุงู: 150">
          <p class="text-sm text-gray-500 mt-1">ุณูุชู ุฅุถุงูุฉ 0.25-0.35 OMR/ูู + ุจุฏู ุณูู ูููุฑูู ุฅู ูุฒู</p>
         </div>
         <div class="mb-6"><label class="block text-sm font-bold mb-2">ุชูููุฑ ุงูููุฑุจุงุก *</label>
          <div class="flex gap-4 pt-3"><label class="flex items-center"> <input type="radio" name="electricity" value="yes" id="electricity-yes" class="ml-2" onchange="toggleBatteryRecommendation()"> <span>ูุนู</span> </label> <label class="flex items-center"> <input type="radio" name="electricity" value="no" id="electricity-no" class="ml-2" onchange="toggleBatteryRecommendation()"> <span>ูุง</span> </label>
          </div>
         </div>
         <div id="battery-recommendation" class="bg-yellow-50 border border-yellow-200 rounded-xl p-4 hidden">
          <div class="flex items-start gap-3"><span class="text-2xl">๐ก</span>
           <div>
            <h4 class="font-bold text-yellow-800">ุชูุตูุฉ ุฐููุฉ</h4>
            <p class="text-yellow-700">ุจูุง ุฃู ุงูููุฑุจุงุก ุบูุฑ ูุชููุฑุฉุ ููุตุญ ุจุฌูุงุฒ HTek 32 NFC (ุจุทุงุฑูุฉ) ุงูุฐู ูุนูู ููุฏุฉ 8 ุณุงุนุงุช ูุชูุงุตูุฉ</p>
           </div>
          </div>
         </div>
        </div><!-- ุจ. ุงูุฃุฌูุฒุฉ ุงููุฎุชุงุฑุฉ -->
        <div class="border-b pb-6">
         <h3 class="text-2xl font-bold mb-6 text-purple-900">ุจ. ุงูุฃุฌูุฒุฉ ุงููุฎุชุงุฑุฉ</h3>
         <div class="space-y-4" id="device-selection">
          <div class="border border-gray-200 rounded-xl p-4">
           <div class="flex justify-between items-center mb-3"><label class="flex items-center"> <input type="checkbox" class="device-checkbox ml-3" data-device="ูููุฉ ุชู โ ุดุงุดุฉ ุงููููุฉ ุงูุฐููุฉ" data-price="45" data-base-price="350" onchange="handleDeviceCheckboxChange(this)"> <span class="font-bold">ูููุฉ ุชู โ ุดุงุดุฉ ุงููููุฉ ุงูุฐููุฉ</span> </label> <span class="text-purple-600 font-bold">45 OMR/ููู</span>
           </div>
           <div class="flex items-center gap-4"><label class="text-sm">ุงููููุฉ:</label> <input type="number" class="device-quantity w-20 px-2 py-1 border border-gray-300 rounded" min="0" max="10" value="0" data-device="ูููุฉ ุชู โ ุดุงุดุฉ ุงููููุฉ ุงูุฐููุฉ" onchange="handleQuantityChange(this)"> <label class="text-sm">ุนุฏุฏ ุงูุฃูุงู:</label> <input type="number" class="device-days w-20 px-2 py-1 border border-gray-300 rounded" min="1" max="30" value="1" data-device="ูููุฉ ุชู โ ุดุงุดุฉ ุงููููุฉ ุงูุฐููุฉ" onchange="handleDaysChange(this)">
           </div>
          </div>
          <div class="border border-gray-200 rounded-xl p-4">
           <div class="flex justify-between items-center mb-3"><label class="flex items-center"> <input type="checkbox" class="device-checkbox ml-3" data-device="ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ" data-price="45" data-base-price="400" onchange="handleDeviceCheckboxChange(this)"> <span class="font-bold">ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ (ุจุทุงุฑูุฉ)</span> </label> <span class="text-purple-600 font-bold">45 OMR/ููู</span>
           </div>
           <div class="flex items-center gap-4"><label class="text-sm">ุงููููุฉ:</label> <input type="number" class="device-quantity w-20 px-2 py-1 border border-gray-300 rounded" min="0" max="10" value="0" data-device="ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ" onchange="handleQuantityChange(this)"> <label class="text-sm">ุนุฏุฏ ุงูุฃูุงู:</label> <input type="number" class="device-days w-20 px-2 py-1 border border-gray-300 rounded" min="1" max="30" value="1" data-device="ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ" onchange="handleDaysChange(this)">
           </div>
          </div>
          <div class="border border-gray-200 rounded-xl p-4">
           <div class="flex justify-between items-center mb-3"><label class="flex items-center"> <input type="checkbox" class="device-checkbox ml-3" data-device="ููุณุฉ ุชู โ ุงููุดู ุงูุชูุงุนูู ุจุงูููุณ" data-price="50" data-base-price="400" onchange="handleDeviceCheckboxChange(this)"> <span class="font-bold">ููุณุฉ ุชู โ ุงููุดู ุงูุชูุงุนูู ุจุงูููุณ</span> </label> <span class="text-purple-600 font-bold">50 OMR/ููู</span>
           </div>
           <div class="flex items-center gap-4"><label class="text-sm">ุงููููุฉ:</label> <input type="number" class="device-quantity w-20 px-2 py-1 border border-gray-300 rounded" min="0" max="10" value="0" data-device="ููุณุฉ ุชู โ ุงููุดู ุงูุชูุงุนูู ุจุงูููุณ" onchange="handleQuantityChange(this)"> <label class="text-sm">ุนุฏุฏ ุงูุฃูุงู:</label> <input type="number" class="device-days w-20 px-2 py-1 border border-gray-300 rounded" min="1" max="30" value="1" data-device="ููุณุฉ ุชู โ ุงููุดู ุงูุชูุงุนูู ุจุงูููุณ" onchange="handleDaysChange(this)">
           </div>
          </div>
         </div>
        </div><!-- ุฌ. ุงูุฅุถุงูุงุช -->
        <div class="border-b pb-6">
         <h3 class="text-2xl font-bold mb-6 text-purple-900">ุฌ. ุงูุฅุถุงูุงุช</h3>
         <div class="grid md:grid-cols-2 gap-4"><label class="flex items-center p-3 border border-gray-200 rounded-xl hover:bg-gray-50 cursor-pointer"> <input type="checkbox" class="addon-checkbox ml-3" data-addon="ุตูุญุฉ ุชูุงุนููุฉ HTML">
           <div class="flex-1"><span class="font-semibold">ุตูุญุฉ ุชูุงุนููุฉ HTML</span>
            <div class="text-sm text-blue-600 font-semibold">
             ุณุนุฑ ุญุณุจ ุงูุทูุจ
            </div>
           </div></label> <label class="flex items-center p-3 border border-gray-200 rounded-xl hover:bg-gray-50 cursor-pointer"> <input type="checkbox" class="addon-checkbox ml-3" data-addon="ููุฏูู ููุดู">
           <div class="flex-1"><span class="font-semibold">ููุฏูู ููุดู</span>
            <div class="text-sm text-blue-600 font-semibold">
             ุณุนุฑ ุญุณุจ ุงูุทูุจ
            </div>
           </div></label> <label class="flex items-center p-3 border border-gray-200 rounded-xl hover:bg-gray-50 cursor-pointer"> <input type="checkbox" class="addon-checkbox ml-3" data-addon="ูุนุจุฉ ุฌุงูุฒุฉ">
           <div class="flex-1"><span class="font-semibold">ูุนุจุฉ ุฌุงูุฒุฉ APK</span>
            <div class="text-sm text-blue-600 font-semibold">
             ุณุนุฑ ุญุณุจ ุงูุทูุจ
            </div>
           </div></label> <label class="flex items-center p-3 border border-gray-200 rounded-xl hover:bg-gray-50 cursor-pointer"> <input type="checkbox" class="addon-checkbox ml-3" data-addon="ุจุฑุงูุฏูุบ ุงูุฃุฌูุฒุฉ">
           <div class="flex-1"><span class="font-semibold">ุจุฑุงูุฏูุบ ุงูุฃุฌูุฒุฉ</span>
            <div class="text-sm text-blue-600 font-semibold">
             ุณุนุฑ ุญุณุจ ุงูุทูุจ
            </div>
           </div></label> <label class="flex items-center p-3 border border-gray-200 rounded-xl hover:bg-gray-50 cursor-pointer"> <input type="checkbox" class="addon-checkbox ml-3" data-addon="ุชุตููุฑ ุงุญุชุฑุงูู">
           <div class="flex-1"><span class="font-semibold">ุชุตููุฑ ุงุญุชุฑุงูู</span>
            <div class="text-sm text-blue-600 font-semibold">
             ุณุนุฑ ุญุณุจ ุงูุทูุจ
            </div>
           </div></label> <label class="flex items-center p-3 border border-gray-200 rounded-xl hover:bg-gray-50 cursor-pointer"> <input type="checkbox" class="addon-checkbox ml-3" data-addon="ุฏุนู ููู ุจุงูุณุงุนุฉ">
           <div class="flex-1"><span class="font-semibold">ุฏุนู ููู ุจุงูุณุงุนุฉ</span>
            <div class="text-sm text-blue-600 font-semibold">
             ุณุนุฑ ุญุณุจ ุงูุทูุจ
            </div>
           </div></label> <label class="flex items-center p-3 border border-gray-200 rounded-xl hover:bg-gray-50 cursor-pointer"> <input type="checkbox" class="addon-checkbox ml-3" data-addon="ุตูุฑ ูุฎุตุตุฉ ููุดุงุดุงุช">
           <div class="flex-1"><span class="font-semibold">ุตูุฑ ูุฎุตุตุฉ ููุดุงุดุงุช</span>
            <div class="text-sm text-blue-600 font-semibold">
             ุณุนุฑ ุญุณุจ ุงูุทูุจ
            </div>
           </div></label>
         </div>
        </div><!-- ุฏ. ุงูุจูุงูุงุช -->
        <div>
         <h3 class="text-2xl font-bold mb-6 text-purple-900">ุฏ. ุงูุจูุงูุงุช</h3>
         <div class="grid md:grid-cols-2 gap-6 mb-6">
          <div><label class="block text-sm font-bold mb-2" for="customer-name">ุงูุงุณู ุงูุซูุงุซู / ุงูุฌูุฉ *</label> <input type="text" id="customer-name" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-all">
          </div>
          <div><label class="block text-sm font-bold mb-2" for="customer-phone">ุฑูู ุงูุฌูุงู *</label> <input type="tel" id="customer-phone" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-all" placeholder="+968">
          </div>
         </div>
         <div class="mb-6"><label class="block text-sm font-bold mb-2" for="customer-email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุงุฎุชูุงุฑู)</label> <input type="email" id="customer-email" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-all" placeholder="ููุญุตูู ุนูู ูุณุฎุฉ ูู ุงูุทูุจ">
         </div>
         <div><label class="block text-sm font-bold mb-2" for="notes">ููุงุญุธุงุช ุฅุถุงููุฉ</label> <textarea id="notes" rows="4" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-all" placeholder="ุฃู ุชูุงุตูู ุฅุถุงููุฉ ุนู ุงููุนุงููุฉ..."></textarea>
         </div>
        </div>
       </form>
      </div>
     </div><!-- Sidebar Summary -->
     <div class="lg:col-span-1">
      <div class="bg-white rounded-3xl shadow-2xl p-6 sticky top-24">
       <h3 class="text-2xl font-bold mb-6 text-purple-900">ููุฎูุต ููุฑู ๐</h3>
       <div id="booking-summary" class="space-y-4 mb-6">
        <div class="text-center text-gray-400 py-8">
         <div class="text-4xl mb-2">
          ๐ฑ
         </div>
         <p>ุงุฎุชุฑ ุงูุฃุฌูุฒุฉ ูุฑุคูุฉ ุงูููุฎุต</p>
        </div>
       </div>
	   
       <!-- ููุฏ ุงูุฎุตู (ุงูุฅุถุงูุฉ ุงูุฌุฏูุฏุฉ) -->
       <div class="border-t pt-4 mb-4">
        <label for="discount-code" class="block text-sm font-bold mb-2 text-gray-700">ูู ูุฏูู ููุฏ ุฎุตูุ</label>
        <div class="flex gap-2">
         <input type="text" id="discount-code" class="w-full px-3 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-all" placeholder="ุงุฏุฎู ููุฏ ุงูุฎุตู">
         <button type="button" onclick="applyDiscount()" class="bg-purple-600 text-white px-4 rounded-xl font-bold hover:bg-purple-700 transition-all text-sm whitespace-nowrap">
          ุชุทุจูู
         </button>
        </div>
        <div id="discount-message" class="text-xs mt-2 font-semibold"></div>
       </div>
       <!-- /ููุฏ ุงูุฎุตู -->

       <div class="border-t pt-4 space-y-3">
        <!-- ุตู ุงูุฎุตู (ุงูุฅุถุงูุฉ ุงูุฌุฏูุฏุฉ) -->
        <div id="discount-row" class="hidden flex justify-between text-lg font-bold text-green-600">
         <span>ุฎุตู (EVENTPLUS20):</span>
         <span id="discount-amount">-0 OMR</span>
        </div>
        <!-- /ุตู ุงูุฎุตู -->
        <div class="flex justify-between text-lg font-bold"><span>ุงูุฅุฌูุงูู ุงููุณุชุญู:</span> <span class="text-purple-600" id="sidebar-total">0 OMR</span>
        </div>
        <p class="text-xs text-gray-500 mt-2">โ ุฑุณูู ุงูุชูุตูู ุญุณุจ ุนุฏุฏ ุงูุดุงุดุงุช โข ุงูุฃุณุนุงุฑ ูุงุจูุฉ ููุชูุงูุถ</p>
       </div>
	   
	   <!-- ูุณู ูุทุงูุจุฉ ุงูุฎุตููุงุช ุงูุฎุงุตุฉ -->
       <div class="bg-gradient-to-r from-green-50 to-blue-50 border-2 border-dashed border-green-300 rounded-2xl p-4 mb-6">
        <div class="text-center mb-3">
         <div class="text-2xl mb-2">
          ๐๐
         </div>
         <h4 class="font-bold text-green-800 mb-2">ูุทุงูุจุฉ ุจุฎุตู ุฎุงุต</h4>
         <p class="text-xs text-green-700">ููุทูุงุจ ูุงูุฌูุงุช ุงูุฎูุฑูุฉ ูุงููุคุณุณุงุช ุบูุฑ ุงูุฑุจุญูุฉ</p>
        </div>
        <div class="space-y-2 mb-4"><label class="flex items-center p-2 bg-white rounded-lg cursor-pointer hover:bg-gray-50"> <input type="checkbox" id="student-discount" class="ml-2" onchange="handleSpecialDiscountRequest()">
          <div class="flex-1"><span class="font-semibold text-sm">๐ ุทุงูุจ ุฌุงูุนู</span>
           <div class="text-xs text-blue-600">
            ูุทุงูุจุฉ ุจุฎุตู ุฎุงุต ููุทูุงุจ
           </div>
          </div></label> <label class="flex items-center p-2 bg-white rounded-lg cursor-pointer hover:bg-gray-50"> <input type="checkbox" id="charity-discount" class="ml-2" onchange="handleSpecialDiscountRequest()">
          <div class="flex-1"><span class="font-semibold text-sm">๐ ุฌูุฉ ุฎูุฑูุฉ/ุบูุฑ ุฑุจุญูุฉ</span>
           <div class="text-xs text-green-600">
            ูุทุงูุจุฉ ุจุฎุตู ุฎุงุต ููุฌูุงุช ุงูุฎูุฑูุฉ
           </div>
          </div></label>
        </div>
        <div id="special-discount-request" class="hidden bg-white border border-orange-200 rounded-lg p-3">
         <div class="text-sm font-bold text-orange-800 mb-3">
          ๐ ุณุจุจ ูุทุงูุจุชู ุจุงูุฎุตู:
         </div><textarea id="discount-reason" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-orange-500 focus:outline-none" placeholder="ูุซุงู: ุทุงูุจ ูู ุฌุงูุนุฉ ุงูุณูุทุงู ูุงุจูุณุ ูููุฉ ุงูููุฏุณุฉุ ุฃุญุชุงุฌ ุงูุฃุฌูุฒุฉ ููุดุฑูุน ุงูุชุฎุฑุฌ..."></textarea>
         <div class="text-xs text-orange-700 mt-2 font-semibold">
          ๐ก ุณูุชู ุชูุฌูู ูุทุงูุจุชู ุฅูู ูุฑูููุง ูุฏุฑุงุณุชูุง ูุณูุนูุฏ ุฅููู ุจุงูุฑุฏ
         </div>
        </div>
       </div>
       <div class="mt-6 space-y-3">
        <div class="text-center mb-4">
         <h4 class="font-bold text-purple-900 mb-2">ุงุฎุชุฑ ุทุฑููุฉ ุงูุฅุฑุณุงู:</h4>
         <p class="text-sm text-gray-600">ููููู ุฅุฑุณุงู ุทูุจู ุจุฅุญุฏู ุงูุทุฑููุชูู</p>
        </div><button type="button" id="email-submit-btn" class="w-full text-white py-3 rounded-full font-bold transition-all shadow-lg flex items-center justify-center gap-2" style="background: linear-gradient(135deg, #EC2B84 0%, #41296D 100%);"> <span>ุฅุฑุณุงู ุนุจุฑ ุงูุฅูููู (ุฎุงุต)</span> <span>๐ง</span> </button> <button type="button" id="whatsapp-submit-btn" class="w-full bg-green-500 text-white py-3 rounded-full font-bold hover:bg-green-600 transition-all flex items-center justify-center gap-2"> <span>ุฅุฑุณุงู ุนุจุฑ ุงููุงุชุณุงุจ</span> <span>๐ฌ</span> </button>
        <p class="text-xs text-gray-500 text-center mt-3">๐ ุงูุฅูููู: ุฎุตูุตูุฉ ูุงููุฉ | ๐ฌ ุงููุงุชุณุงุจ: ุชูุงุตู ูุจุงุดุฑ</p>
       </div>
      </div>
     </div>
    </div>
   </div>
  </section><!-- FAQ Section -->
  <section id="faq" class="section-padding bg-white">
   <div class="max-w-4xl mx-auto">
    <div class="text-center mb-16">
     <h2 class="text-4xl md:text-5xl font-black mb-4">ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ โ</h2>
    </div>
    <div class="space-y-4">
     <details class="bg-gray-50 rounded-2xl p-6 cursor-pointer"><summary class="font-bold text-lg">ูู ููุฌุฏ ุฎุตููุงุช ุนูู ุงูุทูุจุงุชุ</summary>
      <p class="mt-4 text-gray-600">ูุนู! ูุทุจู ุฎุตููุงุช ุฐููุฉ ุชููุงุฆูุฉ: ุฎุตู ุงูุฃุฌูุฒุฉ ุงููุชุนุฏุฏุฉุ ุฎุตู ุงูุฅุถุงูุงุชุ ุฎุตู ุงูุฃูุงู ุงููุชุนุฏุฏุฉุ ูุนุฑูุถ ุฎุงุตุฉ ุญุณุจ ุงุฎุชูุงุฑุงุชู.</p>
     </details>
     <details class="bg-gray-50 rounded-2xl p-6 cursor-pointer"><summary class="font-bold text-lg">ูู ุงูุชูุตูู ูุงูุชุฑููุจ ูุดูููุงูุ</summary>
      <p class="mt-4 text-gray-600">ุฏุงุฎู ูุณูุท โค30 ูู ูุนู. ุฎุงุฑุฌูุง ุชูุญุณุจ 0.25โ0.35 OMR/ูู + ุจุฏู ุณูู ูููุฑูู ุฅู ูุฒู.</p>
     </details>
     <details class="bg-gray-50 rounded-2xl p-6 cursor-pointer"><summary class="font-bold text-lg">ูุง ุตูุบ ุงููุญุชูู ุงูููุงุณุจุฉ ููุดุงุดุงุชุ</summary>
      <p class="mt-4 text-gray-600">MP4 (ุญุณุจ ุงุชุฌุงู ุงูุฌูุงุฒ) ุฃู HTML/ุตูุฑ. ูุณุงุนุฏ ูู ูุทุงุจูุฉ ุงูููุงุณุงุช.</p>
     </details>
     <details class="bg-gray-50 rounded-2xl p-6 cursor-pointer"><summary class="font-bold text-lg">ูู ูููู ุงูุญุตูู ุนูู ุชูุฑูุฑ ุจูุงูุงุชุ</summary>
      <p class="mt-4 text-gray-600">ุนูุฏ ุงุณุชุฎุฏุงู ุงูููุงุฐุฌ/ุงูููุณ/QR ููููุฑ ููููุง ูุฎุชุตุฑูุง ุจุงููุคุดุฑุงุช.</p>
     </details>
     <details class="bg-gray-50 rounded-2xl p-6 cursor-pointer"><summary class="font-bold text-lg">ูุง ุณูุงุณุฉ ุงูุฏูุน ูุงูุฅูุบุงุกุ</summary>
      <p class="mt-4 text-gray-600">50% ุนูุฏ ุงูุญุฌุฒ ู50% ูุจู ุงููุนุงููุฉ. ุงูุฅูุบุงุก: โฅ7 ุฃูุงู (10%)ุ 3โ6 ุฃูุงู (30%)ุ &lt;72 ุณุงุนุฉ (50%)ุ &lt;24 ุณุงุนุฉ (80โ100%).</p>
     </details>
     <details class="bg-gray-50 rounded-2xl p-6 cursor-pointer"><summary class="font-bold text-lg">ูุงุฐุง ูู ุญุฏุซ ุนุทูุ</summary>
      <p class="mt-4 text-gray-600">ุจุฏูู ููุฑู ุฅู ุฃููู ุฃู ุชุนููุถ ูุณุจู ุญุณุจ ุณูุงุณุฉ ุงูุถูุงู.</p>
     </details>
     <details class="bg-gray-50 rounded-2xl p-6 cursor-pointer"><summary class="font-bold text-lg">ูู ูููู ุชูุฏูุฏ ุณุงุนุงุช 360ุ</summary>
      <p class="mt-4 text-gray-600">ูุนู ุจุฅุถุงูุฉ ุณุงุนุงุช ุถูู ุงูุฏุนู ุจุงูุณุงุนุฉ.</p>
     </details>
    </div>
   </div>
  </section><!-- Floating Chat Button -->
  <div id="floating-chat-btn" class="fixed bottom-6 left-6 z-50"><button onclick="toggleFloatingChat()" class="w-16 h-16 bg-gradient-to-br from-purple-600 to-blue-600 text-white rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 flex items-center justify-center text-2xl animate-pulse"> ๐ค </button>
   <div class="absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center"><span class="w-3 h-3 bg-white rounded-full animate-ping"></span>
   </div>
  </div><!-- Floating Chat Window -->
  <div id="floating-chat-window" class="fixed bottom-24 left-6 w-96 max-w-[calc(100vw-3rem)] bg-white rounded-3xl shadow-2xl z-50 hidden">
   <div class="flex items-center gap-3 p-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-t-3xl">
    <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-lg">
     ๐ค
    </div>
    <div class="flex-1">
     <h3 class="font-bold">ุนุงุฑู - ุงููุณุงุนุฏ ุงูุฐูู</h3>
     <p class="text-xs opacity-90">ูุชุฎุตุต ูู ุญููู ุงูุนุฑุถ</p>
    </div><button onclick="toggleFloatingChat()" class="text-white/80 hover:text-white text-xl">โ</button>
   </div>
   <div class="p-4"><!-- Chat Messages -->
    <div id="floating-chat-messages" class="space-y-3 mb-4 max-h-64 overflow-y-auto">
     <div class="flex gap-2">
      <div class="w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs">
       ๐ค
      </div>
      <div class="bg-purple-50 rounded-2xl rounded-tl-sm p-3 max-w-xs">
       <p class="text-sm">ูุฑุญุจุงู! ุฃูุง ุนุงุฑู ๐ ููู ูููููู ูุณุงุนุฏุชู ุงููููุ</p>
      </div>
     </div>
    </div><!-- Quick Questions -->
    <div class="mb-3">
     <div class="flex flex-wrap gap-1 mb-3"><button onclick="askFloatingQuestion('ูุง ูู ุงูุจุฑุงูุฏูุบุ')" class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs hover:bg-blue-200 transition-all"> ุงูุจุฑุงูุฏูุบุ </button> <button onclick="askFloatingQuestion('ุฃุญุชุงุฌ ุดุงุดุฉ ููุนุฑุถ')" class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs hover:bg-green-200 transition-all"> ุดุงุดุฉ ูุนุฑุถ </button> <button onclick="askFloatingQuestion('ูู ุชูููุฉ ุงูุชุตููุฑุ')" class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs hover:bg-orange-200 transition-all"> ุชูููุฉ ุงูุชุตููุฑุ </button>
     </div>
    </div><!-- Chat Input -->
    <div class="flex gap-2"><input type="text" id="floating-chat-input" placeholder="ุงูุชุจ ุณุคุงูู..." class="flex-1 px-3 py-2 border border-gray-200 rounded-xl text-sm focus:border-purple-500 focus:outline-none" onkeypress="handleFloatingChatKeyPress(event)"> <button onclick="sendFloatingChatMessage()" class="bg-purple-600 text-white px-4 py-2 rounded-xl text-sm font-bold hover:bg-purple-700 transition-all"> ุฅุฑุณุงู </button>
    </div>
   </div>
  </div><!-- Smart Assistant Section -->
  <section id="smart-assistant" class="section-padding bg-gradient-to-br from-indigo-50 to-purple-50">
   <div class="max-w-6xl mx-auto">
    <div class="text-center mb-12">
     <h2 class="text-4xl md:text-5xl font-black mb-4">ุงููุณุงุนุฏ ุงูุฐูู ุนุงุฑู ๐ค</h2>
     <p class="text-xl text-gray-600">ุงุณุฃู ุนุงุฑู ุฃู ุณุคุงู ูุณููุฏู ูู ุงูุชุฑุงุญุงุช ูุฎุตุตุฉ ููุนุงููุชู</p>
    </div>
    <div class="grid lg:grid-cols-3 gap-8"><!-- Smart Assistant Chat -->
     <div class="lg:col-span-2">
      <div class="bg-white rounded-3xl shadow-2xl p-6">
       <div class="flex items-center gap-3 mb-6 pb-4 border-b">
        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xl">
         ๐ค
        </div>
        <div>
         <h3 class="text-xl font-bold text-purple-900">ุนุงุฑู - ุงููุณุงุนุฏ ุงูุฐูู</h3>
         <p class="text-sm text-gray-500">ูุชุฎุตุต ูู ุญููู ุงูุนุฑุถ ูุงูุชูุงุนู</p>
        </div>
        <div class="mr-auto"><span class="inline-block w-3 h-3 bg-green-500 rounded-full animate-pulse"></span> <span class="text-xs text-green-600 font-semibold mr-1">ูุชุตู</span>
        </div>
       </div><!-- Chat Messages -->
       <div id="chat-messages" class="space-y-4 mb-6 max-h-96 overflow-y-auto">
        <div class="flex gap-3">
         <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm">
          ๐ค
         </div>
         <div class="bg-purple-50 rounded-2xl rounded-tl-sm p-4 max-w-md">
          <p class="text-sm">ูุฑุญุจุงู! ุฃูุง ุนุงุฑูุ ูุณุงุนุฏู ุงูุฐูู ูู EventPlus ๐</p>
          <p class="text-sm mt-2">ุฃุฎุจุฑูู ุนู ูุนุงููุชู ูุณุฃูุฏู ูู ุฃูุถู ุงูุงูุชุฑุงุญุงุช ุงููุฎุตุตุฉ!</p>
         </div>
        </div>
       </div><!-- Quick Questions -->
       <div class="mb-4">
        <p class="text-sm font-semibold text-gray-700 mb-3">ุฃุณุฆูุฉ ุณุฑูุนุฉ:</p>
        <div class="flex flex-wrap gap-2"><button onclick="askQuickQuestion('ูุง ูู ุงูุจุฑุงูุฏูุบุ')" class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs hover:bg-blue-200 transition-all"> ูุง ูู ุงูุจุฑุงูุฏูุบุ </button> <button onclick="askQuickQuestion('ุฃุญุชุงุฌ ุดุงุดุฉ ููุนุฑุถ')" class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs hover:bg-green-200 transition-all"> ุฃุญุชุงุฌ ุดุงุดุฉ ููุนุฑุถ </button> <button onclick="askQuickQuestion('ูุง ุงููุฑู ุจูู ุงูุฃุฌูุฒุฉุ')" class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs hover:bg-purple-200 transition-all"> ูุง ุงููุฑู ุจูู ุงูุฃุฌูุฒุฉุ </button> <button onclick="askQuickQuestion('ูู ุชูููุฉ ุงูุชุตููุฑุ')" class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-xs hover:bg-orange-200 transition-all"> ูู ุชูููุฉ ุงูุชุตููุฑุ </button>
        </div>
       </div><!-- Chat Input -->
       <div class="flex gap-3"><input type="text" id="chat-input" placeholder="ุงูุชุจ ุณุคุงูู ููุง..." class="flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-all" onkeypress="handleChatKeyPress(event)"> <button onclick="sendChatMessage()" class="bg-purple-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-purple-700 transition-all"> ุฅุฑุณุงู </button>
       </div>
      </div>
     </div><!-- Wasl AI Card -->
     <div class="lg:col-span-1">
      <div class="bg-white rounded-3xl shadow-2xl p-6 h-fit">
       <div class="text-center mb-6">
        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center text-white text-2xl mx-auto mb-4">
         ๐ง
        </div>
        <h3 class="text-xl font-bold text-gray-900 mb-2">ุจุทุงูุฉ Wasl AI ุงูุฐููุฉ</h3>
        <p class="text-sm text-gray-600">ุชุนุฑูู ุนูููุง ุฃูุซุฑ ูู ุฎูุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</p>
       </div>
       <div class="space-y-4 mb-6">
        <div class="flex items-center gap-3 p-3 bg-blue-50 rounded-xl"><span class="text-blue-600">๐ฏ</span>
         <div>
          <p class="font-semibold text-sm">ุชุญููู ุฐูู ููุงุญุชูุงุฌุงุช</p>
          <p class="text-xs text-gray-600">ูููู ูุชุทูุจุงุชู ุจุฏูุฉ</p>
         </div>
        </div>
        <div class="flex items-center gap-3 p-3 bg-purple-50 rounded-xl"><span class="text-purple-600">๐ก</span>
         <div>
          <p class="font-semibold text-sm">ุงูุชุฑุงุญุงุช ูุฎุตุตุฉ</p>
          <p class="text-xs text-gray-600">ุญููู ูุจุชูุฑุฉ ููู ูุนุงููุฉ</p>
         </div>
        </div>
        <div class="flex items-center gap-3 p-3 bg-green-50 rounded-xl"><span class="text-green-600">โก</span>
         <div>
          <p class="font-semibold text-sm">ุงุณุชุฌุงุจุฉ ููุฑูุฉ</p>
          <p class="text-xs text-gray-600">ุฅุฌุงุจุงุช ุณุฑูุนุฉ ูุฏูููุฉ</p>
         </div>
        </div>
       </div><a href="https://eventplus.wsal.ai/" target="_blank" rel="noopener noreferrer" class="block w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white text-center py-3 rounded-xl font-bold hover:from-blue-700 hover:to-purple-700 transition-all"> ุงูุชุดู Wasl AI ๐ </a>
       <p class="text-xs text-gray-500 text-center mt-3">ููุตุฉ ุฐููุฉ ูุชุทูุฑุฉ ูููู ุงุญุชูุงุฌุงุชู ุงูุชูููุฉ</p>
      </div>
     </div>
    </div>
   </div>
  </section><!-- Contact Section -->
  <section id="contact" class="section-padding gradient-bg text-white">
   <div class="max-w-4xl mx-auto text-center">
    <h2 class="text-4xl md:text-5xl font-black mb-6">ุชูุงุตู ูุนูุง ๐</h2>
    <p class="text-xl mb-10 opacity-95">ูุญู ููุง ููุฅุฌุงุจุฉ ุนูู ุฌููุน ุงุณุชูุณุงุฑุงุชู</p>
    <div class="grid md:grid-cols-2 gap-8 mb-10">
     <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-8">
      <div class="text-4xl mb-4">
       ๐ฌ
      </div>
      <h3 class="text-2xl font-bold mb-3">ูุงุชุณุงุจ</h3>
      <p class="mb-4 opacity-90" id="whatsapp-display">+968 XXXX XXXX</p><a href="#" id="whatsapp-contact-btn" class="inline-block bg-green-500 text-white px-6 py-3 rounded-full font-bold hover:bg-green-600 transition-all"> ุชูุงุตู ุงูุขู </a>
     </div>
     <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-8">
      <div class="text-4xl mb-4">
       ๐ง
      </div>
      <h3 class="text-2xl font-bold mb-3">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</h3>
      <p class="mb-4 opacity-90" id="email-display">info@eventplus.om</p><a href="#" id="email-contact-btn" class="inline-block bg-blue-500 text-white px-6 py-3 rounded-full font-bold hover:bg-blue-600 transition-all"> ุฑุงุณููุง </a>
     </div>
    </div>
   </div>
  </section><!-- Footer -->
  <footer class="bg-gray-900 text-white py-12">
   <div class="max-w-6xl mx-auto px-4 text-center">
    <div class="text-3xl mb-4">
     ๐ฏ
    </div>
    <h3 class="text-2xl font-bold mb-2">EventPlus</h3>
    <p class="text-gray-400 mb-6">ุญููู ุงูุนุฑุถ ูุงูุชูุงุนู ุงูุฐููุฉ</p>
    <p class="text-sm text-gray-500">ยฉ 2024 EventPlus. ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
   </div>
  </footer>
 <script>
        const defaultConfig = {
            hero_title: "EventPlus โ ุญููู ุงูุนุฑุถ ูุงูุชูุงุนู ููููููุฌุฑุงู ูุงูุดุงุดุงุช ุงูุฐููุฉ",
            hero_subtitle: "ูุญููู ุงูุชูููุฉ ุฅูู ุชุฌุฑุจุฉ ุฅูุณุงููุฉ ุชูููุน ุฌูููุฑูู ูุชููุชุฌ ุจูุงูุงุช ูุงุจูุฉ ูููุฑุงุฑ",
            whatsapp_number: "+968 98567383",
            email_address: "info@momentconnect.com",
            background_color: "#41296D",
            surface_color: "#F5F5F7",
            text_color: "#2C2C2C",
            primary_action_color: "#EC2B84",
            secondary_action_color: "#00B9A8"
        };

        let cart = [];
        let selectedPackage = null;
        let bookings = [];
        let selectedDevices = [];
        let selectedAddons = [];
        let currentSlideIndex = 0;
        let specialDiscountType = null;
        let specialDiscountActive = false;
		let discountPercent = 0; // ุชู ุฅุถุงูุฉ ูุชุบูุฑ ุงูุฎุตู ุงูุนุงู

        const dataHandler = {
            onDataChanged(data) {
                bookings = data;
                console.log('Bookings updated:', bookings.length);
                updateBookingsCount();
                renderBookingHistory();
            }
        };

        async function initializeApp() {
            if (window.dataSdk) {
                const initResult = await window.dataSdk.init(dataHandler);
                if (!initResult.isOk) {
                    console.error("Failed to initialize data SDK");
                }
            }

            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig,
                    onConfigChange: async (config) => {
                        document.getElementById('hero-title').textContent = config.hero_title || defaultConfig.hero_title;
                        document.getElementById('hero-subtitle').textContent = config.hero_subtitle || defaultConfig.hero_subtitle;
                        document.getElementById('nav-title').textContent = 'EventPlus';
                        
                        const whatsappNum = config.whatsapp_number || defaultConfig.whatsapp_number;
                        const email = config.email_address || defaultConfig.email_address;
                        
                        document.getElementById('whatsapp-display').textContent = whatsappNum;
                        document.getElementById('email-display').textContent = email;
                        
                        const whatsappUrl = `https://wa.me/${whatsappNum.replace(/[^0-9]/g, '')}`;
                        document.getElementById('whatsapp-hero-btn').href = whatsappUrl;
                        document.getElementById('whatsapp-contact-btn').href = whatsappUrl;
                        document.getElementById('email-contact-btn').href = `mailto:${email}`;
                        
                        const bgColor = config.background_color || defaultConfig.background_color;
                        const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
                        
                        document.querySelectorAll('.gradient-bg').forEach(el => {
                            el.style.background = `linear-gradient(135deg, ${bgColor} 0%, ${primaryColor} 100%)`;
                        });
                    },
                    mapToCapabilities: (config) => ({
                        recolorables: [
                            {
                                get: () => config.background_color || defaultConfig.background_color,
                                set: (value) => {
                                    window.elementSdk.config.background_color = value;
                                    window.elementSdk.setConfig({ background_color: value });
                                }
                            },
                            {
                                get: () => config.surface_color || defaultConfig.surface_color,
                                set: (value) => {
                                    window.elementSdk.config.surface_color = value;
                                    window.elementSdk.setConfig({ surface_color: value });
                                }
                            },
                            {
                                get: () => config.text_color || defaultConfig.text_color,
                                set: (value) => {
                                    window.elementSdk.config.text_color = value;
                                    window.elementSdk.setConfig({ text_color: value });
                                }
                            },
                            {
                                get: () => config.primary_action_color || defaultConfig.primary_action_color,
                                set: (value) => {
                                    window.elementSdk.config.primary_action_color = value;
                                    window.elementSdk.setConfig({ primary_action_color: value });
                                }
                            },
                            {
                                get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                                set: (value) => {
                                    window.elementSdk.config.secondary_action_color = value;
                                    window.elementSdk.setConfig({ secondary_action_color: value });
                                }
                            }
                        ],
                        borderables: [],
                        fontEditable: undefined,
                        fontSizeable: undefined
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ["hero_title", config.hero_title || defaultConfig.hero_title],
                        ["hero_subtitle", config.hero_subtitle || defaultConfig.hero_subtitle],
                        ["whatsapp_number", config.whatsapp_number || defaultConfig.whatsapp_number],
                        ["email_address", config.email_address || defaultConfig.email_address]
                    ])
                });
            }
        }

        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
        }

        // Slideshow Functions
        function showSlide(index) {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.dot');
            
            slides.forEach(slide => slide.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            if (index >= slides.length) currentSlideIndex = 0;
            if (index < 0) currentSlideIndex = slides.length - 1;
            
            slides[currentSlideIndex].classList.add('active');
            dots[currentSlideIndex].classList.add('active');
        }

        function changeSlide(direction) {
            currentSlideIndex += direction;
            showSlide(currentSlideIndex);
        }

        function currentSlide(index) {
            currentSlideIndex = index - 1;
            showSlide(currentSlideIndex);
        }

        // Auto slideshow
        function autoSlideshow() {
            currentSlideIndex++;
            showSlide(currentSlideIndex);
        }

        // Start auto slideshow
        setInterval(autoSlideshow, 5000);

        function addToCart(deviceName, price) {
            cart.push({ name: deviceName, price: price });
            updateCart();
            showToast(`ุชูุช ุฅุถุงูุฉ ${deviceName} ุฅูู ุงูุญุฌุฒ`);
        }

        function addDeviceToSelection(deviceName, price, basePrice) {
            // ุงูุจุญุซ ุนู ุงูุฌูุงุฒ ูู ุงููููุฐุฌ ูุชุญุฏูุฏู
            const deviceCheckboxes = document.querySelectorAll('.device-checkbox');
            
            deviceCheckboxes.forEach(checkbox => {
                if (checkbox.dataset.device === deviceName) {
                    checkbox.checked = true;
                    
                    // ุชุญุฏูุซ ุงููููุฉ ุฅูู 1
                    const quantityInput = document.querySelector(`.device-quantity[data-device="${deviceName}"]`);
                    if (quantityInput) {
                        quantityInput.value = 1;
                    }
                }
            });
            
            // ุชุญุฏูุซ ุงูุชุญุฏูุฏ ูุฅุธูุงุฑ ุงูููุฎุต
            updateDeviceSelection();
            
            // ุงูุชูุฑูุฑ ุฅูู ูุณู ุงูุญุฌุฒ
            scrollToSection('booking');
            
            // ุฅุธูุงุฑ ุฑุณุงูุฉ ุชุฃููุฏ
            showToast(`ุชูุช ุฅุถุงูุฉ ${deviceName} ุฅูู ุงูุญุฌุฒ โ`);
        }

        function selectPackage(packageName, price) {
            selectedPackage = { name: packageName, price: price };
            cart = [selectedPackage];
            updateCart();
            scrollToSection('booking');
            showToast(`ุชู ุงุฎุชูุงุฑ ุจุงูุฉ ${packageName}`);
        }

        function selectEssentialPlusPackage() {
            // ุฅูุบุงุก ุชุญุฏูุฏ ุฌููุน ุงูุฃุฌูุฒุฉ ูุงูุฅุถุงูุงุช ุฃููุงู
            document.querySelectorAll('.device-checkbox').forEach(cb => cb.checked = false);
            document.querySelectorAll('.device-quantity').forEach(input => input.value = 0);
            document.querySelectorAll('.addon-checkbox').forEach(cb => cb.checked = false);
            
            // ุชุญุฏูุฏ ุงูุฅุถุงูุงุช ุงููุดูููุฉ ูู ุงูุจุงูุฉ
            const htmlCheckbox = document.querySelector('.addon-checkbox[data-addon="ุตูุญุฉ ุชูุงุนููุฉ HTML"]');
            const motionCheckbox = document.querySelector('.addon-checkbox[data-addon="ููุฏูู ููุดู"]');
            const brandingCheckbox = document.querySelector('.addon-checkbox[data-addon="ุจุฑุงูุฏูุบ ุงูุฃุฌูุฒุฉ"]');
            
            if (htmlCheckbox) htmlCheckbox.checked = true;
            if (motionCheckbox) motionCheckbox.checked = true;
            if (brandingCheckbox) brandingCheckbox.checked = true;
            
            updateDeviceSelection();
            updateAddonSelection();
            scrollToSection('booking');
            showToast('โ ุชู ุงุฎุชูุงุฑ ุจุงูุฉ Essential Plus - ุงุฎุชุฑ ุดุงุดุฉ ูุงุญุฏุฉ + ุฅุถุงูุงุช ุฐููุฉ (75-120 OMR)');
        }

        function selectInteractiveProPackage() {
            // ุฅูุบุงุก ุชุญุฏูุฏ ุฌููุน ุงูุฃุฌูุฒุฉ ูุงูุฅุถุงูุงุช ุฃููุงู
            document.querySelectorAll('.device-checkbox').forEach(cb => cb.checked = false);
            document.querySelectorAll('.device-quantity').forEach(input => input.value = 0);
            document.querySelectorAll('.addon-checkbox').forEach(cb => cb.checked = false);
            
            // ุชุญุฏูุฏ ุงูุฅุถุงูุงุช ุงููุดูููุฉ ูู ุงูุจุงูุฉ
            const gameCheckbox = document.querySelector('.addon-checkbox[data-addon="ูุนุจุฉ ุฌุงูุฒุฉ"]');
            const htmlCheckbox = document.querySelector('.addon-checkbox[data-addon="ุตูุญุฉ ุชูุงุนููุฉ HTML"]');
            const brandingCheckbox = document.querySelector('.addon-checkbox[data-addon="ุจุฑุงูุฏูุบ ุงูุฃุฌูุฒุฉ"]');
            
            if (gameCheckbox) gameCheckbox.checked = true;
            if (htmlCheckbox) htmlCheckbox.checked = true;
            if (brandingCheckbox) brandingCheckbox.checked = true;
            
            updateDeviceSelection();
            updateAddonSelection();
            scrollToSection('booking');
            showToast('โ ุชู ุงุฎุชูุงุฑ ุจุงูุฉ Interactive Pro - ุงุฎุชุฑ ุดุงุดุฉ ูุงุญุฏุฉ + ุญููู ูุชูุฏูุฉ (120-200 OMR)');
        }

        function selectPremiumCompletePackage() {
            // ุฅูุบุงุก ุชุญุฏูุฏ ุฌููุน ุงูุฃุฌูุฒุฉ ูุงูุฅุถุงูุงุช ุฃููุงู
            document.querySelectorAll('.device-checkbox').forEach(cb => cb.checked = false);
            document.querySelectorAll('.device-quantity').forEach(input => input.value = 0);
            document.querySelectorAll('.addon-checkbox').forEach(cb => cb.checked = false);
            
            // ุชุญุฏูุฏ ุงูุฅุถุงูุงุช ุงููุดูููุฉ ูู ุงูุจุงูุฉ
            const photographyCheckbox = document.querySelector('.addon-checkbox[data-addon="ุชุตููุฑ ุงุญุชุฑุงูู"]');
            const customImagesCheckbox = document.querySelector('.addon-checkbox[data-addon="ุตูุฑ ูุฎุตุตุฉ ููุดุงุดุงุช"]');
            const techSupportCheckbox = document.querySelector('.addon-checkbox[data-addon="ุฏุนู ููู ุจุงูุณุงุนุฉ"]');
            
            if (photographyCheckbox) photographyCheckbox.checked = true;
            if (customImagesCheckbox) customImagesCheckbox.checked = true;
            if (techSupportCheckbox) techSupportCheckbox.checked = true;
            
            updateDeviceSelection();
            updateAddonSelection();
            scrollToSection('booking');
            showToast('โ ุชู ุงุฎุชูุงุฑ ุจุงูุฉ Premium Complete - ุงุฎุชุฑ ุดุงุดุชูู + ุงูุญู ุงูุดุงูู (180-280 OMR)');
        }

        function updateCart() {
            const selectedItemsDiv = document.getElementById('selected-items');
            const emptyCart = document.getElementById('empty-cart');
            
            if (cart.length === 0) {
                emptyCart.style.display = 'block';
                selectedItemsDiv.innerHTML = '<p class="text-gray-400 text-center" id="empty-cart">ูู ุชุฎุชุฑ ุฃู ุฃุฌูุฒุฉ ุจุนุฏ</p>';
            } else {
                selectedItemsDiv.innerHTML = cart.map((item, index) => `
                    <div class="flex justify-between items-center bg-white p-3 rounded-lg mb-2">
                        <span class="font-semibold">${item.name}</span>
                        <div class="flex items-center gap-3">
                            <span class="text-purple-600 font-bold">${item.price} OMR</span>
                            <button onclick="removeFromCart(${index})" class="text-red-500 hover:text-red-700">โ</button>
                        </div>
                    </div>
                `).join('');
            }
            
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            const totalWithVat = (total * 1.05).toFixed(2);
            
            document.getElementById('total-price').textContent = `${total} OMR`;
            document.getElementById('total-with-vat').textContent = `${totalWithVat} OMR`;
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
            showToast('ุชู ุงูุญุฐู ูู ุงูุญุฌุฒ');
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `
                <div class="flex items-center gap-3">
                    <span class="text-2xl">โ</span>
                    <span class="font-semibold">${message}</span>
                </div>
            `;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        function toggleDistanceField() {
            const insideMuscatNo = document.getElementById('inside-muscat-no');
            const distanceField = document.getElementById('distance-field');
            
            if (insideMuscatNo.checked) {
                distanceField.classList.remove('hidden');
            } else {
                distanceField.classList.add('hidden');
            }
        }

        function toggleBatteryRecommendation() {
            const electricityNo = document.getElementById('electricity-no');
            const batteryRecommendation = document.getElementById('battery-recommendation');
            
            if (electricityNo.checked) {
                batteryRecommendation.classList.remove('hidden');
            } else {
                batteryRecommendation.classList.add('hidden');
            }
        }

        // ุฏุงูุฉ ุญุณุงุจ ูุนุงูู ุงููุฏุฉ ุงูุทูููุฉ
        function longTermFactor(days) {
            if (days <= 3) return 1.00;
            if (days <= 7) return 0.85;
            if (days <= 14) return 0.50;
            if (days <= 21) return 0.40;
            return 0.40; // 22-30 days
        }

        // ุฏุงูุฉ ุญุณุงุจ ุงูุณุนุฑ ุงูุฐูู ููุฌูุงุฒ ุงููุงุญุฏ
        function calculateSmartPrice(dailyRate, basePrice, days, quantity = 1) {
            let subtotal = dailyRate * days * longTermFactor(days);
            
            // ุชุทุจูู ุงูุณูู ุงูุดูุฑู ุงูุฐูู (45% ูู ุณุนุฑ ุงูุฃุตู)
            if (days >= 22) {
                const monthlyCap = basePrice * 0.45;
                subtotal = Math.min(subtotal, monthlyCap);
            }
            
            // ูุง ูุชุฌุงูุฒ ูููุฉ ุงูุฃุตู ุฃุจุฏุงู
            subtotal = Math.min(subtotal, basePrice);
            
            return subtotal * quantity;
        }

        function updateDeviceSelection() {
            selectedDevices = [];
            const deviceCheckboxes = document.querySelectorAll('.device-checkbox:checked');
            
            deviceCheckboxes.forEach(checkbox => {
                const deviceName = checkbox.dataset.device;
                const dailyRate = parseInt(checkbox.dataset.price);
                const basePrice = parseInt(checkbox.dataset.basePrice);
                const quantityInput = document.querySelector(`.device-quantity[data-device="${deviceName}"]`);
                const daysInput = document.querySelector(`.device-days[data-device="${deviceName}"]`);
                
                const quantity = parseInt(quantityInput.value) || 0;
                const days = parseInt(daysInput.value) || 1;
                
                if (quantity > 0) {
                    const smartTotal = calculateSmartPrice(dailyRate, basePrice, days, quantity);
                    
                    selectedDevices.push({
                        name: deviceName,
                        dailyRate: dailyRate,
                        basePrice: basePrice,
                        quantity: quantity,
                        days: days,
                        factor: longTermFactor(days),
                        isLongTerm: days >= 4,
                        total: smartTotal
                    });
                }
            });
            
            updateBookingSummary();
        }

        function handleDeviceCheckboxChange(checkbox) {
            const deviceName = checkbox.dataset.device;
            const quantityInput = document.querySelector(`.device-quantity[data-device="${deviceName}"]`);
            const warningDiv = document.querySelector(`.quantity-warning[data-device="${deviceName}"]`);
            
            if (checkbox.checked) {
                // ุฅุฐุง ุชู ุชุญุฏูุฏ ุงูุฌูุงุฒุ ุชุนููู ุงููููุฉ ุฅูู 1 ุชููุงุฆูุงู
                if (parseInt(quantityInput.value) === 0) {
                    quantityInput.value = 1;
                }
                // ุฅุฎูุงุก ุงูุชุญุฐูุฑ ุฅุฐุง ูุงู ููุฌูุฏุงู
                if (warningDiv) {
                    warningDiv.style.display = 'none';
                }
            }
            
            updateDeviceSelection();
        }

        function handleQuantityChange(quantityInput) {
            const deviceName = quantityInput.dataset.device;
            const checkbox = document.querySelector(`.device-checkbox[data-device="${deviceName}"]`);
            const quantity = parseInt(quantityInput.value) || 0;
            
            // ุฅูุดุงุก ุฃู ุงูุนุซูุฑ ุนูู div ุงูุชุญุฐูุฑ
            let warningDiv = document.querySelector(`.quantity-warning[data-device="${deviceName}"]`);
            if (!warningDiv) {
                warningDiv = document.createElement('div');
                warningDiv.className = 'quantity-warning text-red-500 text-xs mt-1';
                warningDiv.dataset.device = deviceName;
                quantityInput.parentElement.appendChild(warningDiv);
            }
            
            if (checkbox.checked && quantity === 0) {
                // ุฅุธูุงุฑ ุชุญุฐูุฑ ุฅุฐุง ูุงู ุงูุฌูุงุฒ ูุญุฏุฏ ูุงููููุฉ ุตูุฑ
                warningDiv.textContent = 'โ๏ธ ูุฌุจ ุฃู ุชููู ุงููููุฉ ุฃูุจุฑ ูู ุตูุฑ';
                warningDiv.style.display = 'block';
            } else {
                // ุฅุฎูุงุก ุงูุชุญุฐูุฑ
                warningDiv.style.display = 'none';
            }
            
            updateDeviceSelection(); // ุชุญุฏูุซ ุงูููุฎุต ุจุนุฏ ุชุบููุฑ ุงููููุฉ
        }

        function handleDaysChange(daysInput) {
            const days = parseInt(daysInput.value) || 1;
            const deviceName = daysInput.dataset.device;
            
            if (days > 30) {
                // ุฅุนุงุฏุฉ ุชุนููู ุงููููุฉ ุฅูู 30
                daysInput.value = 30;
                
                // ุฅุธูุงุฑ ุฑุณุงูุฉ ุชูุงุตู ูููุชุฑุงุช ุงูุทูููุฉ
                showLongTermContactMessage();
                return;
            }
            
            updateDeviceSelection(); // ุชุญุฏูุซ ุงูููุฎุต ุจุนุฏ ุชุบููุฑ ุงูุฃูุงู
        }

        function showLongTermContactMessage() {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            messageDiv.innerHTML = `
                <div class="bg-white rounded-3xl p-8 max-w-md mx-4 text-center">
                    <div class="text-6xl mb-4">๐</div>
                    <h3 class="text-2xl font-bold mb-4 text-purple-600">ุนุฑุถ ูุบุฑู ูููุชุฑุงุช ุงูุทูููุฉ!</h3>
                    <p class="text-gray-600 mb-6">ููุญุฌูุฒุงุช ุฃูุซุฑ ูู 30 ูููุงูุ ูุฏููุง ุนุฑูุถ ุฎุงุตุฉ ูุฃุณุนุงุฑ ูุบุฑูุฉ ุฌุฏุงู!</p>
                    <p class="text-sm text-purple-700 font-semibold mb-6">ูู ุจุงูุชูุงุตู ูุนูุง ูุจุงุดุฑุฉ ููุญุตูู ุนูู ุนุฑุถ ูุฎุตุต</p>
                    <div class="flex gap-3 justify-center">
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" class="bg-gray-300 text-gray-700 px-6 py-3 rounded-full font-bold hover:bg-gray-400 transition-all">
                            ุฅุบูุงู
                        </button>
                        <button onclick="contactForLongTerm()" class="bg-green-500 text-white px-6 py-3 rounded-full font-bold hover:bg-green-600 transition-all">
                            ุชูุงุตู ุงูุขู ๐ฌ
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(messageDiv);
        }

        function contactForLongTerm() {
            const message = encodeURIComponent(`ูุฑุญุจุงูุ ุฃุฑุบุจ ูู ุงูุงุณุชูุณุงุฑ ุนู ุนุฑูุถ ุงููุชุฑุงุช ุงูุทูููุฉ (ุฃูุซุฑ ูู 30 ูููุงู) ููุฃุฌูุฒุฉ ุงูุชุงููุฉ:\n\nโข ูููุฉ ุชู โ ุดุงุดุฉ ุงููููุฉ ุงูุฐููุฉ\nโข ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ\nโข ููุณุฉ ุชู โ ุงููุดู ุงูุชูุงุนูู ุจุงูููุณ\n\nูุฑุฌู ุชุฒููุฏู ุจุนุฑุถ ูุฎุตุต ูููุชุฑุงุช ุงูุทูููุฉ ๐ฏ`);
            const whatsappUrl = `https://wa.me/96898567383?text=${message}`;
            window.open(whatsappUrl, '_blank');
            
            // ุฅุบูุงู ุงููุงูุฐุฉ ุงูููุจุซูุฉ
            document.querySelector('.fixed.inset-0').remove();
        }

        function updateAddonSelection() {
            selectedAddons = [];
            const addonCheckboxes = document.querySelectorAll('.addon-checkbox:checked');
            
            addonCheckboxes.forEach(checkbox => {
                const addonName = checkbox.dataset.addon;
                
                selectedAddons.push({
                    name: addonName,
                    price: 0 // ุงูุฅุถุงูุงุช ุจุฏูู ุณุนุฑ ูุญุฏุฏ
                });
            });
            
            updateBookingSummary();
        }

        function calculateDeliveryFee(totalQuantity) {
            // ูุธุงู ุชุณุนูุฑ ุงูุชูุตูู ุญุณุจ ุนุฏุฏ ุงูุดุงุดุงุช
            if (totalQuantity === 0) return 0;
            if (totalQuantity <= 2) return 15;
            if (totalQuantity === 3) return 20;
            if (totalQuantity === 4) return 30;
            if (totalQuantity === 5) return 40;
            if (totalQuantity >= 6) return 60;
            return 15; // ุงูุชุฑุงุถู
        }

        function handleSpecialDiscountRequest() {
            const studentCheckbox = document.getElementById('student-discount');
            const charityCheckbox = document.getElementById('charity-discount');
            const requestDiv = document.getElementById('special-discount-request');
            
            // ููุน ุชุญุฏูุฏ ุฃูุซุฑ ูู ูุทุงูุจุฉ ูุงุญุฏุฉ
            if (studentCheckbox.checked && charityCheckbox.checked) {
                if (event.target === studentCheckbox) {
                    charityCheckbox.checked = false;
                } else {
                    studentCheckbox.checked = false;
                }
            }
            
            if (studentCheckbox.checked) {
                specialDiscountType = 'student';
                specialDiscountActive = true;
                requestDiv.classList.remove('hidden');
                document.getElementById('discount-reason').placeholder = 'ูุซุงู: ุทุงูุจ ูู ุฌุงูุนุฉ ุงูุณูุทุงู ูุงุจูุณุ ูููุฉ ุงูููุฏุณุฉุ ุฃุญุชุงุฌ ุงูุฃุฌูุฒุฉ ููุดุฑูุน ุงูุชุฎุฑุฌ...';
            } else if (charityCheckbox.checked) {
                specialDiscountType = 'charity';
                specialDiscountActive = true;
                requestDiv.classList.remove('hidden');
                document.getElementById('discount-reason').placeholder = 'ูุซุงู: ุฌูุนูุฉ ุฎูุฑูุฉ ูุณุฌูุฉ ุฑุณููุงูุ ูุญุชุงุฌ ุงูุฃุฌูุฒุฉ ูุญููุฉ ุชูุนููุฉ ูุฌุชูุนูุฉ...';
            } else {
                specialDiscountType = null;
                specialDiscountActive = false;
                requestDiv.classList.add('hidden');
                document.getElementById('discount-reason').value = '';
            }
            
            // ูุง ูุทุจู ุฎุตู ุนูู ุงูุฃุณุนุงุฑุ ููุท ูุณุฌู ุงููุทุงูุจุฉ
            updateBookingSummary();
        }
		
        // ุฏุงูุฉ ุชุทุจูู ููุฏ ุงูุฎุตู (ุงููุถุงูุฉ ูุงููุตุญุญุฉ)
        function applyDiscount() {
            const discountCodeInput = document.getElementById('discount-code');
            const discountMessage = document.getElementById('discount-message');
            const code = discountCodeInput.value.trim().toUpperCase();
            
            // ุฅุนุงุฏุฉ ุชุนููู ุงูุฎุตู ุฃููุงู
            discountPercent = 0;
            discountMessage.textContent = '';
            
            // ููุทู ุงูุชุญูู ูู ููุฏ ุงูุฎุตู
            if (code === 'EVENTPLUS20') {
                discountPercent = 0.20; // ุชุทุจูู ุฎุตู 20%
                discountMessage.className = 'text-xs mt-2 font-semibold text-green-600';
                discountMessage.textContent = 'โ ุชู ุชุทุจูู ููุฏ ุงูุฎุตู (20%) ุจูุฌุงุญ!';
            } else if (code === 'PLUS10') {
                discountPercent = 0.10; // ุชุทุจูู ุฎุตู 10%
                discountMessage.className = 'text-xs mt-2 font-semibold text-green-600';
                discountMessage.textContent = 'โ ุชู ุชุทุจูู ููุฏ ุงูุฎุตู (10%) ุจูุฌุงุญ!';
            } else if (code.length > 0) {
                discountMessage.className = 'text-xs mt-2 font-semibold text-red-600';
                discountMessage.textContent = 'โ ููุฏ ุงูุฎุตู ุบูุฑ ุตุญูุญ ุฃู ููุชูู ุงูุตูุงุญูุฉ.';
            }
            
            // ุชุญุฏูุซ ุงูููุฎุต ูุญุณุงุจ ุงูุฎุตู ุงูุฌุฏูุฏ
            updateBookingSummary();
        }


        function calculateSmartPricing() {
            // ุญุณุงุจ ุฅุฌูุงูู ุงูุฃุฌูุฒุฉ (ุจุงูุชุณุนูุฑ ุงูุฐูู ุงููุฏูุฌ)
            let totalDevices = selectedDevices.reduce((sum, device) => sum + device.total, 0);
            let subtotal = totalDevices;
            let discounts = [];
            let suggestions = [];
            let longTermPerks = [];
            
            // ุงูุชุญูู ูู ูุฌูุฏ ุจุงูุฉ ุงููุชุฑุงุช ุงูุทูููุฉ
            const hasLongTermDevices = selectedDevices.some(d => d.isLongTerm);
            
            if (hasLongTermDevices) {
                longTermPerks = [
                    'ุตูุงูุฉ ููุงุฆูุฉ ูู 10 ุฃูุงู + ุฒูุงุฑุฉ ุทูุงุฑุฆ ูุฌุงููุฉ',
                    'ุชุญุฏูุซ ุงููุญุชูู ุญุชู 3 ูุฑุงุช ุฎูุงู ูุชุฑุฉ ุงูุฅูุฌุงุฑ',
                    'ุฏุนู ููู ูุงุชุณุงุจ/ุงุชุตุงู ุฃููููุฉ',
                    'ููู ูุธุงู ุงูุนุฑุถ (Kiosk/Lockdown)',
                    'ุจุฏูู ูุคูุช ุนูุฏ ุงูุนุทู ุบูุฑ ุงููุชุนูุฏ (ุญุณุจ ุงูุชูุงูุฑ)'
                ];
            }
            
            // ุฎุตู ุงูุฃุฌูุฒุฉ ุงููุชุนุฏุฏุฉ (10% ุนูุฏ ุงุฎุชูุงุฑ 2+ ุฌูุงุฒ)
            const totalQuantity = selectedDevices.reduce((sum, device) => sum + device.quantity, 0);
            let multiDeviceDiscount = 0;
            if (totalQuantity >= 2 && totalDevices > 0) {
                multiDeviceDiscount = totalDevices * 0.10;
                discounts.push({ name: 'ุฎุตู ุชุนุฏุฏ ุงูุฃุฌูุฒุฉ (10%)', amount: multiDeviceDiscount });
            }
            
            // ุฎุตู ุงูุฅุถุงูุงุช ุงููุชุนุฏุฏุฉ (ูุทุจู ุนูู ุงูุฃุฌูุฒุฉ ุนูุฏ ุทูุจ ุฅุถุงูุงุช ูุชุนุฏุฏุฉ)
            let addonsDiscount = 0;
            if (selectedAddons.length >= 3 && totalDevices > 0) {
                addonsDiscount = totalDevices * 0.15;
                discounts.push({ name: 'ุฎุตู ุงูุฅุถุงูุงุช ุงููุชุนุฏุฏุฉ (15%)', amount: addonsDiscount });
            } else if (selectedAddons.length >= 2 && totalDevices > 0) {
                addonsDiscount = totalDevices * 0.08;
                discounts.push({ name: 'ุฎุตู ุงูุฅุถุงูุงุช ุงููุชุนุฏุฏุฉ (8%)', amount: addonsDiscount });
            }
            
            // ุงูุชุฑุงุญุงุช ุฐููุฉ ุญุณุจ ุงูุฃุฌูุฒุฉ ุงููุฎุชุงุฑุฉ
            const hasDigitalBoard = selectedDevices.some(d => d.name.includes('ูููุฉ ุชู โ ุดุงุดุฉ ุงููููุฉ ุงูุฐููุฉ'));
            const hasBatteryKiosk = selectedDevices.some(d => d.name.includes('ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ'));
            const hasInteractiveHTML = selectedAddons.some(a => a.name.includes('ุตูุญุฉ ุชูุงุนููุฉ HTML'));
            const hasPhotography = selectedAddons.some(a => a.name.includes('ุชุตููุฑ ุงุญุชุฑุงูู'));
            
            // ุงูุชุฑุงุญ ุตูุญุฉ ุชูุงุนููุฉ ููุดุงุดุงุช ุงูุฐููุฉ + ุฎุตู ุฅุถุงูู
            if ((hasDigitalBoard || hasBatteryKiosk) && !hasInteractiveHTML) {
                suggestions.push({
                    type: 'interactive_page',
                    title: '๐ก ุงูุชุฑุงุญ ุฐูู: ุตูุญุฉ ุชูุงุนููุฉ',
                    message: 'ุฃุถู ุตูุญุฉ ุชูุงุนููุฉ HTML ูุงุญุตู ุนูู ุฎุตู ุฅุถุงูู 5% ุนูู ุงููุฌููุน!',
                    discount: 0.05
                });
            }
            
            // ุฎุตู ุงูุตูุญุฉ ุงูุชูุงุนููุฉ ููุดุงุดุงุช ุงูุฐููุฉ
            let interactivePageDiscount = 0;
            if ((hasDigitalBoard || hasBatteryKiosk) && hasInteractiveHTML && totalDevices > 0) {
                interactivePageDiscount = totalDevices * 0.05;
                discounts.push({ name: 'ุฎุตู ุงูุตูุญุฉ ุงูุชูุงุนููุฉ ููุดุงุดุงุช ุงูุฐููุฉ (5%)', amount: interactivePageDiscount });
            }
            
            // --- ุจุฏุก ููุทูุฉ ุงูุฎุตู ูุงูุงุญุชุณุงุจ ุงูุฌุฏูุฏุฉ ูุงููุตุญุญุฉ
            const totalDiscount = multiDeviceDiscount + addonsDiscount + interactivePageDiscount;
            const subtotalAfterDiscounts = subtotal - totalDiscount;

            // ุชุทุจูู ุฎุตู ุงูููุฏ (discountPercent)
            const discountCodeAmount = subtotalAfterDiscounts * discountPercent;
            const finalSubtotal = subtotalAfterDiscounts - discountCodeAmount; // ุงูุฅุฌูุงูู ุจุนุฏ ูู ุงูุฎุตููุงุช
            // --- ููุงูุฉ ููุทูุฉ ุงูุฎุตู ูุงูุงุญุชุณุงุจ ุงูุฌุฏูุฏุฉ

            // ุญุณุงุจ ุฑุณูู ุงูุชูุตูู ุงูุฌุฏูุฏุฉ ุญุณุจ ุนุฏุฏ ุงูุดุงุดุงุช
            const deliveryFee = calculateDeliveryFee(totalQuantity);
            
            // ุญุณุงุจ ุงููุณุงูุฉ ุงูุฅุถุงููุฉ (ุฎุงุฑุฌ ูุณูุท)
            const distanceKm = parseInt(document.getElementById('distance-km')?.value || 0);
            const extraKm = Math.max(0, distanceKm - 30);
            const extraDistanceFee = extraKm * 0.25; // ูููู ูุงุญููุง ุฌุนูู 0.25โ0.35 ุญุณุจ ุณูุงุณุฉ ุงููุณุงูุฉ

            
            return {
                originalSubtotal: subtotal,
                discounts: discounts,
                suggestions: suggestions,
                longTermPerks: longTermPerks,
                totalDiscount: totalDiscount,
                finalSubtotal: finalSubtotal,
                discountCodeAmount: discountCodeAmount, // ุฅุฑุฌุงุน ูููุฉ ุฎุตู ุงูููุฏ
                deliveryFee: deliveryFee,
                extraDistanceFee: extraDistanceFee,
                totalQuantity: totalQuantity,
                hasLongTerm: hasLongTermDevices
            };
        }

        function updateBookingSummary() {
            const summaryDiv = document.getElementById('booking-summary');
            
            if (selectedDevices.length === 0 && selectedAddons.length === 0) {
                summaryDiv.innerHTML = `
                    <div class="text-center text-gray-400 py-8">
                        <div class="text-4xl mb-2">๐ฑ</div>
                        <p>ุงุฎุชุฑ ุงูุฃุฌูุฒุฉ ุฃู ุงูุฅุถุงูุงุช ูุฑุคูุฉ ุงูููุฎุต</p>
                    </div>
                `;
            } else {
                let summaryHTML = '';
                
                const pricing = calculateSmartPricing();
                
                // (ุงูุฅุถุงูุฉ ุงูุฌุฏูุฏุฉ ูุงููุตุญุญุฉ) - ุชุญุฏูุซ ุตู ุงูุฎุตู ูู ุงูุดุฑูุท ุงูุฌุงูุจู
                const discountRow = document.getElementById('discount-row');
                const discountAmountEl = document.getElementById('discount-amount');
                const discountCodeInput = document.getElementById('discount-code');

                if (discountPercent > 0 && pricing.discountCodeAmount > 0) {
                    const appliedCodeName = discountCodeInput.value.trim().toUpperCase() || 'ููุฏ ุฎุตู';
                    
                    discountRow.querySelector('span:first-child').textContent = `ุฎุตู (${appliedCodeName}):`;
                    discountAmountEl.textContent = `-${pricing.discountCodeAmount.toFixed(2)} OMR`;
                    discountRow.classList.remove('hidden');
                } else {
                    discountRow.classList.add('hidden');
                }
                // --- ููุงูุฉ ุชุญุฏูุซ ุตู ุงูุฎุตู
                
                // ุฅุธูุงุฑ ุจุงูุฉ ุงููุชุฑุงุช ุงูุทูููุฉ ุฅุฐุง ูุงูุช ููุนูุฉ
                if (pricing.hasLongTerm) {
                    summaryHTML += `
                        <div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg p-3 mb-4">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-lg">๐</span>
                                <span class="font-bold text-sm">ุชู ุชูุนูู ุจุงูุฉ ุงููุชุฑุงุช ุงูุทูููุฉ</span>
                            </div>
                            <div class="text-xs opacity-90">ุชูุช ุฅุถุงูุฉ ูุฒุงูุง ูุฌุงููุฉ ูุทูุจู!</div>
                        </div>
                    `;
                }
                
                if (selectedDevices.length > 0) {
                    summaryHTML += '<div class="mb-4"><h4 class="font-bold text-purple-900 mb-2">ุงูุฃุฌูุฒุฉ:</h4>';
                    selectedDevices.forEach(device => {
                        const originalPrice = device.dailyRate * device.days * device.quantity;
                        const savings = originalPrice - device.total;
                        
                        summaryHTML += `
                            <div class="border-b border-gray-100 pb-2 mb-2 last:border-b-0">
                                <div class="flex justify-between items-start text-sm">
                                    <span class="font-medium">${device.name}</span>
                                    <span class="font-semibold">${device.total.toFixed(2)} OMR</span>
                                </div>
                                <div class="text-xs text-gray-500 mt-1">
                                    ${device.quantity} ุฌูุงุฒ ร ${device.days} ุฃูุงู
                                    ${device.isLongTerm ? `<span class="text-purple-600 font-semibold"> (ุฎุตู ${Math.round((1 - device.factor) * 100)}%)</span>` : ''}
                                </div>
                                ${savings > 0 ? `<div class="text-xs text-green-600 font-semibold">ููุฑุช ${savings.toFixed(2)} OMR</div>` : ''}
                            </div>
                        `;
                    });
                    summaryHTML += '</div>';
                }
                
                // ุฅุธูุงุฑ ุงููุฒุงูุง ุงููุฌุงููุฉ ูููุชุฑุงุช ุงูุทูููุฉ
                if (pricing.longTermPerks.length > 0) {
                    summaryHTML += `
                        <div class="bg-purple-50 border border-purple-200 rounded-lg p-3 mb-4">
                            <div class="text-sm font-bold text-purple-800 mb-2">๐ Long-Term Perks (ูุฌุงูุงู):</div>
                            <div class="text-xs text-purple-700 space-y-1">
                                ${pricing.longTermPerks.map(perk => `<div>โข ${perk}</div>`).join('')}
                            </div>
                        </div>
                    `;
                }
                
                // ุฅุธูุงุฑ ุชูุงุตูู ุฑุณูู ุงูุชูุตูู
                if (selectedDevices.length > 0) {
                    summaryHTML += `
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
                            <div class="text-sm font-bold text-blue-800 mb-2">๐ ุฑุณูู ุงูุชูุตูู:</div>
                            <div class="text-xs text-blue-700">
                                <div class="grid grid-cols-2 gap-1 mb-2">
                                    <div>ุญุชู 2 ุดุงุดุฉ: 15 OMR</div>
                                    <div>3 ุดุงุดุงุช: 20 OMR</div>
                                    <div>4 ุดุงุดุงุช: 30 OMR</div>
                                    <div>5 ุดุงุดุงุช: 40 OMR</div>
                                    <div>6+ ุดุงุดุงุช: 60 OMR</div>
                                </div>
                                ${pricing.totalQuantity > 0 ? `<div class="font-semibold text-blue-800">ุทูุจู ุงูุญุงูู (${pricing.totalQuantity} ุดุงุดุฉ): ${pricing.deliveryFee} OMR</div>` : ''}
                                ${pricing.extraDistanceFee > 0 ? `<div class="font-semibold text-blue-800">ุฑุณูู ุงููุณุงูุฉ ุงูุฅุถุงููุฉ: ${pricing.extraDistanceFee.toFixed(2)} OMR</div>` : ''}
                            </div>
                        </div>
                    `;
                }
                
                if (selectedAddons.length > 0) {
                    summaryHTML += '<div class="mb-4"><h4 class="font-bold text-purple-900 mb-2">ุงูุฅุถุงูุงุช:</h4>';
                    selectedAddons.forEach(addon => {
                        summaryHTML += `
                            <div class="flex justify-between items-center text-sm mb-1">
                                <span>${addon.name}</span>
                                <span class="font-semibold text-blue-600">ุณุนุฑ ุญุณุจ ุงูุทูุจ</span>
                            </div>
                        `;
                    });
                    summaryHTML += '</div>';
                    
                    // ุฅุธูุงุฑ ููุงุญุธุฉ ุงูุฅุถุงูุงุช
                    summaryHTML += `
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3">
                            <div class="text-sm font-bold text-blue-800 mb-1">๐ก ููุงุญุธุฉ ูููุฉ</div>
                            <div class="text-xs text-blue-700 mb-2">
                                ุงูุฅุถุงูุงุช ุงููุฎุชุงุฑุฉ ุณุชูุณุนูุฑ ุญุณุจ ุงูุทูุจ. ูุฑุฌู ูุตู ุงุญุชูุงุฌุงุชู ุจุงูุชูุตูู ูู ุงูููุงุญุธุงุช ูุณููุฏู ูู ุนุฑุถ ุณุนุฑ ูุฎุตุต ${selectedDevices.length > 0 ? 'ูุน ุฎุตู ุฐูู ุฅุถุงูู' : ''}.
                            </div>
                            <div class="text-xs text-blue-600 font-semibold">
                                ูุซุงู: ุตูุญุฉ ูุจูุท ุชุญุชูู ุนูู ุฃุฌูุฏุฉ ุงูุญููุ ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉุ ููุงุฐุฌ ุงูุชุณุฌููุ ูุฑูุงุจุท ุงูุชูุงุตู
                            </div>
                        </div>
                    `;
                }
                
                summaryDiv.innerHTML = summaryHTML;
            }
            
            const pricing = calculateSmartPricing();
            
            // ุฅุธูุงุฑ ุงูุงูุชุฑุงุญุงุช ุงูุฐููุฉ
            let suggestionsHTML = '';
            if (pricing.suggestions.length > 0) {
                suggestionsHTML = `
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3">
                        ${pricing.suggestions.map(suggestion => `
                            <div class="mb-3 last:mb-0">
                                <div class="text-sm font-bold text-blue-800 mb-1">${suggestion.title}</div>
                                <div class="text-xs text-blue-700 mb-2">${suggestion.message}</div>
                                <button onclick="applySuggestion('${suggestion.type}')" class="bg-blue-600 text-white px-3 py-1 rounded-full text-xs font-bold hover:bg-blue-700 transition-all">
                                    ุชุทุจูู ุงูุงูุชุฑุงุญ
                                </button>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            // ุฅุธูุงุฑ ุงูุฎุตููุงุช ุฅุฐุง ููุฌุฏุช
            let discountHTML = '';
            if (pricing.discounts.length > 0) {
                discountHTML = `
                    <div class="bg-green-50 border border-green-200 rounded-lg p-3 mb-3">
                        <div class="text-sm font-bold text-green-800 mb-2">๐ ุฎุตููุงุช ุฅุถุงููุฉ:</div>
                        ${pricing.discounts.map(discount => `
                            <div class="flex justify-between text-xs text-green-700">
                                <span>${discount.name}</span>
                                <span>-${discount.amount.toFixed(2)} OMR</span>
                            </div>
                        `).join('')}
                        <div class="border-t border-green-300 mt-2 pt-2 flex justify-between text-sm font-bold text-green-800">
                            <span>ุฅุฌูุงูู ุงูุฎุตู ุงูุฅุถุงูู:</span>
                            <span>-${pricing.totalDiscount.toFixed(2)} OMR</span>
                        </div>
                    </div>
                `;
            }
            
            // ุชุญุฏูุซ ุงูุณุนุฑ ุงูุฅุฌูุงูู
            let finalTotal = pricing.finalSubtotal + pricing.deliveryFee + pricing.extraDistanceFee;
            if (selectedDevices.length > 0) {
                let totalText = `${finalTotal.toFixed(2)} OMR`;
                
                // ุฅุถุงูุฉ ุชูุงุตูู ุฑุณูู ุงูุชูุตูู
                let deliveryDetails = [];
                if (pricing.deliveryFee > 0) {
                    deliveryDetails.push(`ุชูุตูู ${pricing.deliveryFee} OMR`);
                }
                if (pricing.extraDistanceFee > 0) {
                    deliveryDetails.push(`ูุณุงูุฉ ุฅุถุงููุฉ ${pricing.extraDistanceFee.toFixed(2)} OMR`);
                }
                
                if (deliveryDetails.length > 0) {
                    totalText += ` (ุดุงูู ${deliveryDetails.join(' + ')})`;
                }
                
                const addonNote = selectedAddons.length > 0 ? ' + ุฅุถุงูุงุช' : '';
                document.getElementById('sidebar-total').textContent = totalText + addonNote;
            } else if (selectedAddons.length > 0) {
                document.getElementById('sidebar-total').textContent = 'ุณุนุฑ ุญุณุจ ุงูุทูุจ';
            } else {
                document.getElementById('sidebar-total').textContent = '0 OMR';
            }
            
            // ุฅุถุงูุฉ ุงูุงูุชุฑุงุญุงุช ูุงูุฎุตููุงุช ูุจู ุงููุฌููุน
            const summaryContainer = document.getElementById('booking-summary');
            if (pricing.suggestions.length > 0) {
                summaryContainer.innerHTML += suggestionsHTML;
            }
            if (pricing.discounts.length > 0) {
                summaryContainer.innerHTML += discountHTML;
            }
        }

        function applySuggestion(suggestionType) {
            if (suggestionType === 'interactive_page') {
                // ุชุญุฏูุฏ ุฎุงูุฉ ุงูุตูุญุฉ ุงูุชูุงุนููุฉ
                const interactiveCheckbox = document.querySelector('.addon-checkbox[data-addon="ุตูุญุฉ ุชูุงุนููุฉ HTML"]');
                if (interactiveCheckbox && !interactiveCheckbox.checked) {
                    interactiveCheckbox.checked = true;
                    updateAddonSelection();
                    showToast('โ ุชู ุฅุถุงูุฉ ุงูุตูุญุฉ ุงูุชูุงุนููุฉ ูุน ุฎุตู 5%!');
                }
            } else if (suggestionType === 'photography_combo') {
                // ุชุญุฏูุฏ ุฎุงูุฉ ุงูุชุตููุฑ ุงูุงุญุชุฑุงูู
                const photographyCheckbox = document.querySelector('.addon-checkbox[data-addon="ุชุตููุฑ ุงุญุชุฑุงูู"]');
                if (photographyCheckbox && !photographyCheckbox.checked) {
                    photographyCheckbox.checked = true;
                    updateAddonSelection();
                    showToast('โ ุชู ุฅุถุงูุฉ ุงูุชุตููุฑ ุงูุงุญุชุฑุงูู ูุน ุฎุตู 10%!');
                }
            }
        }

        function generateWhatsAppMessage() {
            const customerName = document.getElementById('customer-name').value || 'ุนููู';
            const customerPhone = document.getElementById('customer-phone').value;
            
            let message = `ูุฑุญุจูุงุ ุฃูุง ${customerName}`;
            if (customerPhone) message += ` - ${customerPhone}`;
            
            if (selectedDevices.length > 0) {
                message += ` ุฃุฑุบุจ ูู ุงุณุชุฆุฌุงุฑ:\n\n`;
            } else {
                message += ` ุฃุฑุบุจ ูู ุงูุงุณุชูุณุงุฑ ุนู:\n\n`;
            }
            
            // ุงูุฃุฌูุฒุฉ
            if (selectedDevices.length > 0) {
                message += "๐ฑ ุงูุฃุฌูุฒุฉ:\n";
                selectedDevices.forEach(device => {
                    message += `โข ${device.name} - ุงููููุฉ: ${device.quantity} - ุงููุฏุฉ: ${device.days} ุฃูุงู\n`;
                });
                message += "\n";
            }
            
            // ุงูุฅุถุงูุงุช
            if (selectedAddons.length > 0) {
                if (selectedDevices.length > 0) {
                    message += "๐ ุงูุฅุถุงูุงุช ุงููุทููุจุฉ (ุณุนุฑ ุญุณุจ ุงูุทูุจ):\n";
                } else {
                    message += "๐ ุงูุฎุฏูุงุช ุงููุทููุจุฉ (ุณุนุฑ ุญุณุจ ุงูุทูุจ):\n";
                }
                selectedAddons.forEach(addon => {
                    message += `โข ${addon.name}\n`;
                });
                message += "\n";
            }
            
            // ุชูุงุตูู ุงููุนุงููุฉ (ููุท ุฅุฐุง ุชู ุงุฎุชูุงุฑ ุฃุฌูุฒุฉ)
            if (selectedDevices.length > 0) {
                const eventType = document.getElementById('event-type').value;
                const location = document.getElementById('event-location').value;
                const insideMuscat = document.querySelector('input[name="inside-muscat"]:checked')?.value;
                const electricity = document.querySelector('input[name="electricity"]:checked')?.value;
                
                message += "๐ ุชูุงุตูู ุงููุนุงููุฉ:\n";
                if (eventType) message += `โข ุงูููุน: ${eventType}\n`;
                if (location) message += `โข ุงููููุน: ${location}\n`;
                if (insideMuscat) message += `โข ุฏุงุฎู ูุณูุท: ${insideMuscat === 'yes' ? 'ูุนู' : 'ูุง'}\n`;
                if (electricity) message += `โข ุงูููุฑุจุงุก: ${electricity === 'yes' ? 'ูุชููุฑุฉ' : 'ุบูุฑ ูุชููุฑุฉ'}\n`;
                
                // ุงูุชุณุนูุฑ
                const pricing = calculateSmartPricing();
                message += "\n๐ฐ ุงูุชุณุนูุฑ:\n";
                if (pricing.discounts.length > 0) {
                    message += `โข ุงููุฌููุน ูุจู ุงูุฎุตู: ${pricing.originalSubtotal.toFixed(2)} OMR\n`;
                    message += `โข ุฅุฌูุงูู ุงูุฎุตู (ุฐูู + ููุฏ): -${(pricing.totalDiscount + pricing.discountCodeAmount).toFixed(2)} OMR\n`;
                    message += `โข ุงูุฅุฌูุงูู ุงููุณุชุญู ููุฃุฌูุฒุฉ: ${pricing.finalSubtotal.toFixed(2)} OMR\n`;
                } else {
                    message += `โข ุงูุฅุฌูุงูู ุงููุณุชุญู ููุฃุฌูุฒุฉ: ${pricing.finalSubtotal.toFixed(2)} OMR\n`;
                }
                
                // ุฅุถุงูุฉ ุชูุงุตูู ุฑุณูู ุงูุชูุตูู
                if (pricing.deliveryFee > 0) {
                    message += `โข ุฑุณูู ุงูุชูุตูู (${pricing.totalQuantity} ุดุงุดุฉ): ${pricing.deliveryFee} OMR\n`;
                }
                if (pricing.extraDistanceFee > 0) {
                    message += `โข ุฑุณูู ุงููุณุงูุฉ ุงูุฅุถุงููุฉ: ${pricing.extraDistanceFee.toFixed(2)} OMR\n`;
                }
                
                // ุงููุฌููุน ุงูููุงุฆู
                const finalTotal = pricing.finalSubtotal + pricing.deliveryFee + pricing.extraDistanceFee;
                message += `โข ุงููุฌููุน ุงูููุงุฆู: ${finalTotal.toFixed(2)} OMR\n`;
                
                if (selectedAddons.length > 0) {
                    message += `โข ุงูุฅุถุงูุงุช: ุณุนุฑ ุญุณุจ ุงูุทูุจ (ูุน ุฎุตู ุฐูู ุฅุถุงูู)\n`;
                }
                
                // ุฅุถุงูุฉ ูุนูููุงุช ูุทุงูุจุฉ ุงูุฎุตู ุงูุฎุงุต
                if (specialDiscountActive) {
                    const discountType = specialDiscountType === 'student' ? 'ุทุงูุจ ุฌุงูุนู' : 'ุฌูุฉ ุฎูุฑูุฉ/ุบูุฑ ุฑุจุญูุฉ';
                    const discountReason = document.getElementById('discount-reason').value;
                    message += `\n๐๐ ูุทุงูุจุฉ ุจุฎุตู ุฎุงุต (${discountType}):\n`;
                    if (discountReason.trim()) {
                        message += `โข ุงูุณุจุจ: ${discountReason.trim()}\n`;
                    }
                    message += `โข ูุฑุฌู ุฏุฑุงุณุฉ ุงููุทุงูุจุฉ ูุฅุนูุงูู ุจุงููุฑุงุฑ\n`;
                }
                
                message += `\n๐ก ููุงุญุธุฉ: ุฌููุน ุงูุฃุณุนุงุฑ ูุงุจูุฉ ููุชูุงูุถ\n`;
                
                message += "\nูู ุงูุฃุฌูุฒุฉ ูุชุงุญุฉ ูู ูุฐุง ุงูุชุงุฑูุฎุ ๐ค";
            } else {
                // ุฑุณุงูุฉ ููุฅุถุงูุงุช ููุท
                const notes = document.getElementById('notes').value;
                if (notes) {
                    message += `๐ ุชูุงุตูู ุงูุทูุจ:\n${notes}\n\n`;
                }
                
                message += "ูุฑุฌู ุชุฒููุฏู ุจุนุฑุถ ุณุนุฑ ูุฎุตุต ููุฐู ุงูุฎุฏูุงุช ๐ฐ\n";
                message += "ูุณุฃููู ููุชูุงู ููุฑุฏ ูู ุฃูุฑุจ ูุฑุตุฉ ููููุฉ ๐";
            }
            
            return encodeURIComponent(message);
        }

        function validateForm() {
            // ุงูุญููู ุงูุฃุณุงุณูุฉ ุงููุทููุจุฉ ุฏุงุฆูุงู
            const basicRequiredFields = [
                'customer-name',
                'customer-phone'
            ];
            
            for (let fieldId of basicRequiredFields) {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    field.focus();
                    showToast(`โ๏ธ ูุฑุฌู ููุก ุญูู ${field.previousElementSibling.textContent}`);
                    return false;
                }
            }
            
            // ุงูุชุญูู ูู ุงุฎุชูุงุฑ ุงูุฃุฌูุฒุฉ ุฃู ุงูุฅุถุงูุงุช
            if (selectedDevices.length === 0 && selectedAddons.length === 0) {
                showToast('โ๏ธ ูุฑุฌู ุงุฎุชูุงุฑ ุฌูุงุฒ ูุงุญุฏ ุนูู ุงูุฃูู ุฃู ุฅุถุงูุฉ ูุงุญุฏุฉ');
                return false;
            }
            
            // ุฅุฐุง ุชู ุงุฎุชูุงุฑ ุฃุฌูุฒุฉุ ุงูุชุญูู ูู ุงูุญููู ุงูุฅุถุงููุฉ
            if (selectedDevices.length > 0) {
                const deviceRequiredFields = [
                    'event-type',
                    'event-location'
                ];
                
                for (let fieldId of deviceRequiredFields) {
                    const field = document.getElementById(fieldId);
                    if (!field.value.trim()) {
                        field.focus();
                        showToast(`โ๏ธ ูุฑุฌู ููุก ุญูู ${field.previousElementSibling.textContent}`);
                        return false;
                    }
                }
                
                // ุงูุชุญูู ูู ุงุฎุชูุงุฑ ุฏุงุฎู/ุฎุงุฑุฌ ูุณูุท
                const insideMuscat = document.querySelector('input[name="inside-muscat"]:checked');
                if (!insideMuscat) {
                    showToast('โ๏ธ ูุฑุฌู ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงููููุน ุฏุงุฎู ูุณูุท ุฃู ูุง');
                    return false;
                }
                
                // ุงูุชุญูู ูู ุชููุฑ ุงูููุฑุจุงุก
                const electricity = document.querySelector('input[name="electricity"]:checked');
                if (!electricity) {
                    showToast('โ๏ธ ูุฑุฌู ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงูุช ุงูููุฑุจุงุก ูุชููุฑุฉ ุฃู ูุง');
                    return false;
                }
            }
            
            return true;
        }

        function safeVal(id){ const el = document.getElementById(id); return el ? el.value : ''; }


        async function submitViaEmail() {
            if (!validateForm()) return;
            
            const submitBtn = document.getElementById('email-submit-btn');
            const originalContent = submitBtn.innerHTML;
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<div class="loading-spinner mx-auto"></div>';
            
            try {
                const pricing = calculateSmartPricing();
                
                // ุญูุธ ุงูุญุฌุฒ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญููุฉ
                await saveBookingToDatabase(pricing);
                
                const formData = new FormData();
                formData.append('customer_name', document.getElementById('customer-name').value);
                formData.append('customer_email', document.getElementById('customer-email').value);
                formData.append('customer_phone', document.getElementById('customer-phone').value);
                formData.append('event_type', document.getElementById('event-type').value);
                formData.append('event_date', safeVal('event-date'));
                formData.append('event_location', document.getElementById('event-location').value);
                formData.append('event_environment', safeVal('event-environment'));
                formData.append('inside_muscat', document.querySelector('input[name="inside-muscat"]:checked')?.value || '');
                formData.append('distance_km', document.getElementById('distance-km').value);
                formData.append('electricity_available', document.querySelector('input[name="electricity"]:checked')?.value || '');
                formData.append('selected_devices', JSON.stringify(selectedDevices));
                formData.append('selected_addons', JSON.stringify(selectedAddons));
                formData.append('original_price', pricing.originalSubtotal.toFixed(2));
                formData.append('total_discount', pricing.totalDiscount.toFixed(2));
                formData.append('discount_code_amount', pricing.discountCodeAmount.toFixed(2)); // ุฅุถุงูุฉ ุงูุฎุตู ูู ุงูููุฏ
                formData.append('final_price', pricing.finalSubtotal.toFixed(2));
                formData.append('notes', document.getElementById('notes').value);
                
                const response = await fetch('https://formspree.io/f/mdkpqkgy', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                if (response.ok) {
                    showSuccessMessage('ุชู ุฅุฑุณุงู ุทูุจู ุจูุฌุงุญ ุนุจุฑ ุงูุฅูููู! ๐ง');
                    resetForm();
                } else {
                    throw new Error('ูุดู ูู ุงูุฅุฑุณุงู');
                }
            } catch (error) {
                showToast('โ ุญุฏุซ ุฎุทุฃ ูู ุฅุฑุณุงู ุงูุทูุจ. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู');
            }
            
            submitBtn.disabled = false;
            submitBtn.innerHTML = originalContent;
        }

        async function submitViaWhatsApp() {
            if (!validateForm()) return;
            
            try {
                const pricing = calculateSmartPricing();
                
                // ุญูุธ ุงูุญุฌุฒ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญููุฉ
                await saveBookingToDatabase(pricing);
                
                const message = generateWhatsAppMessage();
                const whatsappUrl = `https://wa.me/96898567383?text=${message}`;
                window.open(whatsappUrl, '_blank');
                
                showSuccessMessage('ุชู ุชูุฌููู ุฅูู ุงููุงุชุณุงุจ! ๐ฌ');
                resetForm();
            } catch (error) {
                showToast('โ ุญุฏุซ ุฎุทุฃ ูู ุญูุธ ุงูุญุฌุฒ. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู');
            }
        }

        async function saveBookingToDatabase(pricing) {
            if (!window.dataSdk) return;
            
            if (bookings.length >= 999) {
                showToast('โ๏ธ ุชู ุงููุตูู ููุญุฏ ุงูุฃูุตู ูู ุงูุญุฌูุฒุงุช (999). ูุฑุฌู ุญุฐู ุจุนุถ ุงูุญุฌูุฒุงุช ุงููุฏููุฉ ุฃููุงู.');
                return;
            }
            
            const bookingData = {
                id: `booking_${Date.now()}`,
                customer_name: document.getElementById('customer-name').value,
                customer_email: document.getElementById('customer-email').value || '',
                customer_phone: document.getElementById('customer-phone').value,
                event_type: document.getElementById('event-type').value || '',
                event_location: document.getElementById('event-location').value || '',
                inside_muscat: document.querySelector('input[name="inside-muscat"]:checked')?.value || '',
                electricity_available: document.querySelector('input[name="electricity"]:checked')?.value || '',

                distance_km: document.getElementById('distance-km').value || '0',
                selected_devices: JSON.stringify(selectedDevices),
                selected_addons: JSON.stringify(selectedAddons),
                original_price: pricing.originalSubtotal.toFixed(2),
                total_discount: (pricing.totalDiscount + pricing.discountCodeAmount).toFixed(2), // ูุฌููุน ุงูุฎุตููุงุช
                final_price: (pricing.finalSubtotal + pricing.deliveryFee + pricing.extraDistanceFee).toFixed(2),
                delivery_fee: pricing.deliveryFee.toString(),
                extra_distance_fee: pricing.extraDistanceFee.toFixed(2),
                total_quantity: pricing.totalQuantity.toString(),
                notes: document.getElementById('notes').value || '',
                special_discount_type: specialDiscountType || '',
                special_discount_active: specialDiscountActive.toString(),
                discount_reason: document.getElementById('discount-reason')?.value || '',
                created_at: new Date().toISOString(),
                status: 'ูุฑุณู'
            };
            
            const result = await window.dataSdk.create(bookingData);
            if (!result.isOk) {
                throw new Error('ูุดู ูู ุญูุธ ุงูุญุฌุฒ');
            }
        }

        function showSuccessMessage(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            successDiv.innerHTML = `
                <div class="bg-white rounded-3xl p-8 max-w-md mx-4 text-center">
                    <div class="text-6xl mb-4">โ</div>
                    <h3 class="text-2xl font-bold mb-4 text-green-600">ูุฌุญ ุงูุฅุฑุณุงู!</h3>
                    <p class="text-gray-600 mb-6">${message}</p>
                    <p class="text-sm text-gray-500 mb-6">ุณูุฑุงุฌุน ุทูุจู ููุนูุฏ ุฅููู ุจุงูุชุฃููุฏ ูุฎูุงุฑุงุช ุงูุฏูุน ุฎูุงู ุณุงุนุงุช ุงูุนูู.</p>
                    <button onclick="this.parentElement.parentElement.remove()" class="bg-purple-600 text-white px-6 py-3 rounded-full font-bold hover:bg-purple-700 transition-all">
                        ุญุณูุงู
                    </button>
                </div>
            `;
            document.body.appendChild(successDiv);
        }

        function resetForm() {
            document.getElementById('booking-form').reset();
            selectedDevices = [];
            selectedAddons = [];
            specialDiscountType = null;
            specialDiscountActive = false;
            
            // ุฅุนุงุฏุฉ ุชุนููู ููุฏ ุงูุฎุตู
            discountPercent = 0;
            const discountCodeInput = document.getElementById('discount-code');
            if (discountCodeInput) discountCodeInput.value = '';
            const discountMessage = document.getElementById('discount-message');
            if (discountMessage) discountMessage.textContent = '';
            const discountRow = document.getElementById('discount-row');
            if (discountRow) discountRow.classList.add('hidden');
            
            
            // ุฅูุบุงุก ุชุญุฏูุฏ ุฌููุน ุงูุฎุงูุงุช
            document.querySelectorAll('.device-checkbox, .addon-checkbox').forEach(cb => cb.checked = false);
            document.querySelectorAll('.device-quantity').forEach(input => input.value = 0);
            document.querySelectorAll('.device-days').forEach(input => input.value = 1);
            
            // ุฅูุบุงุก ุชุญุฏูุฏ ูุทุงูุจุงุช ุงูุฎุตู ุงูุฎุงุตุฉ
            const studentDisc = document.getElementById('student-discount');
            if (studentDisc) studentDisc.checked = false;
            const charityDisc = document.getElementById('charity-discount');
            if (charityDisc) charityDisc.checked = false;
            
            const specialReq = document.getElementById('special-discount-request');
            if (specialReq) specialReq.classList.add('hidden');
            const discReason = document.getElementById('discount-reason');
            if (discReason) discReason.value = '';
            
            // ุฅุฎูุงุก ุงูุญููู ุงูุงุฎุชูุงุฑูุฉ
            const distanceField = document.getElementById('distance-field');
            if (distanceField) distanceField.classList.add('hidden');
            const batteryRec = document.getElementById('battery-recommendation');
            if (batteryRec) batteryRec.classList.add('hidden');

            updateBookingSummary(); // ุงูุชุญุฏูุซ ุงูููุงุฆู ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุนููู
        }

        function updateBookingsCount() {
            const countElement = document.getElementById('bookings-count');
            if (countElement) {
                countElement.textContent = bookings.length;
            }
        }

        function toggleBookingHistory() {
            const historyDiv = document.getElementById('booking-history');
            const toggleBtn = document.getElementById('history-toggle-btn');
            
            if (historyDiv.classList.contains('hidden')) {
                historyDiv.classList.remove('hidden');
                toggleBtn.textContent = `ุฅุฎูุงุก ุณุฌู ุงูุญุฌูุฒุงุช ๐ (${bookings.length})`;
                renderBookingHistory();
            } else {
                historyDiv.classList.add('hidden');
                toggleBtn.innerHTML = `ุนุฑุถ ุณุฌู ุงูุญุฌูุฒุงุช ุงูุณุงุจูุฉ ๐ (<span id="bookings-count">${bookings.length}</span>)`;
            }
        }

        function renderBookingHistory() {
            const bookingsList = document.getElementById('bookings-list');
            if (!bookingsList) return;
            
            if (bookings.length === 0) {
                bookingsList.innerHTML = `
                    <div class="text-center text-gray-400 py-8">
                        <div class="text-4xl mb-2">๐</div>
                        <p>ูุง ุชูุฌุฏ ุญุฌูุฒุงุช ุณุงุจูุฉ</p>
                        <p class="text-sm mt-2">ุณุชุธูุฑ ุญุฌูุฒุงุชู ููุง ุจุนุฏ ุฅุฑุณุงู ุฃูู ุทูุจ</p>
                    </div>
                `;
                return;
            }
            
            // ุชุฑุชูุจ ุงูุญุฌูุฒุงุช ุญุณุจ ุงูุชุงุฑูุฎ (ุงูุฃุญุฏุซ ุฃููุงู)
            const sortedBookings = [...bookings].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
            
            bookingsList.innerHTML = sortedBookings.map(booking => {
                const createdDate = new Date(booking.created_at);
                const formattedDate = createdDate.toLocaleDateString('ar-SA', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                let devicesInfo = '';
                try {
                    const devices = JSON.parse(booking.selected_devices || '[]');
                    devicesInfo = devices.map(d => `${d.name} (${d.quantity}ร${d.days} ุฃูุงู)`).join('ุ ');
                } catch (e) {
                    devicesInfo = 'ุบูุฑ ูุญุฏุฏ';
                }
                
                let addonsInfo = '';
                try {
                    const addons = JSON.parse(booking.selected_addons || '[]');
                    addonsInfo = addons.length > 0 ? addons.map(a => a.name).join('ุ ') : 'ูุง ุชูุฌุฏ ุฅุถุงูุงุช';
                } catch (e) {
                    addonsInfo = 'ูุง ุชูุฌุฏ ุฅุถุงูุงุช';
                }
                
                return `
                    <div class="border border-gray-200 rounded-xl p-4 hover:shadow-md transition-all">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h4 class="font-bold text-lg text-purple-900">${booking.customer_name}</h4>
                                <p class="text-sm text-gray-500">${formattedDate}</p>
                            </div>
                            <div class="text-left">
                                <div class="text-lg font-bold text-purple-600">${booking.final_price} OMR</div>
                                <span class="inline-block px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">${booking.status}</span>
                            </div>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <p class="text-gray-600 mb-1"><strong>ุงูุฌูุงู:</strong> ${booking.customer_phone}</p>
                                ${booking.customer_email ? `<p class="text-gray-600 mb-1"><strong>ุงูุฅูููู:</strong> ${booking.customer_email}</p>` : ''}
                                ${booking.event_type ? `<p class="text-gray-600 mb-1"><strong>ููุน ุงููุนุงููุฉ:</strong> ${booking.event_type}</p>` : ''}
                                ${booking.event_location ? `<p class="text-gray-600 mb-1"><strong>ุงููููุน:</strong> ${booking.event_location}</p>` : ''}
                            </div>
                            <div>
                                <p class="text-gray-600 mb-1"><strong>ุงูุฃุฌูุฒุฉ:</strong> ${devicesInfo}</p>
                                <p class="text-gray-600 mb-1"><strong>ุงูุฅุถุงูุงุช:</strong> ${addonsInfo}</p>
                                ${booking.total_discount && parseFloat(booking.total_discount) > 0 ? `<p class="text-green-600 font-semibold"><strong>ุฎุตู:</strong> -${booking.total_discount} OMR</p>` : ''}
                                ${booking.special_discount_active === 'true' ? `<p class="text-orange-600 font-semibold"><strong>ูุทุงูุจุฉ ุฎุตู:</strong> ${booking.special_discount_type === 'student' ? '๐ ุทุงูุจ' : '๐ ุฎูุฑูุฉ'}</p>` : ''}
                            </div>
                        </div>
                        
                        ${booking.notes ? `
                            <div class="mt-3 p-3 bg-gray-50 rounded-lg">
                                <p class="text-sm text-gray-700"><strong>ููุงุญุธุงุช:</strong> ${booking.notes}</p>
                            </div>
                        ` : ''}
                        
                        ${booking.discount_reason ? `
                            <div class="mt-3 p-3 bg-orange-50 border border-orange-200 rounded-lg">
                                <p class="text-sm text-orange-800"><strong>ุณุจุจ ูุทุงูุจุฉ ุงูุฎุตู:</strong> ${booking.discount_reason}</p>
                            </div>
                        ` : ''}
                        
                        <div class="mt-3 flex gap-2">
                            <button onclick="duplicateBooking('${booking.__backendId}')" class="bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-bold hover:bg-blue-600 transition-all">
                                ุชูุฑุงุฑ ุงูุทูุจ ๐
                            </button>
                            <button onclick="deleteBooking('${booking.__backendId}')" class="bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold hover:bg-red-600 transition-all">
                                ุญุฐู ๐๏ธ
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        async function deleteBooking(backendId) {
            if (!window.dataSdk) return;
            
            const booking = bookings.find(b => b.__backendId === backendId);
            if (!booking) return;
            
            // ุชุฃููุฏ ุงูุญุฐู
            const confirmDiv = document.createElement('div');
            confirmDiv.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            confirmDiv.innerHTML = `
                <div class="bg-white rounded-3xl p-6 max-w-md mx-4 text-center">
                    <div class="text-4xl mb-4">๐๏ธ</div>
                    <h3 class="text-xl font-bold mb-4 text-red-600">ุชุฃููุฏ ุงูุญุฐู</h3>
                    <p class="text-gray-600 mb-6">ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุญุฌุฒ "${booking.customer_name}"ุ</p>
                    <div class="flex gap-3 justify-center">
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" class="bg-gray-300 text-gray-700 px-4 py-2 rounded-full font-bold hover:bg-gray-400 transition-all">
                            ุฅูุบุงุก
                        </button>
                        <button onclick="confirmDeleteBooking('${backendId}'); this.parentElement.parentElement.parentElement.remove();" class="bg-red-500 text-white px-4 py-2 rounded-full font-bold hover:bg-red-600 transition-all">
                            ุญุฐู ููุงุฆูุงู
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(confirmDiv);
        }

        async function confirmDeleteBooking(backendId) {
            if (!window.dataSdk) return;
            
            const booking = bookings.find(b => b.__backendId === backendId);
            if (!booking) return;
            
            const result = await window.dataSdk.delete(booking);
            if (result.isOk) {
                showToast('โ ุชู ุญุฐู ุงูุญุฌุฒ ุจูุฌุงุญ');
            } else {
                showToast('โ ูุดู ูู ุญุฐู ุงูุญุฌุฒ');
            }
        }

        function duplicateBooking(backendId) {
            const booking = bookings.find(b => b.__backendId === backendId);
            if (!booking) return;
            
            try {
                // ููุก ุงููููุฐุฌ ุจุงูุจูุงูุงุช ุงููุญููุธุฉ
                document.getElementById('customer-name').value = booking.customer_name;
                document.getElementById('customer-email').value = booking.customer_email || '';
                document.getElementById('customer-phone').value = booking.customer_phone;
                document.getElementById('event-type').value = booking.event_type || '';
                document.getElementById('event-location').value = booking.event_location || '';
                document.getElementById('notes').value = booking.notes || '';
                
                // ุชุญุฏูุฏ ุฎูุงุฑุงุช ุงูุฑุงุฏูู
                if (booking.inside_muscat) {
                    const insideMuscatRadio = document.getElementById(booking.inside_muscat === 'yes' ? 'inside-muscat-yes' : 'inside-muscat-no');
                    if (insideMuscatRadio) insideMuscatRadio.checked = true;
                }
                
                if (booking.electricity_available) {
                    const electricityRadio = document.getElementById(booking.electricity_available === 'yes' ? 'electricity-yes' : 'electricity-no');
                    if (electricityRadio) electricityRadio.checked = true;
                }
                
                if (booking.distance_km) {
                    document.getElementById('distance-km').value = booking.distance_km;
                }
                
                // ุงุณุชุนุงุฏุฉ ุงูุฃุฌูุฒุฉ ุงููุฎุชุงุฑุฉ
                const devices = JSON.parse(booking.selected_devices || '[]');
                devices.forEach(device => {
                    const checkbox = document.querySelector(`.device-checkbox[data-device="${device.name}"]`);
                    const quantityInput = document.querySelector(`.device-quantity[data-device="${device.name}"]`);
                    const daysInput = document.querySelector(`.device-days[data-device="${device.name}"]`);
                    
                    if (checkbox) checkbox.checked = true;
                    if (quantityInput) quantityInput.value = device.quantity;
                    if (daysInput) daysInput.value = device.days;
                });
                
                // ุงุณุชุนุงุฏุฉ ุงูุฅุถุงูุงุช ุงููุฎุชุงุฑุฉ
                const addons = JSON.parse(booking.selected_addons || '[]');
                addons.forEach(addon => {
                    const checkbox = document.querySelector(`.addon-checkbox[data-addon="${addon.name}"]`);
                    if (checkbox) checkbox.checked = true;
                });
                
                // ุงุณุชุนุงุฏุฉ ูุทุงูุจุฉ ุงูุฎุตู ุงูุฎุงุต
                if (booking.special_discount_active === 'true') {
                    const studentCheckbox = document.getElementById('student-discount');
                    const charityCheckbox = document.getElementById('charity-discount');
                    const discountReasonTextarea = document.getElementById('discount-reason');
                    
                    if (booking.special_discount_type === 'student') {
                        studentCheckbox.checked = true;
                    } else if (booking.special_discount_type === 'charity') {
                        charityCheckbox.checked = true;
                    }
                    
                    if (booking.discount_reason) {
                        discountReasonTextarea.value = booking.discount_reason;
                    }
                    
                    handleSpecialDiscountRequest();
                }
                
                // ุชุญุฏูุซ ุงูุชุญุฏูุฏุงุช ูุงูููุฎุต
                updateDeviceSelection();
                updateAddonSelection();
                
                // ุฅุบูุงู ุณุฌู ุงูุญุฌูุฒุงุช ูุงูุชูุฑูุฑ ูููููุฐุฌ
                toggleBookingHistory();
                showToast('โ ุชู ุชูุฑุงุฑ ุงูุทูุจ ุจูุฌุงุญ! ุฑุงุฌุน ุงูุจูุงูุงุช ูุฃุฑุณู');
                
            } catch (error) {
                showToast('โ ุญุฏุซ ุฎุทุฃ ูู ุชูุฑุงุฑ ุงูุทูุจ');
            }
        }

        // Floating Chat Functions
        let isFloatingChatOpen = false;

        function toggleFloatingChat() {
            const chatWindow = document.getElementById('floating-chat-window');
            const chatBtn = document.getElementById('floating-chat-btn');
            
            if (isFloatingChatOpen) {
                chatWindow.classList.add('hidden');
                chatBtn.style.transform = 'scale(1)';
                isFloatingChatOpen = false;
            } else {
                chatWindow.classList.remove('hidden');
                chatBtn.style.transform = 'scale(0.9)';
                isFloatingChatOpen = true;
                
                // ุงูุชุฑููุฒ ุนูู ุญูู ุงูุฅุฏุฎุงู
                setTimeout(() => {
                    document.getElementById('floating-chat-input').focus();
                }, 100);
            }
        }

        function askFloatingQuestion(question) {
            addFloatingChatMessage(question, 'user');
            
            setTimeout(() => {
                const response = smartResponses[question] || analyzeMessage(question);
                addFloatingChatMessage(response.response || response.text, 'assistant', response.showWhatsAppContact);
                
                // ุฅุถุงูุฉ ุฃุฒุฑุงุฑ ุงูุงูุชุฑุงุญุงุช
                if (response.suggestions && response.suggestions.length > 0) {
                    addFloatingSuggestionButtons(response.suggestions);
                }
            }, 1000);
        }

        function sendFloatingChatMessage() {
            const input = document.getElementById('floating-chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            addFloatingChatMessage(message, 'user');
            input.value = '';
            
            // ุชุญููู ุฐูู ููุฑุณุงูุฉ
            setTimeout(() => {
                const response = analyzeMessage(message);
                addFloatingChatMessage(response.text, 'assistant', response.showWhatsAppContact);
                
                if (response.suggestions && response.suggestions.length > 0) {
                    addFloatingSuggestionButtons(response.suggestions);
                }
            }, 1500);
        }

        function handleFloatingChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendFloatingChatMessage();
            }
        }

        function addFloatingChatMessage(message, sender, showWhatsAppContact = false) {
            const messagesContainer = document.getElementById('floating-chat-messages');
            const messageDiv = document.createElement('div');
            
            if (sender === 'user') {
                messageDiv.className = 'flex gap-2 justify-end';
                messageDiv.innerHTML = `
                    <div class="bg-purple-600 text-white rounded-2xl rounded-tr-sm p-3 max-w-xs">
                        <p class="text-sm">${message}</p>
                    </div>
                    <div class="w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center text-xs">๐ค</div>
                `;
            } else {
                messageDiv.className = 'flex gap-2';
                let messageContent = `
                    <div class="w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs">๐ค</div>
                    <div class="bg-purple-50 rounded-2xl rounded-tl-sm p-3 max-w-xs">
                        <p class="text-sm whitespace-pre-line">${message}</p>
                `;
                
                // ุฅุถุงูุฉ ุฒุฑ ุงููุงุชุณุงุจ ููุท ุจุนุฏ ุงูุญุตูู ุนูู ุฑูู ุงููุงุชู
                if (showWhatsAppContact && userPhone && userPhone !== 'ุบูุฑ ูุญุฏุฏ') {
                    const contact = getRandomWhatsAppContact();
                    messageContent += `
                        <div class="mt-3 p-2 bg-green-50 border border-green-200 rounded-lg">
                            <div class="text-center">
                                <div class="text-xs font-bold text-green-800 mb-1">๐ฌ ุชูุงุตู ูุนูุง</div>
                                <div class="text-xs text-green-700 mb-2">${contact.name} ูุชููุฑ ููุณุงุนุฏุชู</div>
                                <a href="https://wa.me/${contact.number}" target="_blank" rel="noopener noreferrer" class="inline-block bg-green-500 text-white px-2 py-1 rounded-full text-xs font-bold hover:bg-green-600 transition-all">
                                    ุชูุงุตู ูุน ${contact.name}
                                </a>
                            </div>
                        </div>
                    `;
                    
                    // ุฅุนุงุฏุฉ ุชุนููู ุญุงูุฉ ุงููุญุงุฏุซุฉ ุจุนุฏ ุฅุธูุงุฑ ุฒุฑ ุงููุงุชุณุงุจ
                    setTimeout(() => {
                        resetChatState();
                    }, 1000);
                }
                
                messageContent += `</div>`;
                messageDiv.innerHTML = messageContent;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function addFloatingSuggestionButtons(suggestions) {
            const messagesContainer = document.getElementById('floating-chat-messages');
            const suggestionsDiv = document.createElement('div');
            suggestionsDiv.className = 'flex gap-2';
            
            const buttonsHTML = suggestions.map(suggestion => 
                `<button onclick="handleFloatingSuggestion('${suggestion}')" class="bg-blue-500 text-white px-2 py-1 rounded-full text-xs hover:bg-blue-600 transition-all">${suggestion}</button>`
            ).join('');
            
            suggestionsDiv.innerHTML = `
                <div class="w-6 h-6"></div>
                <div class="flex flex-wrap gap-1 mt-2">
                    ${buttonsHTML}
                </div>
            `;
            
            messagesContainer.appendChild(suggestionsDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function handleFloatingSuggestion(suggestion) {
            if (suggestion.includes('ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ ุนู Moment+')) {
                addFloatingChatMessage('ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ ุนู Moment+', 'user');
                setTimeout(() => {
                    const response = analyzeMessage('ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ ุนู Moment+');
                    addFloatingChatMessage(response.text, 'assistant', response.showWhatsAppContact);
                }, 500);
            } else if (suggestion.includes('ูุงุ ููุท Event+')) {
                addFloatingChatMessage('ูุงุ ููุท Event+', 'user');
                setTimeout(() => {
                    const response = analyzeMessage('ูุงุ ููุท Event+');
                    addFloatingChatMessage(response.text, 'assistant', response.showWhatsAppContact);
                }, 500);
            } else if (suggestion.includes('ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ')) {
                addFloatingChatMessage('ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ', 'user');
                setTimeout(() => {
                    const response = analyzeMessage('ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ');
                    addFloatingChatMessage(response.text, 'assistant');
                }, 500);
            } else if (suggestion.includes('ูุงุ ุดูุฑุงู')) {
                addFloatingChatMessage('ูุงุ ุดูุฑุงู', 'user');
                setTimeout(() => {
                    const response = analyzeMessage('ูุงุ ุดูุฑุงู');
                    addFloatingChatMessage(response.text, 'assistant');
                    if (response.suggestions && response.suggestions.length > 0) {
                        addFloatingSuggestionButtons(response.suggestions);
                    }
                }, 500);
            } else if (suggestion.includes('ุงูุชูู ููุธุงู ุงูุญุฌุฒ')) {
                toggleFloatingChat(); // ุฅุบูุงู ุงููุญุงุฏุซุฉ ุงูุนุงุฆูุฉ
                scrollToSection('booking');
                addFloatingChatMessage('ุชู ุชูุฌููู ููุธุงู ุงูุญุฌุฒ! ๐', 'assistant');
            } else if (suggestion.includes('ุดูุฑุงู ููู')) {
                toggleFloatingChat(); // ุฅุบูุงู ุงููุญุงุฏุซุฉ ุงูุนุงุฆูุฉ
                scrollToSection('booking');
                addFloatingChatMessage('ุชู ุชูุฌููู ููุธุงู ุงูุญุฌุฒ! ๐', 'assistant');
            } else if (suggestion.includes('ุฃุถู ุงูุดุงุดุฉ ุงููุชูููุฉ')) {
                addDeviceToSelection('ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ', 45, 400);
                addFloatingChatMessage('ุชู ุฅุถุงูุฉ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ ูุทูุจู! โ', 'assistant');
            } else if (suggestion.includes('ุฃุถู ุงูุชุตููุฑ')) {
                const photographyCheckbox = document.querySelector('.addon-checkbox[data-addon="ุชุตููุฑ ุงุญุชุฑุงูู"]');
                if (photographyCheckbox) {
                    photographyCheckbox.checked = true;
                    updateAddonSelection();
                    addFloatingChatMessage('ุชู ุฅุถุงูุฉ ุงูุชุตููุฑ ุงูุงุญุชุฑุงูู ูุทูุจู! ๐ธ', 'assistant');
                }
            } else if (suggestion.includes('ุฃุฑูุฏ ุฑุคูุฉ ุฃุนูุงููู')) {
                window.open('https://mnt.wsal.ai', '_blank');
                addFloatingChatMessage('ุชู ูุชุญ ุจุทุงูุชูุง ุงูุชุนุฑูููุฉ! ุดุงูุฏ ุฃุนูุงููุง ูุฅุจุฏุงุนุงุชูุง ๐ฌโจ', 'assistant');
            } else if (suggestion.includes('ุชูุงุตู ููุชูุซูู ุงูุงุญุชุฑุงูู')) {
                const message = encodeURIComponent('ูุฑุญุจุงูุ ุฃุฑุบุจ ูู ุงูุงุณุชูุณุงุฑ ุนู ุฎุฏูุงุช ุงูุชูุซูู ุงูุงุญุชุฑุงูู ูุงูุชุตููุฑ ููุนุงููุชู ๐ธ\n\nูุฑุฌู ุชุฒููุฏู ุจุชูุงุตูู ุงูุฎุฏูุงุช ูุงูุฃุณุนุงุฑ');
                const whatsappUrl = `https://wa.me/96898567383?text=${message}`;
                window.open(whatsappUrl, '_blank');
                addFloatingChatMessage('ุชู ุชูุฌููู ูููุงุชุณุงุจ ููุงุณุชูุณุงุฑ ุนู ุงูุชูุซูู ุงูุงุญุชุฑุงูู! ๐ฌ', 'assistant');
            } else if (suggestion.includes('ุฃุถู ุจุฑุงูุฏูุบ')) {
                const brandingCheckbox = document.querySelector('.addon-checkbox[data-addon="ุจุฑุงูุฏูุบ ุงูุฃุฌูุฒุฉ"]');
                if (brandingCheckbox) {
                    brandingCheckbox.checked = true;
                    updateAddonSelection();
                    addFloatingChatMessage('ุชู ุฅุถุงูุฉ ุจุฑุงูุฏูุบ ุงูุฃุฌูุฒุฉ ูุทูุจู! ๐จ', 'assistant');
                }
            } else if (suggestion.includes('ุจุงูุฉ Premium Complete')) {
                selectPremiumCompletePackage();
                addFloatingChatMessage('ุชู ุงุฎุชูุงุฑ ุจุงูุฉ Premium Complete! ุงุฎุชุฑ ุดุงุดุชูู ุงูุขู ๐ฏ', 'assistant');
            } else if (suggestion.includes('ุชูุงุตู ูุจุงุดุฑ')) {
                toggleFloatingChat(); // ุฅุบูุงู ุงููุญุงุฏุซุฉ ุงูุนุงุฆูุฉ
                scrollToSection('contact');
                addFloatingChatMessage('ุชู ุชูุฌููู ููุณู ุงูุชูุงุตู! ๐', 'assistant');
            } else if (suggestion.includes('ุงุญุฌุฒ ุงุณุชุดุงุฑุฉ')) {
                const message = encodeURIComponent('ูุฑุญุจุงูุ ุฃุฑุบุจ ูู ุญุฌุฒ ุงุณุชุดุงุฑุฉ ูุฌุงููุฉ ูุน ูุฑูู EventPlus ูููุงูุดุฉ ุงุญุชูุงุฌุงุช ูุนุงููุชู ๐ฏ');
                const whatsappUrl = `https://wa.me/96898567383?text=${message}`;
                window.open(whatsappUrl, '_blank');
                addFloatingChatMessage('ุชู ุชูุฌููู ูููุงุชุณุงุจ ูุญุฌุฒ ุงุณุชุดุงุฑุฉ ูุฌุงููุฉ! ๐ฌ', 'assistant');
            } else {
                toggleFloatingChat(); // ุฅุบูุงู ุงููุญุงุฏุซุฉ ุงูุนุงุฆูุฉ
                scrollToSection('booking');
                addFloatingChatMessage('ุชู ุชูุฌููู ููุณู ุงูุญุฌุฒ! ๐', 'assistant');
            }
        }

        // Smart Assistant Functions
        const smartResponses = {
            'ูุง ูู ุงูุจุฑุงูุฏูุบุ': {
                response: 'ุงูุจุฑุงูุฏูุบ ูู ุชุฎุตูุต ุงูุฃุฌูุฒุฉ ุจูููุฉ ุดุฑูุชู ุฃู ูุนุงููุชู! ๐จ\n\nูุดูู:\nโข ุฅุถุงูุฉ ุงูุดุนุงุฑ ุนูู ุงูุฌูุงุฒ\nโข ุฃููุงู ูุฎุตุตุฉ ุญุณุจ ูููุชู\nโข ุชุตููู ูุงุฌูุฉ ูุทุงุจูุฉ ูุนูุงูุชู ุงูุชุฌุงุฑูุฉ\nโข ุฑุณุงุฆู ุชุฑุญูุจูุฉ ูุฎุตุตุฉ\n\nุงูุณุนุฑ: 15-35 OMR ุญุณุจ ุงูุชุนููุฏ',
                suggestions: ['ุฃุถู ุจุฑุงูุฏูุบ ุงูุฃุฌูุฒุฉ ูุทูุจู', 'ุงุทูุจ ุนุฑุถ ุณุนุฑ ููุจุฑุงูุฏูุบ']
            },
            'ุฃุญุชุงุฌ ุดุงุดุฉ ููุนุฑุถ': {
                response: 'ููุชุงุฒ! ูููุนุงุฑุถ ุฃูุตุญู ุจู: ๐บ\n\n๐ ุงูุฃูุถู: "ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ"\nโข ุชุนูู ุจุงูุจุทุงุฑูุฉ 8 ุณุงุนุงุช\nโข ุชุฏุนู ุงูููุณ ู NFC\nโข ูุซุงููุฉ ูููุนุงุฑุถ ุงููุชูููุฉ\n\n๐ก ุฅุถุงูุฉ ููุชุฑุญุฉ:\nโข ุตูุญุฉ ุชูุงุนููุฉ ูุฌูุน ุจูุงูุงุช ุงูุฒูุงุฑ\nโข ุจุฑุงูุฏูุบ ุจูููุฉ ุดุฑูุชู\nโข ุชุตููุฑ ุงุญุชุฑุงูู ูููุนุฑุถ',
                suggestions: ['ุฃุถู ุงูุดุงุดุฉ ุงููุชูููุฉ ูุทูุจู', 'ุงุทูุจ ุจุงูุฉ ุงููุนุงุฑุถ ุงููุงููุฉ']
            },
            'ูุง ุงููุฑู ุจูู ุงูุฃุฌูุฒุฉุ': {
                response: 'ุฅููู ุงููุฑููุงุช ุงูุฃุณุงุณูุฉ: ๐\n\n๐บ ูููุฉ ุชู (ุดุงุดุฉ ุงููููุฉ):\nโข ููุนุฑุถ ุงูุซุงุจุช ููุท\nโข ุชุญุชุงุฌ ููุฑุจุงุก ุฏุงุฆูุฉ\nโข ูุซุงููุฉ ููููุงุชุจ ูุงููุฏุงุฎู\n\n๐ ูููุฉ ุชู (ุงููุชูููุฉ):\nโข ุชุนูู ุจุงูุจุทุงุฑูุฉ 8 ุณุงุนุงุช\nโข ุชุฏุนู NFC ูุงูููุณ\nโข ูุซุงููุฉ ูููุนุงููุงุช ุงูุฎุงุฑุฌูุฉ\n\n๐ ููุณุฉ ุชู (ุงููุดู ุงูุชูุงุนูู):\nโข ุชุตููู ุนููุฏู ุฃููู\nโข ูุฎุตุต ูุฌูุน ุงูุจูุงูุงุช\nโข ูุซุงูู ููุชุณุฌูู ูุงูุงุณุชุจูุงูุงุช',
                suggestions: ['ูุงุฑู ุงูุฃุณุนุงุฑ', 'ุงุญุฌุฒ ุงุณุชุดุงุฑุฉ ูุฌุงููุฉ']
            },
            'ูู ุชูููุฉ ุงูุชุตููุฑุ': {
                response: 'ุชูููุฉ ุงูุชุตููุฑ ุงูุงุญุชุฑุงูู: ๐ธ\n\n๐ฐ ุงูุฃุณุนุงุฑ:\nโข ุชุตููุฑ ููุชูุบุฑุงูู: 65-90 OMR\nโข ุชุตููุฑ ููุฏูู: 80-120 OMR\nโข ููุฎุต ููุฏูู ูููุนุงููุฉ: +30 OMR\n\n๐ ุงููุดููู:\nโข ูุตูุฑ ูุญุชุฑู\nโข ูุนุฏุงุช ุนุงููุฉ ุงูุฌูุฏุฉ\nโข ุชุญุฑูุฑ ุฃุณุงุณู\nโข ุชุณููู ุฎูุงู 48 ุณุงุนุฉ\n\n๐ก ูุตูุญุฉ: ุฅุฐุง ูุงูุช ูุนุงููุชู ูุจูุฑุฉ (50+ ุดุฎุต) ุฃูุตุญู ุจุดุฏุฉ ุจุงูุชุตููุฑ ุงูุงุญุชุฑุงูู!',
                suggestions: ['ุฃุถู ุงูุชุตููุฑ ูุทูุจู', 'ุงุทูุจ ุนุฑุถ ุชุตููุฑ ูุฎุตุต']
            }
        };

        function askQuickQuestion(question) {
            addChatMessage(question, 'user');
            
            setTimeout(() => {
                const response = smartResponses[question] || analyzeMessage(question);
                addChatMessage(response.response || response.text, 'assistant', response.showWhatsAppContact);
                
                // ุฅุถุงูุฉ ุฃุฒุฑุงุฑ ุงูุงูุชุฑุงุญุงุช
                if (response.suggestions && response.suggestions.length > 0) {
                    addSuggestionButtons(response.suggestions);
                }
            }, 1000);
        }

        function sendChatMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            addChatMessage(message, 'user');
            input.value = '';
            
            // ุชุญููู ุฐูู ููุฑุณุงูุฉ
            setTimeout(() => {
                const response = analyzeMessage(message);
                addChatMessage(response.text, 'assistant', response.showWhatsAppContact);
                
                if (response.suggestions && response.suggestions.length > 0) {
                    addSuggestionButtons(response.suggestions);
                }
            }, 1500);
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }

        function addChatMessage(message, sender, showWhatsAppContact = false) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            
            if (sender === 'user') {
                messageDiv.className = 'flex gap-3 justify-end';
                messageDiv.innerHTML = `
                    <div class="bg-purple-600 text-white rounded-2xl rounded-tr-sm p-4 max-w-md">
                        <p class="text-sm">${message}</p>
                    </div>
                    <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-sm">๐ค</div>
                `;
            } else {
                messageDiv.className = 'flex gap-3';
                let messageContent = `
                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm">๐ค</div>
                    <div class="bg-purple-50 rounded-2xl rounded-tl-sm p-4 max-w-md">
                        <p class="text-sm whitespace-pre-line">${message}</p>
                `;
                
                // ุฅุถุงูุฉ ุฒุฑ ุงููุงุชุณุงุจ ููุท ุจุนุฏ ุงูุญุตูู ุนูู ุฑูู ุงููุงุชู
                if (showWhatsAppContact && userPhone && userPhone !== 'ุบูุฑ ูุญุฏุฏ') {
                    const contact = getRandomWhatsAppContact();
                    messageContent += `
                        <div class="mt-4 p-3 bg-green-50 border border-green-200 rounded-lg">
                            <div class="text-center">
                                <div class="text-sm font-bold text-green-800 mb-2">๐ฌ ุชูุงุตู ูุนูุง ุนุจุฑ ุงููุงุชุณุงุจ</div>
                                <div class="text-xs text-green-700 mb-3">${contact.name} ูุชููุฑ ููุณุงุนุฏุชู</div>
                                <a href="https://wa.me/${contact.number}" target="_blank" rel="noopener noreferrer" class="inline-block bg-green-500 text-white px-4 py-2 rounded-full text-sm font-bold hover:bg-green-600 transition-all">
                                    ุชูุงุตู ูุน ${contact.name} ๐ฌ
                                </a>
                            </div>
                        </div>
                    `;
                    
                    // ุฅุนุงุฏุฉ ุชุนููู ุญุงูุฉ ุงููุญุงุฏุซุฉ ุจุนุฏ ุฅุธูุงุฑ ุฒุฑ ุงููุงุชุณุงุจ
                    setTimeout(() => {
                        resetChatState();
                    }, 1000);
                }
                
                messageContent += `</div>`;
                messageDiv.innerHTML = messageContent;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // ุฏุงูุฉ ุฅุนุงุฏุฉ ุชุนููู ุญุงูุฉ ุงููุญุงุฏุซุฉ (ููุงุณุชุฎุฏุงู ุงูุฏุงุฎูู ููุท)
        function resetChatState() {
            // ูุง ูุนูุฏ ุชุนููู chatState ููุง ูุฃููุง ูุฑูุฏ ุงูุงุญุชูุงุธ ุจุญุงูุฉ asking_moment
            userMessage = '';
            // ูุง ูุนูุฏ ุชุนููู userPhone ูุฃููุง ูุญุชุงุฌู ูุฒุฑ ุงููุงุชุณุงุจ
            hasReceivedDefaultResponse = false;
            // ูุง ูุนูุฏ ุชุนููู hasShownExpertMessage ู expertMessageShown ูุถูุงู ุนุฏู ุงูุชูุฑุงุฑ
        }

        // ุฏุงูุฉ ุฅุนุงุฏุฉ ุชุนููู ูุงููุฉ ููุฌูุณุฉ ุงูุฌุฏูุฏุฉ (ูููู ุงุณุชุฎุฏุงููุง ุนูุฏ ุงูุญุงุฌุฉ)
        function resetFullChatSession() {
            chatState = 'normal';
            userMessage = '';
            userPhone = '';
            hasReceivedDefaultResponse = false;
            conversationHistory = [];
            messageCount = 0;
            hasShownExpertMessage = false;
            expertMessageShown = false;
        }

        function addSuggestionButtons(suggestions) {
            const messagesContainer = document.getElementById('chat-messages');
            const suggestionsDiv = document.createElement('div');
            suggestionsDiv.className = 'flex gap-3';
            
            const buttonsHTML = suggestions.map(suggestion => 
                `<button onclick="handleSuggestion('${suggestion}')" class="bg-blue-500 text-white px-3 py-1 rounded-full text-xs hover:bg-blue-600 transition-all">${suggestion}</button>`
            ).join('');
            
            suggestionsDiv.innerHTML = `
                <div class="w-8 h-8"></div>
                <div class="flex flex-wrap gap-2 mt-2">
                    ${buttonsHTML}
                </div>
            `;
            
            messagesContainer.appendChild(suggestionsDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // ูุชุบูุฑุงุช ูุชุชุจุน ุญุงูุฉ ุงููุญุงุฏุซุฉ
        let chatState = 'normal'; // normal, waiting_phone, contact_ready, asking_moment, completed
        let userMessage = '';
        let userPhone = '';
        let hasReceivedDefaultResponse = false; // ุชุชุจุน ูุง ุฅุฐุง ุชู ุนุฑุถ ุงูุฑุฏ ุงูุงูุชุฑุงุถู
        let conversationHistory = []; // ุชุชุจุน ุชุงุฑูุฎ ุงููุญุงุฏุซุฉ
        let messageCount = 0; // ุนุฏุงุฏ ุงูุฑุณุงุฆู
        let hasShownExpertMessage = false; // ุชุชุจุน ุนุฑุถ ุฑุณุงูุฉ ุงูุฎุจุฑุงุก (ูุฑุฉ ูุงุญุฏุฉ ููุท)
        let expertMessageShown = false; // ุญูุงูุฉ ุฅุถุงููุฉ ูููุน ุชูุฑุงุฑ ุฑุณุงูุฉ ุงูุฎุจุฑุงุก

        function analyzeMessage(message) {
            const lowerMessage = message.toLowerCase();
            messageCount++;
            
            // ุฅุถุงูุฉ ุงูุฑุณุงูุฉ ูุชุงุฑูุฎ ุงููุญุงุฏุซุฉ
            conversationHistory.push({
                message: message,
                timestamp: new Date().toISOString(),
                messageNumber: messageCount
            });
            
            // ุฅุฐุง ููุง ูู ุงูุชุธุงุฑ ุฑูู ุงููุงุชู
            if (chatState === 'waiting_phone') {
                // ุงูุชุญูู ูู ุฃู ุงูุฑุณุงูุฉ ุชุญุชูู ุนูู ุฑูู ูุงุชู ุนููุงูู ุตุญูุญ
                const phoneRegex = /(\+968|968|00968)?\s*[79]\d{7}|^[79]\d{7}$/;
                if (phoneRegex.test(message.replace(/\s/g, ''))) {
                    userPhone = message.trim();
                    chatState = 'contact_ready';
                    
                    // ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู Formspree ูุน ุชุงุฑูุฎ ุงููุญุงุฏุซุฉ ุงููุงูู
                    submitChatToFormspree(conversationHistory, userPhone);
                    
                    return {
                        text: 'ููุชุงุฒ! ุดูุฑุงู ูู ๐\n\nุณุฃูุตูู ุงูุขู ูุน ุฃุญุฏ ุฎุจุฑุงุฆูุง ุนุจุฑ ุงููุงุชุณุงุจ ูููุณุงุนุฏุฉ ุงูุดุฎุตูุฉ ๐ฌ\n\nุณูููู ูุนู ุชูุงุตูู ูุญุงุฏุซุชูุง ูุณููุฏุฑ ูุณุงุนุฏู ุจุดูู ุฃูุถู! ๐ฏ',
                        showWhatsAppContact: true
                    };
                } else {
                    return {
                        text: 'ูุฑุฌู ุฅุฏุฎุงู ุฑูู ูุงุชู ุนููุงูู ุตุญูุญ ๐ฑ\n\nูุซุงู: 98567383 ุฃู +968 98567383',
                        suggestions: []
                    };
                }
            }
            
            // ุฅุฐุง ููุง ูู ูุฑุญูุฉ ุฌุงูุฒูุฉ ุงูุชูุงุตู (ุจุนุฏ ุนุฑุถ ุฒุฑ ุงููุงุชุณุงุจ)
            if (chatState === 'contact_ready') {
                chatState = 'asking_moment';
                return {
                    text: 'ุจุงูููุงุณุจุฉุ ูู ุฃูุช ููุชู ุจุฎุฏูุงุช ูุฌููุนุฉ Moment+ ุงูุฃุฎุฑูุ ๐ฌ๐ค\n\n๐ช Event+ ูููุนุงููุงุช ูุงูุชุฑููู (ุงูุฎุฏูุฉ ุงูุญุงููุฉ)\n๐ค Moment AI ููุชูููุฉ ูุงูุฃุชูุชุฉ ุงูุฐููุฉ\n๐ฌ Moment Production ููุฅูุชุงุฌ ุงูููู\n\nูู ุชุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ ุนู ุฎุฏูุงุช ุงููุฌููุนุฉ ุงูุฃุฎุฑูุ',
                    suggestions: ['ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ ุนู Moment+', 'ูุงุ ููุท Event+']
                };
            }
            
            // ุฅุฐุง ููุง ูู ูุฑุญูุฉ ุงูุณุคุงู ุนู Moment+
            if (chatState === 'asking_moment') {
                if (lowerMessage.includes('ูุนู') || lowerMessage.includes('ุฃุฑูุฏ') || lowerMessage.includes('ููุชู')) {
                    chatState = 'completed';
                    return {
                        text: 'ุฑุงุฆุน! ๐ฌ ูุฌููุนุฉ Moment+ ุชุถู ุฎุฏูุงุช ูุชููุนุฉ:\n\n๐ช Event+ ูููุนุงููุงุช ูุงูุชุฑููู\n๐ค Moment AI ููุชูููุฉ ูุงูุฃุชูุชุฉ ุงูุฐููุฉ\n๐ฌ Moment Production ููุฅูุชุงุฌ ุงูููู\n\nุณูุชูุงุตู ูุนู ุฎุจูุฑูุง ุนุจุฑ ุงููุงุชุณุงุจ ูููุฏู ูู ูุนูููุงุช ุดุงููุฉ ุนู ุฌููุน ุฎุฏูุงุช ุงููุฌููุนุฉ!\n\nุณุชุญุตู ุนูู ุงุณุชุดุงุฑุฉ ูุชูุงููุฉ ุชุบุทู ูู ุงุญุชูุงุฌุงุชู ๐ฏ',
                        showWhatsAppContact: true
                    };
                } else {
                    chatState = 'completed';
                    return {
                        text: 'ุชูุงู! ุณูุชูุงุตู ูุนู ุฎุจูุฑูุง ุนุจุฑ ุงููุงุชุณุงุจ ูููุณุงุนุฏุฉ ูู ุงุญุชูุงุฌุงุช Event+ ููุท ๐\n\nุณูููู ูุนู ุชูุงุตูู ูุญุงุฏุซุชูุง ูุณููุฏู ูู ุฃูุถู ุงูุญููู! ๐ฏ',
                        showWhatsAppContact: true
                    };
                }
            }
            
            // ุฅุฐุง ูุงูุช ุงููุญุงุฏุซุฉ ููุชููุฉุ ุนุฑุถ ุงูุฑุณุงูุฉ ุงูุงูุชุฑุงุถูุฉ ูุฑุฉ ุฃุฎุฑู
            if (chatState === 'completed') {
                return {
                    text: 'ุดูุฑุงู ูุณุคุงูู! ๐\n\nูุฃูุฏู ูู ุฃูุถู ุงูุชุฑุงุญุ ุฃุฎุจุฑูู:\nโข ูุง ููุน ูุนุงููุชูุ (ูุนุฑุถุ ูุคุชูุฑุ ุชุฏุดูู...)\nโข ูู ุนุฏุฏ ุงูุญุถูุฑ ุงููุชููุนุ\nโข ูู ุงููููุน ุฏุงุฎูู ุฃู ุฎุงุฑุฌูุ\n\nุฃู ููููู ุงุฎุชูุงุฑ ูู ุงูุฃุณุฆูุฉ ุงูุณุฑูุนุฉ ุฃุนูุงู! ๐\n\nุฃู ุงุณุชุฎุฏู ูุธุงู ุงูุญุฌุฒ ุฃุฏูุงู ูุจุงุดุฑุฉ ๐',
                    suggestions: ['ูุนุฑุถ ุชุฌุงุฑู', 'ูุคุชูุฑ ุฃู ูุฏูุฉ', 'ุชุฏุดูู ููุชุฌ', 'ุงูุชูู ููุธุงู ุงูุญุฌุฒ']
                };
            }
            
            // ุงูุฑุฏูุฏ ุนูู ุงูุชุญูุงุช ูุงููุฌุงููุงุช ุงูุนุงูุฉ
            if (lowerMessage.includes('ุงูุณูุงู ุนูููู') || lowerMessage.includes('ุณูุงู ุนูููู')) {
                return {
                    text: 'ูุนูููู ุงูุณูุงู ูุฑุญูุฉ ุงููู ูุจุฑูุงุชู! ๐\n\nุฃููุงู ูุณููุงู ุจู ูู EventPlusุ ุฃูุง ุนุงุฑู ูุณุงุนุฏู ุงูุฐูู ๐ค\n\nููู ูููููู ูุณุงุนุฏุชู ุงููููุ',
                    suggestions: ['ุฃุญุชุงุฌ ุดุงุดุฉ ููุนุงููุฉ', 'ุฃุฑูุฏ ูุนุฑูุฉ ุงูุฃุณุนุงุฑ', 'ูุง ูู ุฎุฏูุงุชููุ']
                };
            }
            
            if (lowerMessage.includes('ูุฑุญุจุง') || lowerMessage.includes('ูุฑุญุจุงู') || lowerMessage.includes('ููุง') || 
                lowerMessage.includes('ุฃูููู') || lowerMessage.includes('ูุงู') || lowerMessage.includes('hello')) {
                return {
                    text: 'ุฃููุงู ูุณููุงู! ูุฑุญุจุงู ุจู ูู EventPlus ๐\n\nุฃูุง ุนุงุฑูุ ูุณุงุนุฏู ุงูุฐูู ุงููุชุฎุตุต ูู ุญููู ุงูุนุฑุถ ูุงูุชูุงุนู ๐ฏ\n\nุณุนูุฏ ุจููุงุฆู! ููู ูููููู ูุณุงุนุฏุชูุ',
                    suggestions: ['ุฃุญุชุงุฌ ุดุงุดุฉ ููุนุงููุฉ', 'ุฃุฑูุฏ ูุนุฑูุฉ ุงูุฃุณุนุงุฑ', 'ูุง ูู ุฎุฏูุงุชููุ']
                };
            }
            
            if (lowerMessage.includes('ูููู') || lowerMessage.includes('ููู ุญุงูู') || lowerMessage.includes('ุดูููู') || 
                lowerMessage.includes('ููู ุงูุฃุญูุงู') || lowerMessage.includes('ุฅูุด ุฃุฎุจุงุฑู')) {
                return {
                    text: 'ุงูุญูุฏ ููู ุจุฎูุฑ ูุนุงููุฉ! ๐\n\nุฃูุง ููุง ููุณุชุนุฏ ููุณุงุนุฏุชู ูู ูู ูุง ูุฎุต ุญููู ุงูุนุฑุถ ูุงูุชูุงุนู ๐ช\n\nูุฃูุช ููู ุญุงููุ ุฃุชููู ุชููู ุจุฃูุถู ุญุงู! ๐\n\nุฅูุด ุงููู ูููููู ุฃุณุงุนุฏู ููู ุงููููุ',
                    suggestions: ['ุฃุญุชุงุฌ ุดุงุดุฉ ููุนุงููุฉ', 'ุฃุฑูุฏ ูุนุฑูุฉ ุงูุฃุณุนุงุฑ', 'ูุง ูู ุฎุฏูุงุชููุ']
                };
            }
            
            if (lowerMessage.includes('ุดูุฑุง') || lowerMessage.includes('ุดูุฑุงู') || lowerMessage.includes('ูุดููุฑ') || 
                lowerMessage.includes('ูุนุทูู ุงูุนุงููุฉ') || lowerMessage.includes('ุงููู ูุนุทูู ุงูุนุงููุฉ')) {
                return {
                    text: 'ุงูุนูู! ๐ ุงููู ูุนุงููู ููุณุนุฏู ๐\n\nูุฐุง ูุงุฌุจู ููู ุฏูุงุนู ุณุฑูุฑู ูุณุงุนุฏุชู! ๐\n\nุฅุฐุง ุงุญุชุฌุช ุฃู ุดูุก ุขุฎุฑุ ุฃูุง ููุง ุฏุงุฆูุงู ๐ค\n\nูู ุชุญุชุงุฌ ูุณุงุนุฏุฉ ูู ุดูุก ุขุฎุฑุ',
                    suggestions: ['ูุนู ุฃุญุชุงุฌ ูุณุงุนุฏุฉ ุฃุฎุฑู', 'ูุง ุดูุฑุงู', 'ุฃุฑูุฏ ุงูุชูุงุตู ูุน ุงููุฑูู']
                };
            }
            
            if (lowerMessage.includes('ุจุฎูุฑ') || lowerMessage.includes('ุงูุญูุฏ ููู') || lowerMessage.includes('ุชูุงู') || 
                lowerMessage.includes('ูููุณ') || lowerMessage.includes('ุฒูู')) {
                return {
                    text: 'ุงูุญูุฏ ููู! ูุณุนุฏูู ุฅูู ุจุฎูุฑ ๐\n\nุทูุจุ ุฎููุง ูุฏุฎู ูู ุงูููุถูุน ุงูููู ๐ผ\n\nุฅูุด ููุน ุงููุนุงููุฉ ุงููู ุชุฎุทุท ููุงุ ุฃู ุฅูุด ุงููู ุชุญุชุงุฌ ูุณุงุนุฏุฉ ูููุ',
                    suggestions: ['ูุนุฑุถ ุชุฌุงุฑู', 'ูุคุชูุฑ ุฃู ูุฏูุฉ', 'ุชุฏุดูู ููุชุฌ', 'ูุนุงููุฉ ุฃุฎุฑู']
                };
            }
            
            if (lowerMessage.includes('ูุง ุดูุฑุงู') || lowerMessage.includes('ูุง ุดูุฑุง') || lowerMessage.includes('ุฎูุงุต') || 
                lowerMessage.includes('ููุงูุฉ') || lowerMessage.includes('ุงูุชููุช')) {
                return {
                    text: 'ุชูุงู! ๐\n\nูุงู ูู ุฏูุงุนู ุณุฑูุฑู ูุณุงุนุฏุชู ุงูููู ๐\n\nุฅุฐุง ุงุญุชุฌุช ุฃู ุดูุก ูู ุงููุณุชูุจูุ ูุง ุชุชุฑุฏุฏ ูู ุงูุชูุงุตู ูุนูุง!\n\nEventPlus ุฏุงุฆูุงู ูู ุฎุฏูุชู ๐ฏโจ',
                    suggestions: ['ุดูุฑุงู ููู', 'ุณุฃุชูุงุตู ูุงุญูุงู']
                };
            }
            
            // ุงูุฑุฏูุฏ ุงูุชูููุฉ ูุงููุชุฎุตุตุฉ
            if (lowerMessage.includes('ูุนุฑุถ') || lowerMessage.includes('exhibition')) {
                return {
                    text: 'ุฑุงุฆุน! ุฅููู ุฃููุงุน ุงูุดุงุดุงุช ูุงุณุชุฎุฏุงูุงุชูุง ูููุนุงุฑุถ: ๐ช\n\n๐บ **ูููุฉ ุชู โ ุดุงุดุฉ ุงููููุฉ ุงูุฐููุฉ**\nโข ููุนุฑุถ ุงูุซุงุจุช ูู ุงููุฏุฎู\nโข ุชุญุชุงุฌ ููุฑุจุงุก ุฏุงุฆูุฉ\nโข ูุซุงููุฉ ูุนุฑุถ ูุนูููุงุช ุงูุดุฑูุฉ\n\n๐ **ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ**\nโข ุชุนูู ุจุงูุจุทุงุฑูุฉ 8 ุณุงุนุงุช\nโข ุชุฏุนู NFC ูุงูููุณ\nโข ูุซุงููุฉ ูููุนุงุฑุถ ุงูุฎุงุฑุฌูุฉ ูุงูุชููู\n\n๐ **ููุณุฉ ุชู โ ุงููุดู ุงูุชูุงุนูู**\nโข ุชุตููู ุนููุฏู ุฃููู\nโข ูุฎุตุต ูุฌูุน ุจูุงูุงุช ุงูุฒูุงุฑ\nโข ูุซุงูู ููุชุณุฌูู ูุงูุงุณุชุจูุงูุงุช\n\n๐ก ูููุนุงุฑุถ ุฃูุตุญ ุจุงูุดุงุดุฉ ุงููุชูููุฉ + ุงููุดู ุงูุชูุงุนูู!\n\nูู ุชุฑูุฏ ุงููุฒูุฏ ูู ุงูุชูุงุตููุ',
                    suggestions: ['ุฃุถู ุงูุดุงุดุฉ ุงููุชูููุฉ', 'ุฃุฑูุฏ ุงููุฒูุฏ ูู ุงูุชูุงุตูู']
                };
            }
            
            if (lowerMessage.includes('ูุคุชูุฑ') || lowerMessage.includes('conference') || lowerMessage.includes('ูุฏูุฉ')) {
                return {
                    text: 'ููุชุงุฒ! ูููุคุชูุฑุงุช ุฃูุชุฑุญ ุนููู: ๐ค\n\n๐บ ุดุงุดุฉ ุงููููุฉ ุงูุฐููุฉ ูููุฏุฎู\n๐ ูุดู ุชูุงุนูู ูุชุณุฌูู ุงูุญุถูุฑ\n๐ฌ ููุฏูู ููุดู ุชุฑุญูุจู\n๐ธ ุชุตููุฑ ุงุญุชุฑุงูู ููุฌูุณุงุช\n\nูุฐุง ุณูุนุทู ุงูุทุจุงุนุงู ููููุงู ุฑุงุฆุนุงู!\n\nูู ุชุฑูุฏ ุงููุฒูุฏ ูู ุงูุชูุงุตููุ',
                    suggestions: ['ุงุญุฌุฒ ุจุงูุฉ ุงููุคุชูุฑุงุช', 'ุฃุฑูุฏ ุงููุฒูุฏ ูู ุงูุชูุงุตูู']
                };
            }
            
            if (lowerMessage.includes('ุชุฏุดูู') || lowerMessage.includes('launch') || lowerMessage.includes('ุงูุชุชุงุญ')) {
                return {
                    text: 'ุชุฏุดูู ุฑุงุฆุน! ๐ ุฃูุชุฑุญ ุนููู:\n\n๐ฏ ุจุงูุฉ Premium Complete:\nโข ุดุงุดุชุงู ููุนุฑุถ\nโข ุชุตููุฑ ุงุญุชุฑุงูู + ููุฎุต ููุฏูู\nโข ุจุฑุงูุฏูุบ ูุงูู ุจูููุชู\nโข ุตูุฑ ูุฎุตุตุฉ ููุดุงุดุงุช\n\nุณูุฌุนู ุชุฏุดููู ูุง ูููุณู! โจ\n\nูู ุชุฑูุฏ ุงููุฒูุฏ ูู ุงูุชูุงุตููุ',
                    suggestions: ['ุงุญุฌุฒ ุจุงูุฉ Premium Complete', 'ุฃุฑูุฏ ุงููุฒูุฏ ูู ุงูุชูุงุตูู']
                };
            }
            
            if (lowerMessage.includes('ุชุตููุฑ') || lowerMessage.includes('photography') || lowerMessage.includes('ุชูุซูู')) {
                return {
                    text: 'ูู ูุฏูู ูุนุงููุฉ ููุฏุฑ ููุซููุง ูู ุจุฃุญูู ุชูุซููุ ๐ธโจ\n\nูุญู ุฌุฒุก ูู ูุฌููุนุฉ Moment+ ุงูุชู ุชุถู:\n\n๐ช Event+ ูููุนุงููุงุช ูุงูุชุฑููู\n๐ค Moment AI ููุชูููุฉ ูุงูุฃุชูุชุฉ ุงูุฐููุฉ\n๐ฌ Moment Production ููุฅูุชุงุฌ ุงูููู\n\nุฌุฑุจ ุชุดูู ุฃุนูุงููุงุ ูููู ูุจูุฑู! ๐ฌ\n\n๐ ุชุนุฑู ุฃูุซุฑ ุนูู ูุฌููุนุชูุง ุนุจุฑ ุจุทุงูุชูุง ุงูุชุนุฑูููุฉ:\n๐ https://mnt.wsal.ai\n\nุฃู ููููู ุฅุถุงูุฉ ุงูุชุตููุฑ ุงูุงุญุชุฑุงูู ูุทูุจู ูุจุงุดุฑุฉ! ๐ฏ',
                    suggestions: ['ุฃุถู ุงูุชุตููุฑ ูุทูุจู', 'ุฃุฑูุฏ ุฑุคูุฉ ุฃุนูุงููู', 'ุชูุงุตู ููุชูุซูู ุงูุงุญุชุฑุงูู']
                };
            }
            
            if (lowerMessage.includes('ุณุนุฑ') || lowerMessage.includes('ุชูููุฉ') || lowerMessage.includes('ูู') || 
                lowerMessage.includes('ุฃุณุนุงุฑ') || lowerMessage.includes('ูููุณ')) {
                return {
                    text: 'ุจุฎุตูุต ุงูุฃุณุนุงุฑ: ๐ฐ\n\n๐ฑ ุงูุฃุฌูุฒุฉ: 45-50 OMR/ููู\n๐ ุงูุฅุถุงูุงุช: ุญุณุจ ุงูุทูุจ\n๐ ุงูุชูุตูู: 15-60 OMR ุญุณุจ ุงูุนุฏุฏ\n\n๐ก ุฎุตููุงุช ุฐููุฉ:\nโข ุฎุตู ุงูุฃุฌูุฒุฉ ุงููุชุนุฏุฏุฉ: 10%\nโข ุฎุตู ุงููุชุฑุงุช ุงูุทูููุฉ: ุญุชู 50%\nโข ุฎุตู ุงูุฅุถุงูุงุช ุงููุชุนุฏุฏุฉ: 8-15%\n\nุฌููุน ุงูุฃุณุนุงุฑ ูุงุจูุฉ ููุชูุงูุถ! ๐ค\n\nูู ุชุฑูุฏ ุนุฑุถ ุณุนุฑ ูุฎุตุตุ',
                    suggestions: ['ุงุญุณุจ ุชูููุฉ ุทูุจู', 'ุฃุฑูุฏ ุนุฑุถ ุณุนุฑ ูุฎุตุต']
                };
            }
            
            if (lowerMessage.includes('ุจุทุงุฑูุฉ') || lowerMessage.includes('ููุฑุจุงุก')) {
                return {
                    text: 'ุจุฎุตูุต ุงูููุฑุจุงุก ูุงูุจุทุงุฑูุฉ: โก\n\n๐ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ:\nโข ุชุนูู 8 ุณุงุนุงุช ูุชูุงุตูุฉ\nโข ูุง ุชุญุชุงุฌ ููุฑุจุงุก ุฎุงุฑุฌูุฉ\nโข ูุซุงููุฉ ูููุนุงููุงุช ุงูุฎุงุฑุฌูุฉ\n\nโก ุงูุดุงุดุงุช ุงูุฃุฎุฑู:\nโข ุชุญุชุงุฌ ูุตุฏุฑ ููุฑุจุงุก\nโข ูุซุงููุฉ ููุฃูุงูู ุงููุบููุฉ\n\nุฃู ููุน ูุนุงููุชูุ ๐ค',
                    suggestions: ['ุฃุญุชุงุฌ ุดุงุดุฉ ุจุทุงุฑูุฉ', 'ูุนุงููุชู ูู ููุงู ูุบูู']
                };
            }
            
            if (lowerMessage.includes('ุฎุฏูุงุช') || lowerMessage.includes('ูุง ุชูุฏููู') || lowerMessage.includes('ุฅูุด ุนูุฏูู')) {
                return {
                    text: 'ุฎุฏูุงุชูุง ูู Event+ (ุฌุฒุก ูู ูุฌููุนุฉ Moment+): ๐ฏ\n\n๐ฑ ุงูุฃุฌูุฒุฉ:\nโข ุดุงุดุงุช ุฐููุฉ ุชูุงุนููุฉ\nโข ุฃูุดุงู ุชูุงุนููุฉ\nโข ุดุงุดุงุช ุจุทุงุฑูุฉ ูุชูููุฉ\n\n๐จ ุงูุฅุถุงูุงุช:\nโข ุจุฑุงูุฏูุบ ูุฎุตุต\nโข ุตูุญุงุช ุชูุงุนููุฉ HTML\nโข ุฃูุนุงุจ ุชูุงุนููุฉ\nโข ุชุตููุฑ ุงุญุชุฑุงูู\nโข ููุฏูู ููุดู\n\n๐ผ ุงูุจุงูุงุช:\nโข Essential Plus\nโข Interactive Pro\nโข Premium Complete\n\n๐ ูุฌููุนุฉ Moment+ ุชุถู ุฃูุถุงู:\nโข Moment AI ููุชูููุฉ ูุงูุฃุชูุชุฉ ุงูุฐููุฉ\nโข Moment Production ููุฅูุชุงุฌ ุงูููู\n\nุฃู ุฎุฏูุฉ ุชููู ุฃูุซุฑุ',
                    suggestions: ['ุงูุฃุฌูุฒุฉ ูุงูุดุงุดุงุช', 'ุงูุฅุถุงูุงุช ูุงูุชุตููุฑ', 'ุฎุฏูุงุช ุงููุฌููุนุฉ ุงูุฃุฎุฑู']
                };
            }
            
            // ุงูุชุญูู ูู ุทูุจ ุงููุฒูุฏ ูู ุงูุชูุงุตูู ุฃู ุนุฑุถ ุณุนุฑ ูุฎุตุต
            if (lowerMessage.includes('ุงููุฒูุฏ ูู ุงูุชูุงุตูู') || lowerMessage.includes('ุนุฑุถ ุณุนุฑ ูุฎุตุต') || 
                lowerMessage.includes('ุชูุงุตูู') || lowerMessage.includes('ูุฎุตุต') || 
                lowerMessage.includes('ุฃุฑูุฏ') || lowerMessage.includes('ุฃุญุชุงุฌ')) {
                
                userMessage = message;
                chatState = 'waiting_phone';
                
                return {
                    text: 'ููุชุงุฒ! ุณุฃุญุชุงุฌ ุฑูู ูุงุชูู ูุฃุชูุงุตู ูุนู ูุฃูุฏู ูู ุนุฑุถุงู ูุฎุตุตุงู ๐ฑ\n\nูุฑุฌู ูุชุงุจุฉ ุฑูู ูุงุชูู:',
                    suggestions: []
                };
            }
            
            // ุจุนุฏ 4-5 ุฑุณุงุฆูุ ุงูุณุคุงู ุนู ุฑูู ุงููุงุชู ุฃููุงู (ูุฑุฉ ูุงุญุฏุฉ ููุท ูู ุงูุฌูุณุฉ)
            if (messageCount >= 4 && chatState === 'normal' && !hasShownExpertMessage && !expertMessageShown) {
                hasShownExpertMessage = true;
                expertMessageShown = true; // ุญูุงูุฉ ุฅุถุงููุฉ
                userMessage = message;
                chatState = 'waiting_phone';
                
                return {
                    text: 'ูุจุฏู ุฅูู ููุชู ุจุฎุฏูุงุชูุง! ๐\n\nูุฃูุฏู ูู ุฃูุถู ุฎุฏูุฉ ููุณุงุนุฏุฉ ุดุฎุตูุฉ ุฃูุซุฑุ ุณุฃูุตูู ูุน ุฃุญุฏ ุฎุจุฑุงุฆูุง ุนุจุฑ ุงููุงุชุณุงุจ ๐ฌ\n\nุณูููู ูุนู ุชูุงุตูู ูุญุงุฏุซุชูุง ูุณููุฏุฑ ูุณุงุนุฏู ุจุดูู ุฃูุถู! ๐ฏ\n\nูุฑุฌู ูุชุงุจุฉ ุฑูู ูุงุชูู ููุชูุงุตู:',
                    suggestions: []
                };
            }
            
            // ุฑุฏ ุงูุชุฑุงุถู ุฐูู - ุฅุฐุง ูู ูุชู ุนุฑุถู ูู ูุจูุ ุงุนุฑุถู ูุงูุชุธุฑ ุงูุฑุฏ
            if (!hasReceivedDefaultResponse) {
                hasReceivedDefaultResponse = true;
                return {
                    text: 'ุดูุฑุงู ูุณุคุงูู! ๐\n\nูุฃูุฏู ูู ุฃูุถู ุงูุชุฑุงุญุ ุฃุฎุจุฑูู:\nโข ูุง ููุน ูุนุงููุชูุ (ูุนุฑุถุ ูุคุชูุฑุ ุชุฏุดูู...)\nโข ูู ุนุฏุฏ ุงูุญุถูุฑ ุงููุชููุนุ\nโข ูู ุงููููุน ุฏุงุฎูู ุฃู ุฎุงุฑุฌูุ\n\nุฃู ููููู ุงุฎุชูุงุฑ ูู ุงูุฃุณุฆูุฉ ุงูุณุฑูุนุฉ ุฃุนูุงู! ๐',
                    suggestions: ['ุชูุงุตู ูุจุงุดุฑ', 'ุงุญุฌุฒ ุงุณุชุดุงุฑุฉ ูุฌุงููุฉ']
                };
            } else {
                // ุฑุฏ ุนุงู ููุฑุณุงุฆู ุบูุฑ ุงููููููุฉ
                const generalResponses = [
                    'ูููุช! ๐ค ุฏุนูู ุฃุณุงุนุฏู ุฃูุซุฑ...\n\nูู ููููู ุชูุถูุญ ููุน ุงููุนุงููุฉ ุฃู ุงูุฎุฏูุฉ ุงููู ุชุญุชุงุฌูุงุ',
                    'ููุชุงุฒ! ๐ ุฃูุฏุฑ ุฃุณุงุนุฏู ุจุดูู ุฃูุถู ูู ุนุฑูุช:\n\nโข ููุน ุงููุนุงููุฉ\nโข ุนุฏุฏ ุงูุญุถูุฑ ุงููุชููุน\nโข ุงููููุน ูุงูุชุงุฑูุฎ',
                    'ุฃููุฏ ูููููู ูุณุงุนุฏุชู! ๐\n\nุจุณ ุฃุญุชุงุฌ ุฃุนุฑู ุชูุงุตูู ุฃูุซุฑ ุนู ุงุญุชูุงุฌุงุชู ุนุดุงู ุฃูุฏู ูู ุฃูุถู ุญู ๐ฏ'
                ];
                
                const randomResponse = generalResponses[Math.floor(Math.random() * generalResponses.length)];
                
                return {
                    text: randomResponse,
                    suggestions: ['ูุนุฑุถ ุชุฌุงุฑู', 'ูุคุชูุฑ ุฃู ูุฏูุฉ', 'ุชุฏุดูู ููุชุฌ', 'ุฃุฑูุฏ ุงูุชูุงุตู ุงููุจุงุดุฑ']
                };
            }
        }

        // ุฏุงูุฉ ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู Formspree
        async function submitChatToFormspree(conversationHistory, phone) {
            try {
                const formData = new FormData();
                
                // ุชุญููู ุชุงุฑูุฎ ุงููุญุงุฏุซุฉ ุฅูู ูุต ููุณู
                const conversationText = conversationHistory.map((entry, index) => {
                    const time = new Date(entry.timestamp).toLocaleTimeString('ar-SA', {
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    return `${index + 1}. [${time}] ${entry.message}`;
                }).join('\n');
                
                formData.append('conversation_history', conversationText);
                formData.append('phone', phone);
                formData.append('source', 'Smart Assistant Chat - ุนุงุฑู');
                formData.append('total_messages', conversationHistory.length.toString());
                formData.append('session_start', conversationHistory[0]?.timestamp || new Date().toISOString());
                formData.append('session_end', new Date().toISOString());
                
                // ุฅุถุงูุฉ ููุฎุต ุณุฑูุน ูููุญุงุฏุซุฉ
                const lastMessage = conversationHistory[conversationHistory.length - 1]?.message || '';
                const summary = generateConversationSummary(conversationHistory);
                formData.append('conversation_summary', summary);
                formData.append('last_message', lastMessage);
                
                const response = await fetch('https://formspree.io/f/mdkpqkgy', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                if (response.ok) {
                    console.log('ุชู ุฅุฑุณุงู ุชุงุฑูุฎ ุงููุญุงุฏุซุฉ ุจูุฌุงุญ ุฅูู Formspree');
                } else {
                    console.error('ูุดู ูู ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู Formspree');
                }
            } catch (error) {
                console.error('ุฎุทุฃ ูู ุฅุฑุณุงู ุงูุจูุงูุงุช:', error);
            }
        }
        
        // ุฏุงูุฉ ุฅูุดุงุก ููุฎุต ูููุญุงุฏุซุฉ
        function generateConversationSummary(history) {
            if (history.length === 0) return 'ูุญุงุฏุซุฉ ูุงุฑุบุฉ';
            
            const messages = history.map(h => h.message.toLowerCase());
            let interests = [];
            
            // ุชุญููู ุงูุชูุงูุงุช ุงูุนููู
            if (messages.some(m => m.includes('ูุนุฑุถ'))) interests.push('ูุนุงุฑุถ');
            if (messages.some(m => m.includes('ูุคุชูุฑ') || m.includes('ูุฏูุฉ'))) interests.push('ูุคุชูุฑุงุช');
            if (messages.some(m => m.includes('ุชุฏุดูู') || m.includes('ุงูุชุชุงุญ'))) interests.push('ุชุฏุดูู');
            if (messages.some(m => m.includes('ุณุนุฑ') || m.includes('ุชูููุฉ'))) interests.push('ุงุณุชูุณุงุฑ ุฃุณุนุงุฑ');
            if (messages.some(m => m.includes('ุดุงุดุฉ') || m.includes('ุฌูุงุฒ'))) interests.push('ุฃุฌูุฒุฉ');
            if (messages.some(m => m.includes('ุชุตููุฑ'))) interests.push('ุชุตููุฑ ุงุญุชุฑุงูู');
            if (messages.some(m => m.includes('ุจุฑุงูุฏูุบ'))) interests.push('ุจุฑุงูุฏูุบ');
            
            const interestsSummary = interests.length > 0 ? interests.join('ุ ') : 'ุงุณุชูุณุงุฑ ุนุงู';
            
            return `ุงูุนููู ุฃุธูุฑ ุงูุชูุงูุงู ุจู: ${interestsSummary} | ุนุฏุฏ ุงูุฑุณุงุฆู: ${history.length} | ุงููุฏุฉ: ${Math.round((new Date(history[history.length - 1]?.timestamp) - new Date(history[0]?.timestamp)) / 60000)} ุฏูููุฉ`;
        }

        // ุฏุงูุฉ ุงุฎุชูุงุฑ ุฑูู ูุงุชุณุงุจ ุนุดูุงุฆู
        function getRandomWhatsAppContact() {
            const contacts = [
                { name: 'ุญูุฏ', number: '96898567383' },
                { name: 'ุนุจุฏุงูุนุฒูุฒ', number: '96877220363' }
            ];
            
            const randomIndex = Math.floor(Math.random() * contacts.length);
            return contacts[randomIndex];
        }

        function handleSuggestion(suggestion) {
            if (suggestion.includes('ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ ุนู Moment+')) {
                addChatMessage('ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ ุนู Moment+', 'user');
                setTimeout(() => {
                    const response = analyzeMessage('ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ ุนู Moment+');
                    addChatMessage(response.text, 'assistant', response.showWhatsAppContact);
                }, 500);
            } else if (suggestion.includes('ูุงุ ููุท Event+')) {
                addChatMessage('ูุงุ ููุท Event+', 'user');
                setTimeout(() => {
                    const response = analyzeMessage('ูุงุ ููุท Event+');
                    addChatMessage(response.text, 'assistant', response.showWhatsAppContact);
                }, 500);
            } else if (suggestion.includes('ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ')) {
                addChatMessage('ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ', 'user');
                setTimeout(() => {
                    const response = analyzeMessage('ูุนูุ ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ');
                    addChatMessage(response.text, 'assistant');
                }, 500);
            } else if (suggestion.includes('ูุงุ ุดูุฑุงู')) {
                addChatMessage('ูุงุ ุดูุฑุงู', 'user');
                setTimeout(() => {
                    const response = analyzeMessage('ูุงุ ุดูุฑุงู');
                    addChatMessage(response.text, 'assistant');
                    if (response.suggestions && response.suggestions.length > 0) {
                        addSuggestionButtons(response.suggestions);
                    }
                }, 500);
            } else if (suggestion.includes('ุงูุชูู ููุธุงู ุงูุญุฌุฒ')) {
                scrollToSection('booking');
                addChatMessage('ุชู ุชูุฌููู ููุธุงู ุงูุญุฌุฒ! ๐', 'assistant');
            } else if (suggestion.includes('ุดูุฑุงู ููู')) {
                scrollToSection('booking');
                addChatMessage('ุชู ุชูุฌููู ููุธุงู ุงูุญุฌุฒ! ๐', 'assistant');
            } else if (suggestion.includes('ุฃุถู ุงูุดุงุดุฉ ุงููุชูููุฉ')) {
                addDeviceToSelection('ูููุฉ ุชู โ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ', 45, 400);
                addChatMessage('ุชู ุฅุถุงูุฉ ุงูุดุงุดุฉ ุงููุชูููุฉ ุงูุฐููุฉ ูุทูุจู! โ', 'assistant');
            } else if (suggestion.includes('ุฃุถู ุงูุชุตููุฑ')) {
                const photographyCheckbox = document.querySelector('.addon-checkbox[data-addon="ุชุตููุฑ ุงุญุชุฑุงูู"]');
                if (photographyCheckbox) {
                    photographyCheckbox.checked = true;
                    updateAddonSelection();
                    addChatMessage('ุชู ุฅุถุงูุฉ ุงูุชุตููุฑ ุงูุงุญุชุฑุงูู ูุทูุจู! ๐ธ', 'assistant');
                }
            } else if (suggestion.includes('ุฃุฑูุฏ ุฑุคูุฉ ุฃุนูุงููู')) {
                window.open('https://mnt.wsal.ai', '_blank');
                addChatMessage('ุชู ูุชุญ ุจุทุงูุชูุง ุงูุชุนุฑูููุฉ! ุดุงูุฏ ุฃุนูุงููุง ูุฅุจุฏุงุนุงุชูุง ๐ฌโจ', 'assistant');
            } else if (suggestion.includes('ุชูุงุตู ููุชูุซูู ุงูุงุญุชุฑุงูู')) {
                const message = encodeURIComponent('ูุฑุญุจุงูุ ุฃุฑุบุจ ูู ุงูุงุณุชูุณุงุฑ ุนู ุฎุฏูุงุช ุงูุชูุซูู ุงูุงุญุชุฑุงูู ูุงูุชุตููุฑ ููุนุงููุชู ๐ธ\n\nูุฑุฌู ุชุฒููุฏู ุจุชูุงุตูู ุงูุฎุฏูุงุช ูุงูุฃุณุนุงุฑ');
                const whatsappUrl = `https://wa.me/96898567383?text=${message}`;
                window.open(whatsappUrl, '_blank');
                addChatMessage('ุชู ุชูุฌููู ูููุงุชุณุงุจ ููุงุณุชูุณุงุฑ ุนู ุงูุชูุซูู ุงูุงุญุชุฑุงูู! ๐ฌ', 'assistant');
            } else if (suggestion.includes('ุฃุถู ุจุฑุงูุฏูุบ')) {
                const brandingCheckbox = document.querySelector('.addon-checkbox[data-addon="ุจุฑุงูุฏูุบ ุงูุฃุฌูุฒุฉ"]');
                if (brandingCheckbox) {
                    brandingCheckbox.checked = true;
                    updateAddonSelection();
                    addChatMessage('ุชู ุฅุถุงูุฉ ุจุฑุงูุฏูุบ ุงูุฃุฌูุฒุฉ ูุทูุจู! ๐จ', 'assistant');
                }
            } else if (suggestion.includes('ุจุงูุฉ Premium Complete')) {
                selectPremiumCompletePackage();
                addChatMessage('ุชู ุงุฎุชูุงุฑ ุจุงูุฉ Premium Complete! ุงุฎุชุฑ ุดุงุดุชูู ุงูุขู ๐ฏ', 'assistant');
            } else if (suggestion.includes('ุชูุงุตู ูุจุงุดุฑ')) {
                scrollToSection('contact');
                addChatMessage('ุชู ุชูุฌููู ููุณู ุงูุชูุงุตู! ๐', 'assistant');
            } else if (suggestion.includes('ุงุญุฌุฒ ุงุณุชุดุงุฑุฉ')) {
                const message = encodeURIComponent('ูุฑุญุจุงูุ ุฃุฑุบุจ ูู ุญุฌุฒ ุงุณุชุดุงุฑุฉ ูุฌุงููุฉ ูุน ูุฑูู EventPlus ูููุงูุดุฉ ุงุญุชูุงุฌุงุช ูุนุงููุชู ๐ฏ');
                const whatsappUrl = `https://wa.me/96898567383?text=${message}`;
                window.open(whatsappUrl, '_blank');
                addChatMessage('ุชู ุชูุฌููู ูููุงุชุณุงุจ ูุญุฌุฒ ุงุณุชุดุงุฑุฉ ูุฌุงููุฉ! ๐ฌ', 'assistant');
            } else {
                scrollToSection('booking');
                addChatMessage('ุชู ุชูุฌููู ููุณู ุงูุญุฌุฒ! ๐', 'assistant');
            }
        }

        // ุฑุจุท ุงูุฃุญุฏุงุซ ุงูุฑุฆูุณูุฉ
        document.addEventListener('DOMContentLoaded', function() {
            // ุฑุจุท ุงูุฅุถุงูุงุช
            document.querySelectorAll('.addon-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', updateAddonSelection);
            });
            
            // ุฑุจุท ุญููู ุงูุฃุฌูุฒุฉ ุจุงูุชุญุฏูุซ ุงูููุฑู (ูุญู ูุดููุฉ ุนุฏู ุชุญุฏูุซ ุงูุณุนุฑ ุนูุฏ ุชุบููุฑ ุงููููุฉ/ุงูุฃูุงู)
            document.querySelectorAll('.device-checkbox, .device-quantity, .device-days').forEach(element => {
                element.addEventListener('change', function() {
                    updateDeviceSelection(); 
                });
            });

            // ุฑุจุท ุฒุฑ ุชุทุจูู ุงูุฎุตู ุจุงูุฏุงูุฉ
            const applyDiscountBtn = document.querySelector('button[onclick="applyDiscount()"]');
            if(applyDiscountBtn) {
                applyDiscountBtn.addEventListener('click', applyDiscount);
            }
            
            // ุฑุจุท ุฃุฒุฑุงุฑ ุงูุฅุฑุณุงู
            document.getElementById('email-submit-btn').addEventListener('click', submitViaEmail);
            document.getElementById('whatsapp-submit-btn').addEventListener('click', submitViaWhatsApp);
            
            // ุชููุฆุฉ ุฑูุงุจุท ุงูุงุชุตุงู
            const whatsappNum = (defaultConfig.whatsapp_number || '').replace(/[^0-9]/g,'');
            const email = defaultConfig.email_address || '';
            const waURL = `https://wa.me/${whatsappNum}`;

            const waHero = document.getElementById('whatsapp-hero-btn');
            const waContact = document.getElementById('whatsapp-contact-btn');
            const emailContact = document.getElementById('email-contact-btn');
            const waDisplay = document.getElementById('whatsapp-display');
            const emailDisplay = document.getElementById('email-display');

            if (waHero) waHero.href = waURL;
            if (waContact) waContact.href = waURL;
            if (emailContact) emailContact.href = `mailto:${email}`;
            if (waDisplay) waDisplay.textContent = defaultConfig.whatsapp_number;
            if (emailDisplay) emailDisplay.textContent = email;

            // ุงุณุชุฏุนุงุก ุชููุฆุฉ ุงูู SDK
            initializeApp().catch(console.error);
        });

    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99ad64b286c0d1e0',t:'MTc2MjUyNDQwOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
